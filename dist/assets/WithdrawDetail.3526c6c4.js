import{_ as re,u as ce,r,D as W,a7 as _e,C as ie,w as pe,e as i,a as g,c as x,t as y,j as a,k as n,q as V,T as me,b as he,F as q,m as N,p as R,y as S,z as c,v as P,U as Y,V as $,l as E}from"./index.3fee5d13.js";import{h as F}from"./moment.9709ab41.js";import{k as ve,l as fe}from"./user.18d2d274.js";import{u as be}from"./user.9a164dae.js";const ge={class:"crumbs"},we=c("\u98CE\u63A7\u7CFB\u7EDF"),ke=c("\u7528\u6237\u7BA1\u7406"),ye=c("\u4EBA\u5DE5\u5BA1\u6838"),De={class:"container"},Ce={class:"handle-box"},xe=c("\u67E5\u8BE2"),Ve=c("\u91CD\u7F6E"),Pe=c("\u8FD4\u56DE"),Ye=c("\u8BE6\u60C5 "),Le=c("\u540C\u610F "),Me=c("\u62D2\u7EDD "),ze={class:"pagination"},Be={__name:"WithdrawDetail",setup(Ie){const D=ce(),A=be(),d=r(""),s=r(""),L=r([]);r(),r("\u9879\u76EE");const h=W({}),M=r(0),t=W({main_product_id:D.mainProductId,product_id:"",page_index:1,page_size:10,start_date:void 0,end_date:void 0,status:1});let w=r(""),z=r([]),B=r([]),O=r([]);const k=r();r(!1);const m=o=>{ve(o).then(e=>{var u;return L.value=(u=e.data)==null?void 0:u.lists.map(v=>({...v,updated_at:F(v.updated_at).format("YYYY-MM-DD HH:mm:ss")})),M.value=e.data.total_count,h.apply_users_count=e.data.apply_users_count,h.unaudit_orders_count=e.data.unaudit_orders_count,h.unaudit_reward_sum=e.data.unaudit_reward_sum,o={...o,page_size:e.data.total_count},o}).catch(()=>{})},G=()=>{me().then(o=>{z.value=o.data,O.value=o.data}).catch(()=>{})},b=o=>{he({main_product_id:o}).then(u=>{B.value=u.data}).catch(()=>{})},I=(o,e)=>{fe({id:o,status:e}).then(v=>{v.status==200?(E.success("\u5BA1\u6838\u6210\u529F\uFF01"),m(t)):E.error(v.message)}).catch(()=>{})};s.value="",typeof d.value=="number"&&(w.value=d.value),d.value="";const p=_e();p.params.product_name!==""?(d.value=p.params.main_product_name,s.value=p.params.product_name,t.product_id=p.params.product_id,w.value=p.params.main_product_id,b(p.params.main_product_id)):(delete t.product_id,p.params.main_product_name!==""&&(d.value=p.params.main_product_name,w.value=p.params.main_product_id,b(p.params.main_product_id)));const J=o=>{if(o!==null){let e=[];o.forEach(u=>{u!=null&&e.push(F(u).format("YYYY-MM-DD HH:mm:ss"))}),{...t,start_date:e[0],end_date:e[1]},t.start_date=e[0],t.end_date=e[1]}else t.start_date=void 0,t.end_date=void 0},U=ie(),K=()=>{k.value=null,U.go(-1)};pe(()=>D.mainProductId,(o,e)=>{console.log(o),d.value=o,b(o)});const Q=o=>{$.confirm("\u786E\u5B9A\u8981\u540C\u610F\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{I(o,2)}).catch(()=>{})},X=o=>{$.confirm("\u786E\u5B9A\u8981\u62D2\u7EDD\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{I(o,4)}).catch(()=>{})},Z=()=>{s.value="",d.value==-1||({...t,main_product_id:d.value},t.product_id="",w.value=d.value,b(d.value))},ee=o=>{if(t.page_index=o,d.value==-1)m(t);else if(d.value>0)if(s.value==-1){const e={product:d.value,...t};m(e)}else if(s.value>0){const e={...t,product_id:s.value};m(e)}else{const e={...t,product_id:d.value};m(e)}else{const e={...t};m(e)}},ae=()=>{s.value==-1?{...t,product_id:d.value}:({...t,product_id:s.value},t.product_id=s.value)},te=o=>{U.push({name:"userdetail",params:{wechat_user_id:o}}),A.setuserDetail(o)},oe=()=>{console.log(t),m(t)},le=()=>{t.product_id=void 0,t.start_date=void 0,t.end_date=void 0,k.value=[],s.value="",m(t)};return b(D.mainProductId),m(t),G(),(o,e)=>{const u=i("el-breadcrumb-item"),v=i("el-breadcrumb"),j=i("el-option"),H=i("el-select"),ne=i("el-date-picker"),f=i("el-button"),C=i("el-form-item"),de=i("el-form"),_=i("el-table-column"),se=i("el-table"),ue=i("el-pagination");return g(),x("div",null,[y("div",ge,[a(v,{separator:"/"},{default:n(()=>[a(u,null,{default:n(()=>[we]),_:1}),a(u,null,{default:n(()=>[ke]),_:1}),a(u,null,{default:n(()=>[ye]),_:1})]),_:1})]),y("div",De,[y("div",Ce,[V(a(H,{style:{width:"200px"},modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),placeholder:"\u9879\u76EE",class:"m-2",onChange:Z},{default:n(()=>[(g(!0),x(q,null,N(S(z),l=>(g(),R(j,{key:l.id,label:l.main_product_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),[[Y,!1]]),a(H,{style:{width:"200px"},modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value=l),placeholder:"\u5E94\u7528",class:"m-2",onChange:ae},{default:n(()=>[(g(!0),x(q,null,N(S(B),l=>(g(),R(j,{key:l.product_id,label:l.product_name,value:l.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(ne,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=l=>k.value=l),type:"daterange","range-separator":"\u2192",onChange:J,"start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue"]),a(f,{type:"primary",onClick:oe},{default:n(()=>[xe]),_:1}),a(f,{type:"info",onClick:le},{default:n(()=>[Ve]),_:1}),a(f,{type:"primary",onClick:K},{default:n(()=>[Pe]),_:1})]),a(de,{model:h,inline:!0},{default:n(()=>[a(C,{label:"\u672A\u5BA1\u8BA2\u5355\u6570"},{default:n(()=>[c(P(h.unaudit_orders_count),1)]),_:1}),a(C,{label:"\u7533\u8BF7\u4EBA\u6570"},{default:n(()=>[c(P(h.apply_users_count),1)]),_:1}),a(C,{label:"\u672A\u5BA1\u603B\u91D1\u989D"},{default:n(()=>[c(P(h.unaudit_reward_sum),1)]),_:1})]),_:1},8,["model"]),a(se,{data:L.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:n(()=>[a(_,{prop:"wechat_user_id",label:"\u7528\u6237ID"}),a(_,{prop:"main_product_name",label:"\u9879\u76EE"}),a(_,{prop:"product_name",label:"\u5E94\u7528"}),a(_,{prop:"nickname",label:"\u7528\u6237\u540D"}),a(_,{prop:"bind_account_count",label:"\u8BBE\u5907\u5173\u8054\u8D26\u53F7"}),a(_,{prop:"amount",label:"\u7533\u8BF7\u63D0\u73B0\u91D1\u989D"}),a(_,{prop:"oaid",label:"\u6570\u76DFid"}),a(_,{prop:"ip",label:"ip"}),a(_,{prop:"ip_address",label:"ip\u5730\u5740"}),a(_,{prop:"updated_at",sortable:"",label:"\u7533\u8BF7\u65F6\u95F4"}),a(_,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:n(l=>[a(f,{type:"text",icon:"el-icon-link",onClick:T=>te(l.row.wechat_user_id)},{default:n(()=>[Ye]),_:2},1032,["onClick"]),V(a(f,{type:"text",class:"agree",icon:"el-icon-edit",onClick:T=>Q(l.row.id)},{default:n(()=>[Le]),_:2},1032,["onClick"]),[[Y,l.row.status==1]]),V(a(f,{type:"text",class:"red",icon:"el-icon-delete",onClick:T=>X(l.row.id)},{default:n(()=>[Me]),_:2},1032,["onClick"]),[[Y,l.row.status==1]])]),_:1})]),_:1},8,["data"]),y("div",ze,[a(ue,{background:"",layout:"total, prev, pager, next","current-page":t.page_index,"page-size":t.page_size,total:M.value,onCurrentChange:ee},null,8,["current-page","page-size","total"])])])])}}},We=re(Be,[["__scopeId","data-v-373f0996"],["__file","/Users/apple/Desktop/project-b/relationship.b/src/views/WithdrawDetail.vue"]]);export{We as default};
