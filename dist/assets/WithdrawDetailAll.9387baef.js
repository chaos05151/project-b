import{_ as G,g as i,f as T,by as K,u as Q,o as b,c as x,a as y,b as o,w as p,bw as H,r as h,U as I,aJ as z,a4 as R,e as g}from"./index.27a7b396.js";import{a as X,b as Z}from"./product.e1329e0e.js";import{h as P}from"./moment.9709ab41.js";import{l as U}from"./user.845bccdc.js";import{e as N}from"./export2excel.a0c92898.js";import"./request.9d852b1a.js";const c=i(""),m=i(""),J=i([]),q=i([]);let f=i("");const $=i("\u4E00\u7EA7\u6E38\u620F"),k=T({}),L=i({}),D=i(0),d=T({page_index:1,page_size:10,status:3});let E=i([]),M=i([]),O=i([]);const S=i(),V=i(!1),s=n=>{U(n).then(r=>{var v;J.value=(v=r.data)==null?void 0:v.lists.map(e=>({...e,updated_at:P(e.updated_at).format("YYYY-MM-DD HH:mm:ss")})),D.value=r.data.total_count,k.apply_users_count=r.data.apply_users_count,k.unaudit_orders_count=r.data.unaudit_orders_count,k.unaudit_reward_sum=r.data.unaudit_reward_sum,L.value=JSON.parse(JSON.stringify(n))}).catch(r=>{}).then(()=>{})},aa=()=>{X().then(n=>{E.value=n.data,O.value=n.data}).catch(()=>{})},Y=n=>{Z({main_product_id:n}).then(v=>{M.value=v.data}).catch(()=>{})},ea={name:"basetable",setup(){c.value="",m.value="";const n=K(),r=Q();n.params.product_name!==""?(c.value=n.params.main_product_name,m.value=n.params.product_name,d.product_id=n.params.product_id,f.value=n.params.main_product_id,Y(n.params.main_product_id)):n.params.main_product_name!==""&&(c.value=n.params.main_product_name,d.main_product_id=n.params.main_product_id,f.value=n.params.main_product_id,Y(n.params.main_product_id));const v=(a,t,u)=>{typeof t=="number"?M.value.map(l=>{if(l.product_id==t){a=l.main_product_name,t=l.product_name;return}}):typeof a=="number"&&t==""&&E.value.map(l=>{l.id==a&&(a=l.main_product_name)}),S.value=null,r.push({name:"withdrawdetail",params:{main_product_name:a,product_name:t,product_id:u,main_product_id:f.value}})};return s(d),aa(),{tableData:J,widthdrawDetail:k,product_type:$,options:E,suboptions:M,addoptions:O,main_product_name_selected:c,product_name_selected:m,getProductAndDataList:()=>{if(m.value="",c.value==-1)s(d);else{const a={...d,main_product_id:c.value};d.product_id="",f.value=c.value,s(a),Y(c.value)}},getDataById:()=>{if(m.value==-1){const a={...d,product_id:c.value};a.product_id==-1&&delete a.product_id,s(a)}else{const a={...d,product_id:m.value};d.product_id=m.value,a.product_id==-1&&delete a.product_id,s(a)}},query:d,handlePageChange:a=>{if(d.page_index=a,c.value==-1)s(d);else if(c.value>0)if(m.value==-1){const t={main_product_id:c.value,...d};s(t)}else if(m.value>0){const t={...d,product_id:m.value};s(t)}else{const t={...d,main_product_id:c.value};s(t)}else{const t={...d};s(t)}},pageTotal:D,handleDate:a=>{if(a!==null){let t=[];a.forEach(l=>{l!=null&&t.push(P(l).format("YYYY-MM-DD HH:mm:ss"))});let u={...d,start_date:t[0],end_date:t[1]};d.start_date=t[0],d.end_date=t[1],s(u)}else s(d)},dateRange:S,getExcel:()=>{L.value.page_size=D.value?D.value<=1e4?D.value:1e4:10,U(L.value).then(a=>{if(a.status==200){q.value=a.data.lists.map(u=>({wechat_user_id:u.wechat_user_id,main_product_name:u.main_product_name,product_name:u.product_name,nickname:u.nickname,bind_account_count:u.bind_account_count,amount:u.amount,oaid:u.oaid,ip:u.ip,ip_address:u.ip_address,updated_at:P(u.updated_at).format("YYYY-MM-DD HH:mm:ss")}));const t=["\u7528\u6237ID","\u7236\u6E38\u620F","\u5B50\u6E38\u620F","\u7528\u6237\u540D","\u8BBE\u5907\u5173\u8054\u8D26\u53F7","\u7533\u8BF7\u63D0\u73B0\u91D1\u989D","\u6570\u76DFid","ip","ip\u5730\u5740","\u63D0\u73B0\u65F6\u95F4"];N(q.value,"\u63D0\u73B0\u8BB0\u5F55",t,"\u63D0\u73B0\u8BB0\u5F55")}else a.message?H.error(a.message):H.error("\u540E\u7AEFapi\u63A5\u53E3\u5F02\u5E38\uFF01")})},isShow:V,get:()=>{V.value=!V.value,d.status=3,s(d)},goback:v,main_product_id:f}},methods:{withdrawDetail(n){this.$router.push({name:"userdetail",params:{wechat_user_id:n}})}}},ta={class:"crumbs"},oa=g("\u98CE\u63A7\u7CFB\u7EDF"),na=g("\u7528\u6237\u7BA1\u7406"),da=g("\u63D0\u73B0\u8BB0\u5F55"),la={class:"container"},ra={class:"handle-box"},ua=g("\u5BFC\u51FA"),_a=g("\u8FD4\u56DE"),ca=g("\u8BE6\u60C5 "),sa={class:"pagination"};function ia(n,r,v,e,W,B){const w=h("el-breadcrumb-item"),A=h("el-breadcrumb"),C=h("el-option"),a=h("el-select"),t=h("el-date-picker"),u=h("el-button"),l=h("el-table-column"),F=h("el-table"),j=h("el-pagination");return b(),x("div",null,[y("div",ta,[o(A,{separator:"/"},{default:p(()=>[o(w,null,{default:p(()=>[oa]),_:1}),o(w,null,{default:p(()=>[na]),_:1}),o(w,null,{default:p(()=>[da]),_:1})]),_:1})]),y("div",la,[y("div",ra,[o(a,{modelValue:e.main_product_name_selected,"onUpdate:modelValue":r[0]||(r[0]=_=>e.main_product_name_selected=_),placeholder:"\u4E00\u7EA7\u6E38\u620F",class:"m-2",onChange:e.getProductAndDataList},{default:p(()=>[(b(!0),x(I,null,z(e.options,_=>(b(),R(C,{key:_.id,label:_.main_product_name,value:_.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),o(a,{modelValue:e.product_name_selected,"onUpdate:modelValue":r[1]||(r[1]=_=>e.product_name_selected=_),placeholder:"\u4E8C\u7EA7\u6E38\u620F",class:"m-2",onChange:e.getDataById},{default:p(()=>[(b(!0),x(I,null,z(e.suboptions,_=>(b(),R(C,{key:_.product_id,label:_.product_name,value:_.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),o(t,{modelValue:e.dateRange,"onUpdate:modelValue":r[2]||(r[2]=_=>e.dateRange=_),type:"daterange","range-separator":"\u2192",onChange:e.handleDate,"start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue","onChange"]),o(u,{type:"primary",onClick:e.getExcel},{default:p(()=>[ua]),_:1},8,["onClick"]),o(u,{type:"primary",onClick:r[3]||(r[3]=_=>e.goback(e.main_product_name_selected,e.product_name_selected,e.query.product_id))},{default:p(()=>[_a]),_:1})]),o(F,{data:e.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:p(()=>[o(l,{prop:"wechat_user_id",label:"\u7528\u6237ID"}),o(l,{prop:"main_product_name",label:"\u7236\u6E38\u620F"}),o(l,{prop:"product_name",label:"\u5B50\u6E38\u620F"}),o(l,{prop:"nickname",label:"\u7528\u6237\u540D"}),o(l,{prop:"bind_account_count",label:"\u8BBE\u5907\u5173\u8054\u8D26\u53F7"}),o(l,{prop:"amount",label:"\u7533\u8BF7\u63D0\u73B0\u91D1\u989D"}),o(l,{prop:"oaid",label:"\u6570\u76DFid"}),o(l,{prop:"ip",label:"ip"}),o(l,{prop:"ip_address",label:"ip\u5730\u5740"}),o(l,{prop:"updated_at",sortable:"",label:"\u63D0\u73B0\u65F6\u95F4"}),o(l,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:p(_=>[o(u,{type:"text",icon:"el-icon-link",onClick:pa=>B.withdrawDetail(_.row.wechat_user_id)},{default:p(()=>[ca]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),y("div",sa,[o(j,{background:"",layout:"total, prev, pager, next","current-page":e.query.page_index,"page-size":e.query.page_size,total:e.pageTotal,onCurrentChange:e.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])])}var Da=G(ea,[["render",ia],["__scopeId","data-v-b9210476"]]);export{Da as default};
