import{_ as Q,g as s,f as U,r,o as f,c as y,a as C,b as t,w as o,G as B,E as b,H as R,e as g,F as x,I as A,J as M}from"./index.87432d79.js";import{i as W,j as X,k as Z,l as $}from"./product.7350ee23.js";import{h as T}from"./moment.9709ab41.js";import"./request.5c28a085.js";const m=s(""),u=s(""),ee=s(""),c=U({page_index:1,page_size:10}),ae=s(0),j=s([]),q=s(0),le=s(""),te=s("\u4E00\u7EA7\u6E38\u620F"),oe=U({}),_=U({}),H=s([]),I=s([]),E=s([]),F=s([]),ne=()=>{W().then(n=>{n.status==200?(H.value=n.data.games,u.value=H.value[0].value,I.value=n.data.channels,E.value=n.data.games,F.value=n.data.channels):n.message?b.error(n.message):b.error("\u540E\u7AEFapi\u63A5\u53E3\u5F02\u5E38\uFF01")}).catch(()=>{})},L=n=>n?/^([0-9]\d|[0-9])(.([0-9]\d|\d)){2}$/.test(n)?!0:(b.error("\u7248\u672C\u53F7\u683C\u5F0F\u4E3A\u6570\u5B57\u5982:x.x.x"),!1):(b.error("\u8BF7\u9009\u62E9\u6E38\u620F\uFF01"),!1),p=n=>{X(n).then(e=>{e.status==200?(j.value=e.data.lists.map(i=>({...i,created_at:T(i.created_at).format("YYYY-MM-DD HH:mm:ss"),uptime:T(i.uptime).format("YYYY-MM-DD HH:mm:ss")})),q.value=e.data.total_count):b.error(e==null?void 0:e.message)}).catch(()=>{})},de=n=>{$(n).then(e=>{if(e.status==200){b.success("\u6DFB\u52A0\u7248\u672C\u6210\u529F"),m.value="";const i={product_id:u.value,...c};p(i)}else b.error(e==null?void 0:e.message)})},N=n=>{Z(n).then(e=>{if(e.status==200){b.success("\u5220\u9664\u7248\u672C\u6210\u529F"),m.value="";const i={product_id:u.value,...c};p(i)}})},se={name:"basetable",setup(){m.value="";const n={product_id:u.value,...c};p(n),ne();const e=()=>{c.pageIndex=1,p(c)},i=d=>{c.page_index=d,v()},l=d=>{R.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{N(d)}).catch(()=>{})},z=s(!1),k=s(!1),Y=()=>{k.value=!0},w=()=>{if(k.value=!1,_.add_uptime&&_.add_uptime<T().format("YYYY-MM-DD HH:mm:ss")){b.error("\u9884\u671F\u4E0A\u7EBF\u65F6\u95F4\u4E0D\u80FD\u5728\u5F53\u524D\u65F6\u95F4\u4E4B\u524D\uFF01");return}if(!L(_.add_versions_b)||!L(_.add_versions_c))return;const d={product_id:_.add_product_name_selected,channel:_.add_channel_name_selected,versions_b:_.add_versions_b,versions_c:_.add_versions_c,uptime:_.add_uptime?_.add_uptime:T().format("YYYY-MM-DD HH:mm:ss")};de(d)},h=()=>{v()},v=()=>{if(u.value==-1&&m.value==-1)p(c);else if(u.value==-1&&m.value!=-1){const d={channel:m.value,...c};p(d)}else if(u.value!=-1&&m.value==-1){const d={product_id:u.value,...c};p(d)}else if(u.value||m.value){const d={product_id:u.value,channel:m.value,...c};p(d)}else p(c)};return{query:c,tableData:j,pageTotal:q,editVisible:z,addVisible:k,form:oe,formAdd:_,handleSearch:e,handlePageChange:i,handleDelete:l,handleAdd:Y,saveAdd:w,deleteVersionTabData:N,product_type:te,productoptions:H,channeloptions:I,addproductoptions:E,addchanneloptions:F,channel_name_selected:m,product_name_selected:u,main_product_value_select:le,check_main_product_name:ae,add_channel_name_selected_label:ee,getData:p,getProductAndDataList:h,getChannelAndDataList:v}}},re={class:"crumbs"},ce=g("\u98CE\u63A7\u7CFB\u7EDF"),_e=g("\u7248\u672C\u7BA1\u7406"),ue={class:"container"},ie={class:"handle-box"},me=g("\xA0\xA0 "),pe=g("\u65B0\u589E\u7248\u672C"),fe=g("\u5220\u9664 "),be={class:"pagination"},ve={class:"dialog-footer"},he=g("\u53D6 \u6D88"),ge=g("\u786E \u5B9A");function Ve(n,e,i,l,z,k){const Y=r("el-breadcrumb-item"),w=r("el-breadcrumb"),h=r("el-option"),v=r("el-select"),d=r("el-button"),V=r("el-table-column"),S=r("el-table"),G=r("el-pagination"),D=r("el-form-item"),P=r("el-input"),J=r("el-date-picker"),K=r("el-form"),O=r("el-dialog");return f(),y("div",null,[C("div",re,[t(w,{separator:"/"},{default:o(()=>[t(Y,null,{default:o(()=>[ce]),_:1}),t(Y,null,{default:o(()=>[_e]),_:1})]),_:1})]),C("div",ue,[C("div",ie,[t(v,{modelValue:l.product_name_selected,"onUpdate:modelValue":e[0]||(e[0]=a=>l.product_name_selected=a),placeholder:"\u6E38\u620F\u9009\u62E9",class:"m-2",onChange:l.getProductAndDataList},{default:o(()=>[(f(!0),y(x,null,A(l.productoptions,a=>(f(),M(h,{key:a.value,label:a.label_name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(v,{modelValue:l.channel_name_selected,"onUpdate:modelValue":e[1]||(e[1]=a=>l.channel_name_selected=a),placeholder:"\u6E20\u9053\u9009\u62E9",class:"m-2",onChange:l.getChannelAndDataList},{default:o(()=>[t(h,{label:"\u5168\u90E8",value:"-1"}),(f(!0),y(x,null,A(l.channeloptions,a=>(f(),M(h,{key:a.value,label:a.label_name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),me,B(' <el-button type="primary" icon="el-icon-search" @click="handleSearch">\u641C\u7D22</el-button> '),t(d,{type:"primary",onClick:l.handleAdd},{default:o(()=>[pe]),_:1},8,["onClick"])]),t(S,{data:l.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:o(()=>[t(V,{prop:"channel_name",label:"\u6E20\u9053\u4FE1\u606F"}),t(V,{prop:"versions_b",label:"\u540E\u7AEF\u7248\u672C"}),t(V,{prop:"created_at",label:"\u521B\u5EFA\u65F6\u95F4"}),t(V,{prop:"versions_c",label:"\u524D\u7AEF\u6700\u65B0\u7248\u672C"}),t(V,{prop:"uptime",label:"\u9884\u671F\u4E0A\u7EBF\u65F6\u95F4"}),t(V,{label:"\u64CD\u4F5C"},{default:o(a=>[t(d,{size:"small",type:"danger",onClick:De=>l.handleDelete(a.row.id)},{default:o(()=>[fe]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),C("div",be,[t(G,{background:"",layout:"total, prev, pager, next","current-page":l.query.page_index,"page-size":l.query.page_size,total:l.pageTotal,onCurrentChange:l.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),B(" \u65B0\u589E\u5F39\u51FA\u6846 "),t(O,{title:"\u65B0\u589E\u7248\u672C",modelValue:l.addVisible,"onUpdate:modelValue":e[8]||(e[8]=a=>l.addVisible=a),width:"60%"},{footer:o(()=>[C("span",ve,[t(d,{onClick:e[7]||(e[7]=a=>l.addVisible=!1)},{default:o(()=>[he]),_:1}),t(d,{type:"primary",onClick:l.saveAdd},{default:o(()=>[ge]),_:1},8,["onClick"])])]),default:o(()=>[t(K,{"label-width":"110px"},{default:o(()=>[t(D,{label:"\u6E38\u620F\u9009\u62E9"},{default:o(()=>[t(v,{style:{width:"18%"},modelValue:l.formAdd.add_product_name_selected,"onUpdate:modelValue":e[2]||(e[2]=a=>l.formAdd.add_product_name_selected=a),placeholder:"\u6E38\u620F\u9009\u62E9",class:"m-2"},{default:o(()=>[(f(!0),y(x,null,A(l.addproductoptions,a=>(f(),M(h,{key:a.value,label:a.label_name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(D,{label:"\u6E20\u9053\u9009\u62E9"},{default:o(()=>[t(v,{ref:"add_channel_name_selected_label",style:{width:"18%"},modelValue:l.formAdd.add_channel_name_selected,"onUpdate:modelValue":e[3]||(e[3]=a=>l.formAdd.add_channel_name_selected=a),placeholder:"\u6E38\u620F\u9009\u62E9",class:"m-2"},{default:o(()=>[(f(!0),y(x,null,A(l.addchanneloptions,a=>(f(),M(h,{key:a.value,label:a.label_name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(D,{label:"\u540E\u53F0\u7248\u672C"},{default:o(()=>[t(P,{style:{width:"160px"},modelValue:l.formAdd.add_versions_b,"onUpdate:modelValue":e[4]||(e[4]=a=>l.formAdd.add_versions_b=a)},null,8,["modelValue"])]),_:1}),t(D,{label:"\u524D\u7AEF\u7248\u672C"},{default:o(()=>[t(P,{style:{width:"160px"},modelValue:l.formAdd.add_versions_c,"onUpdate:modelValue":e[5]||(e[5]=a=>l.formAdd.add_versions_c=a)},null,8,["modelValue"])]),_:1}),t(D,{label:"\u9884\u671F\u4E0A\u7EBF\u65F6\u95F4",prop:"uptime"},{default:o(()=>[t(J,{modelValue:l.formAdd.add_uptime,"onUpdate:modelValue":e[6]||(e[6]=a=>l.formAdd.add_uptime=a),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const xe=Q(se,[["render",Ve],["__scopeId","data-v-c078e7e0"],["__file","/Users/apple/Desktop/project-b github/project-b/src/views/VersionTable.vue"]]);export{xe as default};
