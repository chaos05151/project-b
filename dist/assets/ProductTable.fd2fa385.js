import{_ as X,f as N,g as u,o as C,c as B,a as x,b as t,w as o,bw as m,bx as Y,e as p,r as c,U as I,aJ as M,a4 as q,b6 as V,bq as k}from"./index.06cbec42.js";import{f as Z,a as $,b as ee,e as ae,d as te,c as le,g as oe,h as de}from"./product.2a668420.js";import"./request.ab0faebb.js";const r=N({page_index:1,page_size:10}),G=u(0),D=u(""),z=u(""),T=u(""),A=u(0),H=u([]),ne=u(""),F=u("\u9879\u76EE");let K=u([]),Q=u([]),R=u([]);const _=d=>{Z(d).then(a=>{a.status==200?(G.value=a.data.total_count,H.value=a.data.lists):m.error(a==null?void 0:a.message)}).catch(()=>{})},P=()=>{$().then(d=>{K.value=d.data,R.value=d.data}).catch(()=>{})},re=d=>{ee({main_product_id:d}).then(v=>{Q.value=v.data}).catch(()=>{})},ce=(d,a)=>{ae(d,a).then(v=>{v.status==200?(m.success("\u4FEE\u6539\u6210\u529F"),_(r),P()):(m.error("\u4FEE\u6539\u5931\u8D25"),_(r))}).catch(()=>{m.error("\u4FEE\u6539\u5931\u8D25"),_(r)})},_e=d=>{te(d).then(a=>{a.status==200?(m.success("\u5220\u9664\u6210\u529F"),_(r),P()):a.status==-1&&m.error("\u8BF7\u5148\u5220\u9664\u5BF9\u5E94\u7684\u5E94\u7528\uFF01")})},ue=d=>{le(d).then(a=>{a.status==200&&(m.success("\u5220\u9664\u6210\u529F"),_(r),P())})},ie=d=>{oe(d).then(a=>{a.status==200&&(m.success("\u65B0\u589E\u9879\u76EE\u6210\u529F"),_(r),P())})},se=(d,a)=>{de(d,a).then(v=>{v.status==200&&(m.success("\u65B0\u589E\u5E94\u7528\u6210\u529F"),_(r),P())})},me={name:"basetable",setup(){D.value="",T.value="",_(r),P();const d=()=>{r.pageIndex=1,_(r)},a=n=>{r.page_index=n,S()},v=(n,i)=>{Y.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{i>""?ue(i):_e(n)}).catch(()=>{})},e=u(!1),U=u(!1);let h=N({id:"",main_product_id:"",product_id:"",main_product_name:"",product_name:"",package_name:""}),b=N({main_product_name:"",product_name:"",package_name:""});const L=(n,i)=>{A.value=u(""),i.product_id==""?A.value=0:A.value=1,Object.keys(h).forEach(s=>{h[s]=i[s]}),e.value=!0},y=()=>{U.value=!0},w=()=>{e.value=!1,h.main_product_name;const n={package_name:h.package_name};A.value==1&&ce(h.product_id,n)},f=()=>{U.value=!1;let n={main_product_name:b.main_product_name};if(F.value=="\u9879\u76EE")if(b.main_product_name)ie(n);else{m.error("\u6E38\u620F\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}else if(b.product_name&&b.package_name&&z.value)n={product_name:b.product_name,package_name:b.package_name},se(z.value,n);else{m.error("\u6E38\u620F\u540D\u548C\u5305\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}},g=()=>{if(T.value="",D.value==-1)_(r);else{const n={main_product_id:D.value,...r};_(n),re(D.value)}},S=()=>{if(D.value==-1)_(r);else if(T.value==-1){const n={main_product_id:D.value,...r};_(n)}else{const n={product_id:T.value,...r};_(n)}};return{query:r,tableData:H,pageTotal:G,editVisible:e,addVisible:U,form:h,formAdd:b,handleSearch:d,handlePageChange:a,handleDelete:v,handleEdit:L,handleAdd:y,saveEdit:w,saveAdd:f,product_type:F,options:K,suboptions:Q,addoptions:R,main_product_name_selected:D,add_main_product_name_selected:z,product_name_selected:T,main_product_value_select:ne,check_main_product_name:A,getProductAndDataList:g,getDataById:S}},methods:{riskManage(d){this.$router.push({name:"productrisk",params:{data:JSON.stringify(d)}})}}},pe={class:"crumbs"},be=p("\u98CE\u63A7\u7CFB\u7EDF"),fe=p("\u4EA7\u54C1\u7BA1\u7406"),ge={class:"container"},ve={class:"handle-box"},he=p("\xA0\xA0 "),Ve=p("\u65B0\u589E\u9879\u76EE"),ke=p("\u98CE\u63A7\u914D\u7F6E "),ye=p("\u7F16\u8F91 "),Ce=p("\u5220\u9664 "),De={class:"pagination"},xe={class:"dialog-footer"},Pe=p("\u53D6 \u6D88"),we=p("\u786E \u5B9A"),Te={class:"dialog-footer"},Ae=p("\u53D6 \u6D88"),Ue=p("\u786E \u5B9A");function Se(d,a,v,e,U,h){const b=c("el-breadcrumb-item"),L=c("el-breadcrumb"),y=c("el-option"),w=c("el-select"),f=c("el-button"),g=c("el-table-column"),S=c("el-table"),n=c("el-pagination"),i=c("el-input"),s=c("el-form-item"),E=c("el-form"),J=c("el-dialog"),O=c("el-radio"),W=c("el-radio-group");return C(),B("div",null,[x("div",pe,[t(L,{separator:"/"},{default:o(()=>[t(b,null,{default:o(()=>[be]),_:1}),t(b,null,{default:o(()=>[fe]),_:1})]),_:1})]),x("div",ge,[x("div",ve,[t(w,{modelValue:e.main_product_name_selected,"onUpdate:modelValue":a[0]||(a[0]=l=>e.main_product_name_selected=l),placeholder:"\u9879\u76EE\u540D\u79F0",class:"m-2",onChange:e.getProductAndDataList},{default:o(()=>[t(y,{label:"\u5168\u90E8",value:"-1"}),(C(!0),B(I,null,M(e.options,l=>(C(),q(y,{key:l.id,label:l.main_product_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(w,{modelValue:e.product_name_selected,"onUpdate:modelValue":a[1]||(a[1]=l=>e.product_name_selected=l),placeholder:"\u5E94\u7528\u540D\u79F0",class:"m-2",onChange:e.getDataById},{default:o(()=>[t(y,{label:"\u5168\u90E8",value:"-1"}),(C(!0),B(I,null,M(e.suboptions,l=>(C(),q(y,{key:l.product_id,label:l.product_name,value:l.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),he,t(f,{type:"primary",onClick:e.handleAdd},{default:o(()=>[Ve]),_:1},8,["onClick"])]),t(S,{data:e.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:o(()=>[t(g,{prop:"main_product_id",sortable:"",label:"\u9879\u76EEID"}),t(g,{prop:"main_product_name",label:"\u9879\u76EE\u540D\u79F0"}),t(g,{prop:"product_id",label:"\u5E94\u7528ID"}),t(g,{prop:"product_name",label:"\u5E94\u7528\u540D\u79F0"}),t(g,{prop:"md5key",label:"md5key"}),t(g,{prop:"package_name",label:"\u5305\u540D"}),t(g,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:o(l=>[V(t(f,{type:"text",icon:"el-icon-link",onClick:j=>h.riskManage(l.row)},{default:o(()=>[ke]),_:2},1032,["onClick"]),[[k,l.row.product_id>""]]),V(t(f,{type:"text",icon:"el-icon-edit",onClick:j=>e.handleEdit(l.row.id,l.row)},{default:o(()=>[ye]),_:2},1032,["onClick"]),[[k,l.row.product_id>""]]),t(f,{type:"text",icon:"el-icon-delete",class:"red",onClick:j=>e.handleDelete(l.row.main_product_id,l.row.product_id)},{default:o(()=>[Ce]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),x("div",De,[t(n,{background:"",layout:"total, prev, pager, next","current-page":e.query.page_index,"page-size":e.query.page_size,total:e.pageTotal,onCurrentChange:e.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),t(J,{title:"\u7F16\u8F91",modelValue:e.editVisible,"onUpdate:modelValue":a[6]||(a[6]=l=>e.editVisible=l),width:"60%"},{footer:o(()=>[x("span",xe,[t(f,{onClick:a[5]||(a[5]=l=>e.editVisible=!1)},{default:o(()=>[Pe]),_:1}),t(f,{type:"primary",onClick:e.saveEdit},{default:o(()=>[we]),_:1},8,["onClick"])])]),default:o(()=>[V(t(E,{"label-width":"110px"},{default:o(()=>[t(s,{label:"\u9879\u76EE\u540D"},{default:o(()=>[t(i,{modelValue:e.form.main_product_name,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.main_product_name=l)},null,8,["modelValue"])]),_:1})]),_:1},512),[[k,e.check_main_product_name==0]]),V(t(E,{"label-width":"110px"},{default:o(()=>[t(s,{label:"\u5E94\u7528\u540D"},{default:o(()=>[t(i,{disabled:"",modelValue:e.form.product_name,"onUpdate:modelValue":a[3]||(a[3]=l=>e.form.product_name=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5305\u540D"},{default:o(()=>[t(i,{modelValue:e.form.package_name,"onUpdate:modelValue":a[4]||(a[4]=l=>e.form.package_name=l)},null,8,["modelValue"])]),_:1})]),_:1},512),[[k,e.check_main_product_name==1]])]),_:1},8,["modelValue"]),t(J,{title:"\u65B0\u589E\u9879\u76EE",modelValue:e.addVisible,"onUpdate:modelValue":a[13]||(a[13]=l=>e.addVisible=l),width:"60%"},{footer:o(()=>[x("span",Te,[t(f,{onClick:a[12]||(a[12]=l=>e.addVisible=!1)},{default:o(()=>[Ae]),_:1}),t(f,{type:"primary",onClick:e.saveAdd},{default:o(()=>[Ue]),_:1},8,["onClick"])])]),default:o(()=>[t(E,{"label-width":"70px"},{default:o(()=>[t(s,{label:"\u6E38\u620F\u7C7B\u578B",prop:"resource"},{default:o(()=>[t(W,{modelValue:e.product_type,"onUpdate:modelValue":a[7]||(a[7]=l=>e.product_type=l)},{default:o(()=>[t(O,{label:"\u9879\u76EE"}),t(O,{label:"\u5E94\u7528"})]),_:1},8,["modelValue"])]),_:1}),V(t(s,{label:"\u9879\u76EE",prop:"resource"},{default:o(()=>[t(w,{modelValue:e.add_main_product_name_selected,"onUpdate:modelValue":a[8]||(a[8]=l=>e.add_main_product_name_selected=l),placeholder:"\u9879\u76EE",class:"m-2"},{default:o(()=>[(C(!0),B(I,null,M(e.addoptions,l=>(C(),q(y,{key:l.id,label:l.main_product_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[k,e.product_type=="\u5E94\u7528"]]),V(t(s,{label:"\u9879\u76EE"},{default:o(()=>[t(i,{modelValue:e.formAdd.main_product_name,"onUpdate:modelValue":a[9]||(a[9]=l=>e.formAdd.main_product_name=l)},null,8,["modelValue"])]),_:1},512),[[k,e.product_type=="\u9879\u76EE"]]),V(t(s,{label:"\u5E94\u7528"},{default:o(()=>[t(i,{modelValue:e.formAdd.product_name,"onUpdate:modelValue":a[10]||(a[10]=l=>e.formAdd.product_name=l)},null,8,["modelValue"])]),_:1},512),[[k,e.product_type=="\u5E94\u7528"]]),V(t(s,{label:"\u5305\u540D"},{default:o(()=>[t(i,{modelValue:e.formAdd.package_name,"onUpdate:modelValue":a[11]||(a[11]=l=>e.formAdd.package_name=l)},null,8,["modelValue"])]),_:1},512),[[k,e.product_type=="\u5E94\u7528"]])]),_:1})]),_:1},8,["modelValue"])])}const Ie=X(me,[["render",Se],["__scopeId","data-v-4548bc28"]]);export{Ie as default};
