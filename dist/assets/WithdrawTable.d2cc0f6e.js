import{_ as ha,g as r,f as A,u as ga,r as _,o as g,c as L,a as D,b as t,w as l,J as F,K as M,G as Z,e as w,E as y,F as N,H as P,I as B,D as c,t as aa}from"./index.306d4242.js";import{a as va,b as Va}from"./product.3d573cd4.js";import{w as ya,j as ka,k as xa}from"./user.10c4ce5d.js";import"./request.70c27150.js";const Ua={class:"crumbs"},Ca=w("\u98CE\u63A7\u7CFB\u7EDF"),Da=w("\u63D0\u73B0\u914D\u7F6E"),za={class:"container"},Ea={class:"handle-box"},La=w("\xA0\xA0 "),Ta=w(" \u9ED8\u8BA4\u89C4\u5219"),$a=w("\u63D0\u73B0\u8BBE\u7F6E"),Aa=w("\u4EBA\u5DE5\u5BA1\u6838 "),Na=w("\u63D0\u73B0\u8BBE\u7F6E "),Pa={class:"pagination"},Ba={class:"dialog-footer"},Ia=w("\u53D6 \u6D88"),Ra=w("\u786E \u5B9A"),Wa=w("\u6240\u6709\u9879\u76EE"),ja=w("\u6307\u5B9A\u9879\u76EE"),Sa={class:"dialog-footer"},Fa=w("\u53D6 \u6D88"),Ma=w("\u786E \u5B9A"),qa={__name:"WithdrawTable",setup(Ga){const i=r(""),h=r(""),b=A({page_index:1,page_size:10}),q=r(0);r(""),r("");const n=A({}),u=A({}),I=r(null),G=r(!1),R=r(!1),H=r([]);r(""),r("\u9879\u76EE");let W=r([]),k=r([]),ta=r([]);r();const v=(o,e)=>{ya(o).then(d=>{d.status==200?(H.value=d.data.lists.filter(m=>m.config_type!=0).map(m=>({...m,biomass_login_status:m.biomass_login_status==1?"\u5141\u8BB8":"\u7981\u6B62",user_withdrawal_status:m.user_withdrawal_status==1?"\u5141\u8BB8":"\u7981\u6B62"})),q.value=e==1?d.data.total_count:d.data.total_count-1,n.value=d.data.lists.filter(m=>m.config_type==0)[0],n.value.config_type==0&&(G.value=!0,n.user_withdrawal_status=n.value.user_withdrawal_status==1,n.biomass_login_status=n.value.biomass_login_status==1,n.withdrawal_audit_standard=n.value.withdrawal_audit_standard,n.withdrawal_count=n.value.withdrawal_count)):y.error(d==null?void 0:d.message)}).catch(()=>{})},ea=()=>{va().then(o=>{W.value=o.data,ta.value=o.data}).catch(()=>{})},la=o=>{Va({main_product_id:o}).then(d=>{k.value=d.data}).catch(()=>{})},J=o=>{ka(o).then(e=>{e.status==200?(y.success("\u6DFB\u52A0\u63D0\u73B0\u914D\u7F6E\u6210\u529F"),v(b)):e.status==-1&&y.error("\u6B64\u6E38\u620F\u914D\u7F6E\u5DF2\u5B58\u5728\uFF01")})},oa=(o,e)=>{xa(o,e).then(d=>{d.status==200&&(y.success("\u4FEE\u6539\u63D0\u73B0\u914D\u7F6E\u6210\u529F"),v(b))})},K=o=>o?/^\d+(\.{0,1}\d+){0,1}$/.test(o)?!0:(y.error("\u8BF7\u5148\u9009\u62E9\u4EA7\u54C1\uFF01"),!1):(y.error("\u8BF7\u9009\u62E9\u6E38\u620F\uFF01"),!1),T=o=>{if(o)return/^\d+(\.{0,1}\d+){0,1}$/.test(o)?!0:(y.error("\u8BF7\u8F93\u5165\u6570\u5B57\uFF01"),!1)};i.value="",h.value="";const O={};v(b),ea();const da=ga(),ua=(o,e,d,m)=>{da.push({name:"withdrawdetail",params:{main_product_name:o,main_product_id:e,product_id:m,product_name:d}})};let s=A({id:"",main_product_id:"",product_id:"",main_product_name:"",product_name:"",user_withdrawal_status:"",biomass_login_status:"",withdrawal_audit_standard:"",withdrawal_count:""});const z=r(!1),E=r(!1),sa=(o,e)=>{Object.keys(s).forEach(d=>{d=="user_withdrawal_status"||d=="biomass_login_status"?s[d]=e[d]=="\u5141\u8BB8":s[d]=e[d]}),z.value=!0},na=()=>{E.value=!0},ra=o=>{b.page_index=o,j()},_a=()=>{if(z.value=!1,s.withdrawal_audit_standard&&!T(s.withdrawal_audit_standard)||s.withdrawal_count&&!T(s.withdrawal_count))return;const o={user_withdrawal_status:s.user_withdrawal_status?1:0,biomass_login_status:s.biomass_login_status?1:0,withdrawal_audit_standard:s.withdrawal_audit_standard,withdrawal_count:s.withdrawal_count};oa(s.id,o)},ia=()=>{if(E.value=!1,!(u.withdrawal_audit_standard&&!T(u.withdrawal_audit_standard))&&!(u.withdrawal_count&&!T(u.withdrawal_count)))if(u.config_type)if(u.config_type==1){if(!K(i.value))return;h.value.forEach(function(o){if(!K(o))return;const e=k.value.filter(m=>m.product_id==o),d={config_type:1,main_product_id:e[0].main_product_id,main_product_name:e[0].main_product_name,product_id:e[0].product_id,product_name:e[0].product_name,user_withdrawal_status:u.user_withdrawal_status?1:0,biomass_login_status:u.biomass_login_status?1:0,withdrawal_audit_standard:u.withdrawal_audit_standard,withdrawal_count:u.withdrawal_count};J(d)}),i.value="",h.value="",k.value=""}else{const o={config_type:0,user_withdrawal_status:u.user_withdrawal_status?1:0,biomass_login_status:u.biomass_login_status?1:0,withdrawal_audit_standard:u.withdrawal_audit_standard,withdrawal_count:u.withdrawal_count};J(o)}else{y.error("\u5FC5\u987B\u9009\u62E9\u914D\u7F6E\u7C7B\u578B\uFF01");return}},j=()=>{if(console.log(i.value),h.value="",k.value="",i.value==-1||!i.value)console.log("1"),v(b);else{const o={main_product_id:i.value,...b};v(o,1),la(i.value)}},pa=()=>{if(i.value==-1||!i.value)v(b);else if(h.value==-1){const o={main_product_id:i.value,...b};v(o,1)}else{const o={product_id:h.value,...b};v(o,1)}};return(o,e)=>{const d=_("el-breadcrumb-item"),m=_("el-breadcrumb"),x=_("el-option"),$=_("el-select"),V=_("el-button"),U=_("el-switch"),p=_("el-form-item"),C=_("el-input"),S=_("el-form"),wa=_("el-drawer"),f=_("el-table-column"),Q=_("el-tag"),ma=_("el-table"),ca=_("el-pagination"),X=_("el-dialog"),Y=_("el-radio"),fa=_("el-radio-group");return g(),L("div",null,[D("div",Ua,[t(m,{separator:"/"},{default:l(()=>[t(d,null,{default:l(()=>[Ca]),_:1}),t(d,null,{default:l(()=>[Da]),_:1})]),_:1})]),D("div",za,[D("div",Ea,[t($,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),placeholder:"\u9879\u76EE\u540D\u79F0",class:"m-2",onChange:j},{default:l(()=>[t(x,{label:"\u5168\u90E8",value:"-1"}),(g(!0),L(N,null,P(c(W),a=>(g(),B(x,{key:a.id,label:a.main_product_name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t($,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=a=>h.value=a),placeholder:"\u5E94\u7528\u540D\u79F0",class:"m-2",onChange:pa},{default:l(()=>[t(x,{label:"\u5168\u90E8",value:"-1"}),(g(!0),L(N,null,P(c(k),a=>(g(),B(x,{key:a.product_id,label:a.product_name,value:a.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),La,F(t(V,{type:"primary",onClick:e[2]||(e[2]=a=>R.value=!0)},{default:l(()=>[Ta]),_:1},512),[[M,G.value]]),t(V,{type:"primary",onClick:na},{default:l(()=>[$a]),_:1}),t(wa,{modelValue:R.value,"onUpdate:modelValue":e[7]||(e[7]=a=>R.value=a),title:"\u63D0\u73B0\u9ED8\u8BA4\u89C4\u5219\u4FE1\u606F\uFF1A",direction:"rtl",size:"50%"},{default:l(()=>[t(S,{ref_key:"formRef",ref:I,model:n,"label-width":"280px"},{default:l(()=>[t(p,{label:"\u662F\u5426\u5141\u8BB8\u6240\u6709\u7528\u6237\u63D0\u73B0",prop:"user_withdrawal_status"},{default:l(()=>[t(U,{disabled:"",modelValue:n.user_withdrawal_status,"onUpdate:modelValue":e[3]||(e[3]=a=>n.user_withdrawal_status=a)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u662F\u5426\u5141\u8BB8\u81EA\u7136\u91CF\u767B\u5F55",prop:"biomass_login_status"},{default:l(()=>[t(U,{disabled:"",modelValue:n.biomass_login_status,"onUpdate:modelValue":e[4]||(e[4]=a=>n.biomass_login_status=a)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u63D0\u73B0\u5BA1\u6838\u6807\u51C6",prop:"withdrawal_audit_standard"},{default:l(()=>[t(C,{disabled:"",style:{width:"150px"},modelValue:n.withdrawal_audit_standard,"onUpdate:modelValue":e[5]||(e[5]=a=>n.withdrawal_audit_standard=a)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u5355\u65E5\u63D0\u73B0\u6B21\u6570",prop:"withdrawal_count"},{default:l(()=>[t(C,{disabled:"",style:{width:"150px"},modelValue:n.withdrawal_count,"onUpdate:modelValue":e[6]||(e[6]=a=>n.withdrawal_count=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),t(ma,{data:H.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:l(()=>[t(f,{prop:"main_product_id",label:"\u9879\u76EEID"}),t(f,{prop:"main_product_name",label:"\u9879\u76EE\u540D\u79F0"}),t(f,{prop:"product_id",label:"\u5E94\u7528ID"}),t(f,{prop:"product_name",label:"\u5E94\u7528\u540D\u79F0"}),t(f,{prop:"unaudit_orders_count",label:"\u672A\u5BA1\u6838\u8BA2\u5355\u6570"}),t(f,{prop:"unaudit_reward_sum",label:"\u672A\u5BA1\u6838\u603B\u91D1\u989D"}),t(f,{prop:"apply_users_count",label:"\u7533\u8BF7\u4EBA\u6570"}),t(f,{prop:"user_withdrawal_status",label:"\u7528\u6237\u63D0\u73B0"},{default:l(a=>[t(Q,{type:a.row.user_withdrawal_status==="\u5141\u8BB8"?"":a.row.user_withdrawal_status==="\u7981\u6B62"?"danger":""},{default:l(()=>[w(aa(a.row.user_withdrawal_status),1)]),_:2},1032,["type"])]),_:1}),t(f,{prop:"biomass_login_status",label:"\u81EA\u7136\u91CF\u767B\u5F55"},{default:l(a=>[t(Q,{type:a.row.biomass_login_status==="\u5141\u8BB8"?"":a.row.biomass_login_status==="\u7981\u6B62"?"danger":""},{default:l(()=>[w(aa(a.row.biomass_login_status),1)]),_:2},1032,["type"])]),_:1}),t(f,{prop:"withdrawal_audit_standard",label:"\u63D0\u73B0\u5BA1\u6838\u6807\u51C6"}),t(f,{prop:"withdrawal_count",label:"\u5355\u7528\u6237\u5F53\u5929\u63D0\u73B0\u6B21\u6570"}),t(f,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:l(a=>[t(V,{type:"text",icon:"el-icon-link",onClick:ba=>ua(a.row.main_product_name,a.row.main_product_id,a.row.product_name,a.row.product_id)},{default:l(()=>[Aa]),_:2},1032,["onClick"]),t(V,{type:"text",icon:"el-icon-edit",onClick:ba=>sa(a.row.id,a.row)},{default:l(()=>[Na]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),D("div",Pa,[t(ca,{background:"",layout:"total, prev, pager, next","current-page":b.page_index,"page-size":b.page_size,total:q.value,onCurrentChange:ra},null,8,["current-page","page-size","total"])])]),Z(" \u7F16\u8F91\u5F39\u51FA\u6846 "),t(X,{title:"\u7F16\u8F91\u63D0\u73B0\u914D\u7F6E",modelValue:z.value,"onUpdate:modelValue":e[13]||(e[13]=a=>z.value=a),width:"60%"},{footer:l(()=>[D("span",Ba,[t(V,{onClick:e[12]||(e[12]=a=>z.value=!1)},{default:l(()=>[Ia]),_:1}),t(V,{type:"primary",onClick:_a},{default:l(()=>[Ra]),_:1})])]),default:l(()=>[t(S,{ref_key:"formRef",ref:I,rules:O,model:c(s),"label-width":"280px"},{default:l(()=>[t(p,{label:"\u662F\u5426\u5141\u8BB8\u6240\u6709\u7528\u6237\u63D0\u73B0",prop:"user_withdrawal_status"},{default:l(()=>[t(U,{modelValue:c(s).user_withdrawal_status,"onUpdate:modelValue":e[8]||(e[8]=a=>c(s).user_withdrawal_status=a)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u662F\u5426\u5141\u8BB8\u81EA\u7136\u91CF\u767B\u5F55",prop:"biomass_login_status"},{default:l(()=>[t(U,{modelValue:c(s).biomass_login_status,"onUpdate:modelValue":e[9]||(e[9]=a=>c(s).biomass_login_status=a)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u63D0\u73B0\u5BA1\u6838\u6807\u51C6",prop:"withdrawal_audit_standard"},{default:l(()=>[t(C,{style:{width:"150px"},modelValue:c(s).withdrawal_audit_standard,"onUpdate:modelValue":e[10]||(e[10]=a=>c(s).withdrawal_audit_standard=a)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u5355\u65E5\u63D0\u73B0\u6B21\u6570",prop:"withdrawal_count"},{default:l(()=>[t(C,{style:{width:"150px"},modelValue:c(s).withdrawal_count,"onUpdate:modelValue":e[11]||(e[11]=a=>c(s).withdrawal_count=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),Z(" \u65B0\u589E\u5F39\u51FA\u6846 "),t(X,{title:"\u65B0\u589E\u63D0\u73B0\u914D\u7F6E",modelValue:E.value,"onUpdate:modelValue":e[22]||(e[22]=a=>E.value=a),width:"60%"},{footer:l(()=>[D("span",Sa,[t(V,{onClick:e[21]||(e[21]=a=>E.value=!1)},{default:l(()=>[Fa]),_:1}),t(V,{type:"primary",onClick:ia},{default:l(()=>[Ma]),_:1})])]),default:l(()=>[t(S,{ref_key:"formRef",ref:I,rules:O,model:u,"label-width":"280px"},{default:l(()=>[t(p,{label:"\u914D\u7F6E\u7C7B\u578B",prop:"config_type"},{default:l(()=>[t(fa,{modelValue:u.config_type,"onUpdate:modelValue":e[14]||(e[14]=a=>u.config_type=a)},{default:l(()=>[t(Y,{label:"0"},{default:l(()=>[Wa]),_:1}),t(Y,{label:"1"},{default:l(()=>[ja]),_:1})]),_:1},8,["modelValue"])]),_:1}),F(t(p,{label:"\u9879\u76EE",prop:"main_product_name_selected"},{default:l(()=>[t($,{modelValue:i.value,"onUpdate:modelValue":e[15]||(e[15]=a=>i.value=a),placeholder:"\u9879\u76EE",class:"m-2",onChange:j},{default:l(()=>[(g(!0),L(N,null,P(c(W),a=>(g(),B(x,{key:a.id,label:a.main_product_name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[M,u.config_type==1]]),F(t(p,{label:"\u5E94\u7528",prop:"product_name_selected"},{default:l(()=>[t($,{multiple:"",modelValue:h.value,"onUpdate:modelValue":e[16]||(e[16]=a=>h.value=a),placeholder:"\u5E94\u7528",class:"m-2"},{default:l(()=>[(g(!0),L(N,null,P(c(k),a=>(g(),B(x,{key:a.product_id,label:a.product_name,value:a.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[M,u.config_type==1]]),t(p,{label:"\u662F\u5426\u5141\u8BB8\u6240\u6709\u7528\u6237\u63D0\u73B0",prop:"user_withdrawal_status"},{default:l(()=>[t(U,{modelValue:u.user_withdrawal_status,"onUpdate:modelValue":e[17]||(e[17]=a=>u.user_withdrawal_status=a)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u662F\u5426\u5141\u8BB8\u81EA\u7136\u91CF\u767B\u5F55",prop:"biomass_login_status"},{default:l(()=>[t(U,{modelValue:u.biomass_login_status,"onUpdate:modelValue":e[18]||(e[18]=a=>u.biomass_login_status=a)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u63D0\u73B0\u5BA1\u6838\u6807\u51C6",prop:"withdrawal_audit_standard"},{default:l(()=>[t(C,{style:{width:"150px"},modelValue:u.withdrawal_audit_standard,"onUpdate:modelValue":e[19]||(e[19]=a=>u.withdrawal_audit_standard=a)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u5355\u65E5\u63D0\u73B0\u6B21\u6570",prop:"withdrawal_count"},{default:l(()=>[t(C,{style:{width:"150px"},modelValue:u.withdrawal_count,"onUpdate:modelValue":e[20]||(e[20]=a=>u.withdrawal_count=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Qa=ha(qa,[["__scopeId","data-v-fb7e65cc"],["__file","/Users/apple/Desktop/project-b github/project-b/src/views/WithdrawTable.vue"]]);export{Qa as default};
