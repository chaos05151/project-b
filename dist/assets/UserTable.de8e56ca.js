import{ac as Q,o as w,a4 as V,b as t,_ as X,g as u,f as Z,c as B,a as L,w as c,bw as C,bx as q,r as v,U as I,aJ as N,b6 as A,bq as F,e as b}from"./index.d75263b6.js";import{a as $,b as ee}from"./product.98c79de9.js";import{f as O,a as ae,r as te}from"./user.ce444866.js";import{e as le}from"./export2excel.a0c92898.js";import{h as P}from"./moment.9709ab41.js";import"./request.4064096f.js";var E=Q({name:"Search"});const oe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ne=t("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1);function re(s,a,_,o,T,f){return w(),V("svg",oe,[ne])}E.render=re;E.__file="packages/components/Search.vue";const se=E;const h=u(""),m=u(""),r=u(""),de=u(0),R=u([]),z=u([]),y=u(0),x=u(),Y=u(""),ie=u(""),ce=u("\u9879\u76EE"),D=u({}),n=Z({keywords:"",page_index:1,page_size:10});let W=u([]),j=u([]),ue=u([{value:"-1",label:"\u5168\u90E8"},{value:"1",label:"\u5DF2\u63D0\u73B0\u7528\u6237"},{value:"0",label:"\u672A\u63D0\u73B0\u7528\u6237"}]);const i=s=>{O(s).then(a=>{a.status==200?(R.value=a.data.lists.map(_=>({..._,is_buy:_.is_buy==1?"\u662F":"\u5426",created_at:P(_.created_at).format("YYYY-MM-DD HH:mm:ss")})),y.value=a.data.total_count,D.value=JSON.parse(JSON.stringify(s)),console.log(D.value).catch(()=>{})):C.error(a==null?void 0:a.message)}).catch(()=>{})},J=()=>{h.value="",m.value="",r.value="",Y.value="",n.keywords=""},_e=()=>{$().then(s=>{W.value=s.data}).catch(()=>{})},pe=s=>{ee({main_product_id:s}).then(_=>{j.value=_.data}).catch(()=>{})},me=s=>{ae(s).then(a=>{a.status==200&&(C.success("\u52A0\u5165\u9ED1\u540D\u5355\u6210\u529F\uFF01"),i(n))}).catch(()=>{})},ve=s=>{te(s).then(a=>{a.status==200&&(C.success("\u79FB\u51FA\u9ED1\u540D\u5355\u6210\u529F\uFF01"),i(n))}).catch(()=>{})},he=s=>{if(s)return!!/^\d+(\.{0,1}\d+){0,1}$/.test(s)},be=()=>{console.log(x.value),x.value!=null?(n.start_date=x.value[0],n.end_date=x.value[1]):(delete n.start_date,delete n.end_date),console.log(n),i(n)},we={name:"basetable",setup(){J(),_e(),i(n);const s=e=>{q.confirm("\u786E\u5B9A\u52A0\u5165\u9ED1\u540D\u5355\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{me(e)}).catch(()=>{})},a=e=>{q.confirm("\u786E\u5B9A\u79FB\u51FA\u9ED1\u540D\u5355\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{ve(e)}).catch(()=>{})},_=()=>{if(h.value==-1)if(m.value==-1)if(r.value&&r.value>=0){const e={withdraw_user:r.value,...n};i(e)}else i(n);else if(m.value&&m.value>0)if(r.value&&r.value>=0){const e={product_id:m.value,withdraw_user:r.value,...n};i(e)}else{const e={product_id:m.value,...n};i(e)}else if(r.value&&r.value>=0){const e={withdraw_user:r.value,...n};i(e)}else i(n);else if(h.value&&h.value>0){if(m.value==-1)if(r.value&&r.value>=0){const e={main_product_id:h.value,withdraw_user:r.value,...n};i(e)}else{const e={main_product_id:h.value,...n};i(e)}else if(m.value&&m.value>0)if(r.value&&r.value>=0){const e={product_id:m.value,withdraw_user:r.value,...n};i(e)}else{const e={product_id:m.value,...n};i(e)}else if(r.value&&r.value>=0){const e={main_product_id:h.value,withdraw_user:r.value,...n};i(e)}else{const e={main_product_id:h.value,...n};i(e)}pe(h.value)}else if(r.value&&r.value>=0){const e={withdraw_user:r.value,...n};i(e)}else i(n)};return{tableData:R,tableExportData:z,removeBlackList:a,addBlackList:s,product_type:ce,Search:se,checkNonnegative:he,searchByIdNickNameIpMobile:()=>{Y.value?(n.keywords=Y.value,_()):(n.keywords="",_())},idnicknamephonemobile:Y,options:W,suboptions:j,useroptions:ue,main_product_name_selected:h,product_name_selected:m,main_product_value_select:ie,check_main_product_name:de,getProductAndDataList:_,getDataById:()=>{_()},getWithdrawUser:()=>{_()},withdraw_user_selected:r,handlePageChange:e=>{n.page_index=e,_()},query:n,pageTotal:y,clearOptions:J,dataExport:D,dateRange:x,exportExcel:()=>{D.value.page_size=y.value?y.value<=1e4?y.value:1e4:10,O(D.value).then(e=>{if(e.status==200){z.value=e.data.lists.map(d=>({...d,is_buy:d.is_buy==1?"\u662F":"\u5426",created_at:P(d.created_at).format("YYYY-MM-DD HH:mm:ss")}));const k=["\u9879\u76EE","\u5E94\u7528","\u7528\u6237id","\u6570\u76DFid","\u662F\u5426\u4E70\u91CF\u7528\u6237","\u7528\u6237\u540D","\u624B\u673A\u53F7","\u7D2F\u79EF\u4F63\u91D1","\u5DF2\u63D0\u73B0\u4F63\u91D1","\u5DF2\u63D0\u73B0\u6B21\u6570","\u6CE8\u518Cip","ip\u5730\u5740","\u6CE8\u518C\u65F6\u95F4"],U=z.value.map(d=>({main_product_name:d.main_product_name,product_name:d.product_name,id:d.id,oaid:d.oaid,is_buy:d.is_buy==1?"\u662F":"\u5426",nickname:d.nickname,tel:d.tel,reward:d.reward,withdraw_reward:d.withdraw_reward,withdraw_times:d.withdraw_times,ip:d.ip,ip_address:d.ip_address,created_at:P(d.created_at).format("YYYY-MM-DD HH:mm:ss")}));le(U,"UserTable",k,"UserTable")}else e.message?C.error(e.message):C.error("\u540E\u7AEFapi\u63A5\u53E3\u5F02\u5E38\uFF01")})},handleDate:be}},methods:{withDraw(){this.$router.push("/withdraw")},userDetail(s){this.$router.push({name:"userdetail",params:{wechat_user_id:s}})},blackList(){this.$router.push("/blacklist")},userFeedback(){this.$router.push("/feedback")}}},ge={class:"crumbs"},fe=b("\u98CE\u63A7\u7CFB\u7EDF"),ke=b("\u7528\u6237\u7BA1\u7406"),ye={class:"container"},xe={class:"handle-box"},De=b("\u63D0\u73B0\u8BBE\u7F6E"),Ce=b("\u67E5\u770B\u9ED1\u540D\u5355"),Be=b("\u7528\u6237\u53CD\u9988"),Le=b("\u5BFC\u51FAExcel"),Ve=b("\u8BE6\u60C5 "),Ye=b(" \u52A0\u5165\u9ED1\u540D\u5355 "),Me=b(" \u79FB\u51FA\u9ED1\u540D\u5355 "),Ue={class:"pagination"};function Ie(s,a,_,o,T,f){const M=v("el-breadcrumb-item"),S=v("el-breadcrumb"),e=v("el-option"),k=v("el-select"),U=v("el-input"),d=v("el-date-picker"),g=v("el-button"),p=v("el-table-column"),G=v("el-table"),K=v("el-pagination");return w(),B("div",null,[L("div",ge,[t(S,{separator:"/"},{default:c(()=>[t(M,null,{default:c(()=>[fe]),_:1}),t(M,null,{default:c(()=>[ke]),_:1})]),_:1})]),L("div",ye,[L("div",xe,[t(k,{style:{width:"12%"},modelValue:o.main_product_name_selected,"onUpdate:modelValue":a[0]||(a[0]=l=>o.main_product_name_selected=l),placeholder:"\u9879\u76EE\u540D\u79F0",class:"m-2",onChange:o.getProductAndDataList},{default:c(()=>[t(e,{label:"\u5168\u90E8",value:"-1"}),(w(!0),B(I,null,N(o.options,l=>(w(),V(e,{key:l.id,label:l.main_product_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(k,{style:{width:"12%"},modelValue:o.product_name_selected,"onUpdate:modelValue":a[1]||(a[1]=l=>o.product_name_selected=l),placeholder:"\u5E94\u7528\u540D\u79F0",class:"m-2",onChange:o.getDataById},{default:c(()=>[t(e,{label:"\u5168\u90E8",value:"-1"}),(w(!0),B(I,null,N(o.suboptions,l=>(w(),V(e,{key:l.product_id,label:l.product_name,value:l.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(k,{style:{width:"20%",margin:"0 5px"},modelValue:o.withdraw_user_selected,"onUpdate:modelValue":a[2]||(a[2]=l=>o.withdraw_user_selected=l),placeholder:"\u63D0\u73B0\u7528\u6237",class:"m-2",onChange:o.getWithdrawUser},{default:c(()=>[(w(!0),B(I,null,N(o.useroptions,l=>(w(),V(e,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(U,{modelValue:o.idnicknamephonemobile,"onUpdate:modelValue":a[3]||(a[3]=l=>o.idnicknamephonemobile=l),onInput:o.searchByIdNickNameIpMobile,style:{width:"200px",padding:"0 5px"},class:"w-50 m-2",placeholder:"\u8BF7\u8F93\u5165id/\u7528\u6237\u540D/\u624B\u673A\u53F7/ip"},null,8,["modelValue","onInput"]),t(d,{style:{margin:"0 6px"},modelValue:o.dateRange,"onUpdate:modelValue":a[4]||(a[4]=l=>o.dateRange=l),type:"daterange","range-separator":"\u2192","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD",onChange:o.handleDate},null,8,["modelValue","onChange"]),t(g,{type:"primary",onClick:a[5]||(a[5]=l=>f.withDraw())},{default:c(()=>[De]),_:1}),t(g,{type:"primary",onClick:a[6]||(a[6]=l=>f.blackList())},{default:c(()=>[Ce]),_:1}),t(g,{type:"primary",onClick:a[7]||(a[7]=l=>f.userFeedback())},{default:c(()=>[Be]),_:1}),t(g,{type:"primary",onClick:a[8]||(a[8]=l=>o.exportExcel())},{default:c(()=>[Le]),_:1})]),t(G,{data:o.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:c(()=>[t(p,{prop:"main_product_name",label:"\u9879\u76EE\u540D\u79F0"}),t(p,{prop:"product_name",label:"\u5E94\u7528\u540D\u79F0"}),t(p,{prop:"id",label:"\u7528\u6237id"}),t(p,{prop:"oaid",label:"\u6570\u76DFid"}),t(p,{prop:"is_buy",label:"\u662F\u5426\u4E70\u91CF\u7528\u6237"}),t(p,{prop:"nickname",label:"\u7528\u6237\u540D"}),t(p,{prop:"tel",label:"\u624B\u673A\u53F7"}),t(p,{sortable:"",prop:"reward",label:"\u7D2F\u79EF\u4F63\u91D1"}),t(p,{sortable:"",prop:"withdraw_reward",label:"\u5DF2\u63D0\u73B0\u4F63\u91D1"}),t(p,{sortable:"",prop:"withdraw_times",label:"\u5DF2\u63D0\u73B0\u6B21\u6570"}),t(p,{prop:"ip",label:"\u6CE8\u518Cip"}),t(p,{prop:"ip_address",label:"ip\u5730\u5740"}),t(p,{prop:"created_at",label:"\u6CE8\u518C\u65F6\u95F4"}),t(p,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:c(l=>[t(g,{type:"text",icon:"el-icon-link",onClick:H=>f.userDetail(l.row.id)},{default:c(()=>[Ve]),_:2},1032,["onClick"]),A(t(g,{type:"text",icon:"el-icon-delete",class:"red",onClick:H=>o.addBlackList(l.row.id)},{default:c(()=>[Ye]),_:2},1032,["onClick"]),[[F,l.row.blacklisted!=1]]),A(t(g,{type:"text",icon:"el-icon-edit",onClick:H=>o.removeBlackList(l.row.id)},{default:c(()=>[Me]),_:2},1032,["onClick"]),[[F,l.row.blacklisted==1]])]),_:1})]),_:1},8,["data"]),L("div",Ue,[t(K,{background:"",layout:"total, prev, pager, next","current-page":o.query.page_index,"page-size":o.query.page_size,total:o.pageTotal,onCurrentChange:o.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])])}const He=X(we,[["render",Ie],["__scopeId","data-v-dfe65610"]]);export{He as default};
