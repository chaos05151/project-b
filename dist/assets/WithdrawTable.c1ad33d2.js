import{_ as da,g as u,f as j,u as oa,r as _,o as V,c as P,a as z,b as e,w as d,K as F,L as M,G as O,E as A,e as m,F as B,I as S,J as T,t as H}from"./index.8b725170.js";import{a as ra,b as na}from"./product.8200d93e.js";import{w as ia,j as sa,k as _a}from"./user.61aed8c8.js";import"./request.75bcd234.js";const p=u(""),D=u(""),g=j({page_index:1,page_size:10}),Z=u(0);u("");u("");const h=j({}),f=j({}),ua=u(null),N=u(!1),ma=u(!1),$=u([]),ca=u(""),wa=u("\u9879\u76EE");let G=u([]),I=u([]),aa=u([]);const Q=u(),x=(i,l)=>{ia(i).then(c=>{c.status==200?($.value=c.data.lists.filter(a=>a.config_type!=0).map(a=>({...a,biomass_login_status:a.biomass_login_status==1?"\u5141\u8BB8":"\u7981\u6B62",user_withdrawal_status:a.user_withdrawal_status==1?"\u5141\u8BB8":"\u7981\u6B62"})),Z.value=l==1?c.data.total_count:c.data.total_count-1,h.value=c.data.lists.filter(a=>a.config_type==0)[0],h.value.config_type==0&&(N.value=!0,h.user_withdrawal_status=h.value.user_withdrawal_status==1,h.biomass_login_status=h.value.biomass_login_status==1,h.withdrawal_audit_standard=h.value.withdrawal_audit_standard,h.withdrawal_count=h.value.withdrawal_count)):A.error(c==null?void 0:c.message)}).catch(()=>{})},fa=()=>{ra().then(i=>{G.value=i.data,aa.value=i.data}).catch(()=>{})},pa=i=>{na({main_product_id:i}).then(c=>{I.value=c.data}).catch(()=>{})},X=i=>{sa(i).then(l=>{l.status==200?(A.success("\u6DFB\u52A0\u63D0\u73B0\u914D\u7F6E\u6210\u529F"),x(g)):l.status==-1&&A.error("\u6B64\u6E38\u620F\u914D\u7F6E\u5DF2\u5B58\u5728\uFF01")})},ha=(i,l)=>{_a(i,l).then(c=>{c.status==200&&(A.success("\u4FEE\u6539\u63D0\u73B0\u914D\u7F6E\u6210\u529F"),x(g))})},Y=i=>i?/^\d+(\.{0,1}\d+){0,1}$/.test(i)?!0:(A.error("\u8BF7\u5148\u9009\u62E9\u4EA7\u54C1\uFF01"),!1):(A.error("\u8BF7\u9009\u62E9\u6E38\u620F\uFF01"),!1),W=i=>{if(i)return/^\d+(\.{0,1}\d+){0,1}$/.test(i)?!0:(A.error("\u8BF7\u8F93\u5165\u6570\u5B57\uFF01"),!1)},ba={name:"basetable",setup(){p.value="",D.value="";const i={};x(g),fa();const l=oa(),c=(o,n,r,v)=>{l.push({name:"withdrawdetail",params:{main_product_name:o,main_product_id:n,product_id:v,product_name:r}})},a=(o,n)=>{let r=o,v=n;typeof n=="number"?I.value.map(k=>{if(k.product_id==n){o=k.main_product_name,n=k.product_name;return}}):typeof o=="number"&&n==""&&G.value.map(k=>{k.id==o&&(o=k.main_product_name)}),Q.value=null,console.log(o,n,r,v),l.push({name:"withdrawdetailall",params:{main_product_name:o,product_name:n,product_id:v,main_product_id:r}})};let w=j({id:"",main_product_id:"",product_id:"",main_product_name:"",product_name:"",user_withdrawal_status:"",biomass_login_status:"",withdrawal_audit_standard:"",withdrawal_count:""});const R=u(!1),E=u(!1),q=(o,n)=>{Object.keys(w).forEach(r=>{r=="user_withdrawal_status"||r=="biomass_login_status"?w[r]=n[r]=="\u5141\u8BB8":w[r]=n[r]}),R.value=!0},y=()=>{E.value=!0},L=o=>{g.page_index=o,s()},b=()=>{if(R.value=!1,w.withdrawal_audit_standard&&!W(w.withdrawal_audit_standard)||w.withdrawal_count&&!W(w.withdrawal_count))return;const o={user_withdrawal_status:w.user_withdrawal_status?1:0,biomass_login_status:w.biomass_login_status?1:0,withdrawal_audit_standard:w.withdrawal_audit_standard,withdrawal_count:w.withdrawal_count};ha(w.id,o)},C=()=>{if(E.value=!1,!(f.withdrawal_audit_standard&&!W(f.withdrawal_audit_standard))&&!(f.withdrawal_count&&!W(f.withdrawal_count)))if(f.config_type)if(f.config_type==1){if(!Y(p.value))return;D.value.forEach(function(o){if(!Y(o))return;const n=I.value.filter(v=>v.product_id==o),r={config_type:1,main_product_id:n[0].main_product_id,main_product_name:n[0].main_product_name,product_id:n[0].product_id,product_name:n[0].product_name,user_withdrawal_status:f.user_withdrawal_status?1:0,biomass_login_status:f.biomass_login_status?1:0,withdrawal_audit_standard:f.withdrawal_audit_standard,withdrawal_count:f.withdrawal_count};X(r)}),p.value="",D.value="",I.value=""}else{const o={config_type:0,user_withdrawal_status:f.user_withdrawal_status?1:0,biomass_login_status:f.biomass_login_status?1:0,withdrawal_audit_standard:f.withdrawal_audit_standard,withdrawal_count:f.withdrawal_count};X(o)}else{A.error("\u5FC5\u987B\u9009\u62E9\u914D\u7F6E\u7C7B\u578B\uFF01");return}},s=()=>{if(console.log(p.value),D.value="",I.value="",p.value==-1||!p.value)console.log("1"),x(g);else{const o={main_product_id:p.value,...g};x(o,1),pa(p.value)}};return{tableData:$,pageTotal:Z,editVisible:R,addVisible:E,form:h,formEdit:w,formAdd:f,showWithdraw:N,withdrawShow:ma,handleEdit:q,handleAdd:y,saveEdit:b,saveAdd:C,product_type:wa,options:G,suboptions:I,addoptions:aa,main_product_name_selected:p,product_name_selected:D,main_product_value_select:ca,getProductAndDataList:s,getDataById:()=>{if(p.value==-1||!p.value)x(g);else if(D.value==-1){const o={main_product_id:p.value,...g};x(o,1)}else{const o={product_id:D.value,...g};x(o,1)}},handlePageChange:L,query:g,rules:i,form:h,formRef:ua,router:l,dateRange:Q,withdrawDetail:c,withDrawRecord:a}}},ga={class:"crumbs"},va=m("\u98CE\u63A7\u7CFB\u7EDF"),Va=m("\u63D0\u73B0\u914D\u7F6E"),ya={class:"container"},Ca={class:"handle-box"},ka=m("\xA0\xA0 "),xa=m(" \u9ED8\u8BA4\u89C4\u5219"),Aa=m("\u63D0\u73B0\u8BBE\u7F6E"),Ua=m("\u7528\u6237\u63D0\u73B0\u8BB0\u5F55"),Da=m("\u63D0\u73B0\u7533\u8BF7 "),Ea=m("\u63D0\u73B0\u8BBE\u7F6E "),La={class:"pagination"},za={class:"dialog-footer"},Ia=m("\u53D6 \u6D88"),Pa=m("\u786E \u5B9A"),Ra=m("\u6240\u6709\u9879\u76EE"),Ba=m("\u6307\u5B9A\u9879\u76EE"),Sa={class:"dialog-footer"},Ta=m("\u53D6 \u6D88"),Wa=m("\u786E \u5B9A");function ja(i,l,c,a,w,R){const E=_("el-breadcrumb-item"),q=_("el-breadcrumb"),y=_("el-option"),L=_("el-select"),b=_("el-button"),C=_("el-switch"),s=_("el-form-item"),U=_("el-input"),o=_("el-form"),n=_("el-drawer"),r=_("el-table-column"),v=_("el-tag"),k=_("el-table"),ta=_("el-pagination"),J=_("el-dialog"),K=_("el-radio"),ea=_("el-radio-group");return V(),P("div",null,[z("div",ga,[e(q,{separator:"/"},{default:d(()=>[e(E,null,{default:d(()=>[va]),_:1}),e(E,null,{default:d(()=>[Va]),_:1})]),_:1})]),z("div",ya,[z("div",Ca,[e(L,{modelValue:a.main_product_name_selected,"onUpdate:modelValue":l[0]||(l[0]=t=>a.main_product_name_selected=t),placeholder:"\u9879\u76EE\u540D\u79F0",class:"m-2",onChange:a.getProductAndDataList},{default:d(()=>[e(y,{label:"\u5168\u90E8",value:"-1"}),(V(!0),P(B,null,S(a.options,t=>(V(),T(y,{key:t.id,label:t.main_product_name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),e(L,{modelValue:a.product_name_selected,"onUpdate:modelValue":l[1]||(l[1]=t=>a.product_name_selected=t),placeholder:"\u5E94\u7528\u540D\u79F0",class:"m-2",onChange:a.getDataById},{default:d(()=>[e(y,{label:"\u5168\u90E8",value:"-1"}),(V(!0),P(B,null,S(a.suboptions,t=>(V(),T(y,{key:t.product_id,label:t.product_name,value:t.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),ka,F(e(b,{type:"primary",onClick:l[2]||(l[2]=t=>a.withdrawShow=!0)},{default:d(()=>[xa]),_:1},512),[[M,a.showWithdraw]]),e(b,{type:"primary",onClick:a.handleAdd},{default:d(()=>[Aa]),_:1},8,["onClick"]),e(b,{type:"primary",onClick:l[3]||(l[3]=t=>a.withDrawRecord(a.main_product_name_selected,a.product_name_selected))},{default:d(()=>[Ua]),_:1}),e(n,{modelValue:a.withdrawShow,"onUpdate:modelValue":l[8]||(l[8]=t=>a.withdrawShow=t),title:"\u63D0\u73B0\u9ED8\u8BA4\u89C4\u5219\u4FE1\u606F\uFF1A",direction:"rtl",size:"50%"},{default:d(()=>[e(o,{ref:"formRef",model:a.form,"label-width":"280px"},{default:d(()=>[e(s,{label:"\u662F\u5426\u5141\u8BB8\u6240\u6709\u7528\u6237\u63D0\u73B0",prop:"user_withdrawal_status"},{default:d(()=>[e(C,{disabled:"",modelValue:a.form.user_withdrawal_status,"onUpdate:modelValue":l[4]||(l[4]=t=>a.form.user_withdrawal_status=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u662F\u5426\u5141\u8BB8\u81EA\u7136\u91CF\u767B\u5F55",prop:"biomass_login_status"},{default:d(()=>[e(C,{disabled:"",modelValue:a.form.biomass_login_status,"onUpdate:modelValue":l[5]||(l[5]=t=>a.form.biomass_login_status=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u63D0\u73B0\u5BA1\u6838\u6807\u51C6",prop:"withdrawal_audit_standard"},{default:d(()=>[e(U,{disabled:"",style:{width:"150px"},modelValue:a.form.withdrawal_audit_standard,"onUpdate:modelValue":l[6]||(l[6]=t=>a.form.withdrawal_audit_standard=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u5355\u65E5\u63D0\u73B0\u6B21\u6570",prop:"withdrawal_count"},{default:d(()=>[e(U,{disabled:"",style:{width:"150px"},modelValue:a.form.withdrawal_count,"onUpdate:modelValue":l[7]||(l[7]=t=>a.form.withdrawal_count=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),e(k,{data:a.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:d(()=>[e(r,{prop:"main_product_id",label:"\u9879\u76EEID"}),e(r,{prop:"main_product_name",label:"\u9879\u76EE\u540D\u79F0"}),e(r,{prop:"product_id",label:"\u5E94\u7528ID"}),e(r,{prop:"product_name",label:"\u5E94\u7528\u540D\u79F0"}),e(r,{prop:"unaudit_orders_count",label:"\u672A\u5BA1\u6838\u8BA2\u5355\u6570"}),e(r,{prop:"unaudit_reward_sum",label:"\u672A\u5BA1\u6838\u603B\u91D1\u989D"}),e(r,{prop:"apply_users_count",label:"\u7533\u8BF7\u4EBA\u6570"}),e(r,{prop:"user_withdrawal_status",label:"\u7528\u6237\u63D0\u73B0"},{default:d(t=>[e(v,{type:t.row.user_withdrawal_status==="\u5141\u8BB8"?"":t.row.user_withdrawal_status==="\u7981\u6B62"?"danger":""},{default:d(()=>[m(H(t.row.user_withdrawal_status),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"biomass_login_status",label:"\u81EA\u7136\u91CF\u767B\u5F55"},{default:d(t=>[e(v,{type:t.row.biomass_login_status==="\u5141\u8BB8"?"":t.row.biomass_login_status==="\u7981\u6B62"?"danger":""},{default:d(()=>[m(H(t.row.biomass_login_status),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"withdrawal_audit_standard",label:"\u63D0\u73B0\u5BA1\u6838\u6807\u51C6"}),e(r,{prop:"withdrawal_count",label:"\u5355\u7528\u6237\u5F53\u5929\u63D0\u73B0\u6B21\u6570"}),e(r,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:d(t=>[e(b,{type:"text",icon:"el-icon-link",onClick:la=>a.withdrawDetail(t.row.main_product_name,t.row.main_product_id,t.row.product_name,t.row.product_id)},{default:d(()=>[Da]),_:2},1032,["onClick"]),e(b,{type:"text",icon:"el-icon-edit",onClick:la=>a.handleEdit(t.row.id,t.row)},{default:d(()=>[Ea]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),z("div",La,[e(ta,{background:"",layout:"total, prev, pager, next","current-page":a.query.page_index,"page-size":a.query.page_size,total:a.pageTotal,onCurrentChange:a.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),O(" \u7F16\u8F91\u5F39\u51FA\u6846 "),e(J,{title:"\u7F16\u8F91\u63D0\u73B0\u914D\u7F6E",modelValue:a.editVisible,"onUpdate:modelValue":l[14]||(l[14]=t=>a.editVisible=t),width:"60%"},{footer:d(()=>[z("span",za,[e(b,{onClick:l[13]||(l[13]=t=>a.editVisible=!1)},{default:d(()=>[Ia]),_:1}),e(b,{type:"primary",onClick:a.saveEdit},{default:d(()=>[Pa]),_:1},8,["onClick"])])]),default:d(()=>[e(o,{ref:"formRef",rules:a.rules,model:a.formEdit,"label-width":"280px"},{default:d(()=>[e(s,{label:"\u662F\u5426\u5141\u8BB8\u6240\u6709\u7528\u6237\u63D0\u73B0",prop:"user_withdrawal_status"},{default:d(()=>[e(C,{modelValue:a.formEdit.user_withdrawal_status,"onUpdate:modelValue":l[9]||(l[9]=t=>a.formEdit.user_withdrawal_status=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u662F\u5426\u5141\u8BB8\u81EA\u7136\u91CF\u767B\u5F55",prop:"biomass_login_status"},{default:d(()=>[e(C,{modelValue:a.formEdit.biomass_login_status,"onUpdate:modelValue":l[10]||(l[10]=t=>a.formEdit.biomass_login_status=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u63D0\u73B0\u5BA1\u6838\u6807\u51C6",prop:"withdrawal_audit_standard"},{default:d(()=>[e(U,{style:{width:"150px"},modelValue:a.formEdit.withdrawal_audit_standard,"onUpdate:modelValue":l[11]||(l[11]=t=>a.formEdit.withdrawal_audit_standard=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u5355\u65E5\u63D0\u73B0\u6B21\u6570",prop:"withdrawal_count"},{default:d(()=>[e(U,{style:{width:"150px"},modelValue:a.formEdit.withdrawal_count,"onUpdate:modelValue":l[12]||(l[12]=t=>a.formEdit.withdrawal_count=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"]),O(" \u65B0\u589E\u5F39\u51FA\u6846 "),e(J,{title:"\u65B0\u589E\u63D0\u73B0\u914D\u7F6E",modelValue:a.addVisible,"onUpdate:modelValue":l[23]||(l[23]=t=>a.addVisible=t),width:"60%"},{footer:d(()=>[z("span",Sa,[e(b,{onClick:l[22]||(l[22]=t=>a.addVisible=!1)},{default:d(()=>[Ta]),_:1}),e(b,{type:"primary",onClick:a.saveAdd},{default:d(()=>[Wa]),_:1},8,["onClick"])])]),default:d(()=>[e(o,{ref:"formRef",rules:a.rules,model:a.formAdd,"label-width":"280px"},{default:d(()=>[e(s,{label:"\u914D\u7F6E\u7C7B\u578B",prop:"config_type"},{default:d(()=>[e(ea,{modelValue:a.formAdd.config_type,"onUpdate:modelValue":l[15]||(l[15]=t=>a.formAdd.config_type=t)},{default:d(()=>[e(K,{label:"0"},{default:d(()=>[Ra]),_:1}),e(K,{label:"1"},{default:d(()=>[Ba]),_:1})]),_:1},8,["modelValue"])]),_:1}),F(e(s,{label:"\u9879\u76EE",prop:"main_product_name_selected"},{default:d(()=>[e(L,{modelValue:a.main_product_name_selected,"onUpdate:modelValue":l[16]||(l[16]=t=>a.main_product_name_selected=t),placeholder:"\u9879\u76EE",class:"m-2",onChange:a.getProductAndDataList},{default:d(()=>[(V(!0),P(B,null,S(a.options,t=>(V(),T(y,{key:t.id,label:t.main_product_name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1},512),[[M,a.formAdd.config_type==1]]),F(e(s,{label:"\u5E94\u7528",prop:"product_name_selected"},{default:d(()=>[e(L,{multiple:"",modelValue:a.product_name_selected,"onUpdate:modelValue":l[17]||(l[17]=t=>a.product_name_selected=t),placeholder:"\u5E94\u7528",class:"m-2"},{default:d(()=>[(V(!0),P(B,null,S(a.suboptions,t=>(V(),T(y,{key:t.product_id,label:t.product_name,value:t.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[M,a.formAdd.config_type==1]]),e(s,{label:"\u662F\u5426\u5141\u8BB8\u6240\u6709\u7528\u6237\u63D0\u73B0",prop:"user_withdrawal_status"},{default:d(()=>[e(C,{modelValue:a.formAdd.user_withdrawal_status,"onUpdate:modelValue":l[18]||(l[18]=t=>a.formAdd.user_withdrawal_status=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u662F\u5426\u5141\u8BB8\u81EA\u7136\u91CF\u767B\u5F55",prop:"biomass_login_status"},{default:d(()=>[e(C,{modelValue:a.formAdd.biomass_login_status,"onUpdate:modelValue":l[19]||(l[19]=t=>a.formAdd.biomass_login_status=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u63D0\u73B0\u5BA1\u6838\u6807\u51C6",prop:"withdrawal_audit_standard"},{default:d(()=>[e(U,{style:{width:"150px"},modelValue:a.formAdd.withdrawal_audit_standard,"onUpdate:modelValue":l[20]||(l[20]=t=>a.formAdd.withdrawal_audit_standard=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u5355\u65E5\u63D0\u73B0\u6B21\u6570",prop:"withdrawal_count"},{default:d(()=>[e(U,{style:{width:"150px"},modelValue:a.formAdd.withdrawal_count,"onUpdate:modelValue":l[21]||(l[21]=t=>a.formAdd.withdrawal_count=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}const Ja=da(ba,[["render",ja],["__scopeId","data-v-fb7e65cc"],["__file","/Users/apple/Desktop/project-b github/project-b/src/views/WithdrawTable.vue"]]);export{Ja as default};
