import{_ as ke,u as ye,r as i,C as xe,D as F,w as De,b as Ve,e as u,g as Ce,a as c,c as D,t as T,j as t,k as n,y as m,q as N,p as b,h as w,f as Ue,T as Ye,l as V,F as U,m as Y,U as R,z as _,V as A}from"./index.3fee5d13.js";import{e as Le}from"./export2excel.a0c92898.js";import{f as G,a as Be,r as Me}from"./user.18d2d274.js";import{h as S}from"./moment.9709ab41.js";import{u as Te}from"./user.9a164dae.js";import{s as k}from"./showButton.83421764.js";const Ne={class:"crumbs"},Se=_("\u7528\u6237\u7BA1\u7406"),Pe={class:"container"},Ee=_("\xA0\xA0 "),ze=_("\xA0\xA0 "),He=_("\xA0\xA0 "),Je=_("\xA0\xA0 "),Oe=_("\xA0\xA0 "),je=_("\u67E5\u8BE2"),$e=_("\u91CD\u7F6E"),Ie=_("\u5BFC\u51FAExcel"),qe=_("\u8BE6\u60C5 "),Fe=_(" \u52A0\u5165\u9ED1\u540D\u5355 "),Re=_(" \u79FB\u51FA\u9ED1\u540D\u5355 "),Ae={class:"pagination"},Ge={__name:"UserTable",setup(Ke){const K=k("user:user:view");k("user:user:add"),k("user:user:edit"),k("user:user:del");const Q=k("user:user:export"),P=k("user:user:black"),W=Te(),E=ye(),z=i(!0),X=xe(),H=i([]),o=F({main_product_id:"",product_id:"",channel:"",version:"",withdraw_user:"",start_date:"",end_date:"",keywords:""}),y=i(0),J=i([]),L=i({}),x=i(),p=F({page_index:1,page_size:10}),O=i([]);De(()=>E.mainProductId,(e,a)=>{o.main_product_id=e,I(e)});const Z=()=>{Ue().then(e=>{e.status==200&&(O.value=e.data)}).catch(e=>{console.log(e)})},ee=e=>{let a=JSON.parse(JSON.stringify(O.value));console.log(e,a),a.forEach(s=>{String(e)==s.value&&(B.value=s.children)})},ae=e=>{JSON.parse(JSON.stringify(B.value)).forEach(s=>{e==s.value&&($.value=s.children)})};let te=i([{value:"-1",label:"\u5168\u90E8"},{value:"1",label:"\u5DF2\u63D0\u73B0\u7528\u6237"},{value:"0",label:"\u672A\u63D0\u73B0\u7528\u6237"}]),B=i([]),le=i([]),j=i([]),$=i([]);const oe=async()=>{try{const e=await Ye();le.value=e.data,o.main_product_id=e.data[0].id;let a={...p,main_product_id:e.data[0].id};v(a)}catch{}},v=e=>{G(e).then(a=>{a.status==200?(z.value=!1,J.value=a.data.lists.map(s=>({...s,is_buy:s.is_buy==1?"\u662F":"\u5426",created_at:S(s.created_at).format("YYYY-MM-DD HH:mm:ss")})),y.value=a.data.total_count,L.value=JSON.parse(JSON.stringify(e)).catch(()=>{})):V.error(a==null?void 0:a.message)}).catch(()=>{})},I=e=>{Ve({main_product_id:e}).then(s=>{j.value=s.data}).catch(()=>{})},ne=()=>{x.value&&(o.start_date=x.value[0],o.end_date=x.value[1])},se=()=>{L.value.page_size=y.value?y.value<=1e4?y.value:1e4:10,G(L.value).then(e=>{if(e.status==200){H.value=e.data.lists.map(r=>({...r,is_buy:r.is_buy==1?"\u662F":"\u5426",created_at:S(r.created_at).format("YYYY-MM-DD HH:mm:ss")}));const a=["\u9879\u76EE","\u5E94\u7528","\u7528\u6237id","\u6570\u76DFid","\u662F\u5426\u4E70\u91CF\u7528\u6237","\u7528\u6237\u540D","\u624B\u673A\u53F7","\u7D2F\u79EF\u4F63\u91D1","\u5DF2\u63D0\u73B0\u4F63\u91D1","\u5DF2\u63D0\u73B0\u6B21\u6570","\u6CE8\u518Cip","ip\u5730\u5740","\u6CE8\u518C\u65F6\u95F4"],s=H.value.map(r=>({main_product_name:r.main_product_name,product_name:r.product_name,id:r.id,oaid:r.oaid,is_buy:r.is_buy==1?"\u662F":"\u5426",nickname:r.nickname,tel:r.tel,reward:r.reward,withdraw_reward:r.withdraw_reward,withdraw_times:r.withdraw_times,ip:r.ip,ip_address:r.ip_address,created_at:S(r.created_at).format("YYYY-MM-DD HH:mm:ss")}));Le(s,"UserTable",a,"UserTable")}else e.message?V.error(e.message):V.error("\u540E\u7AEFapi\u63A5\u53E3\u5F02\u5E38\uFF01")})},re=e=>{X.push({name:"userdetail"}),W.setuserDetail(e)},de=e=>{Be(e).then(a=>{a.status==200&&(V.success("\u52A0\u5165\u9ED1\u540D\u5355\u6210\u529F\uFF01"),v(p))}).catch(()=>{})},ue=e=>{A.confirm("\u786E\u5B9A\u52A0\u5165\u9ED1\u540D\u5355\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{de(e)}).catch(()=>{})},ce=e=>{Me(e).then(a=>{a.status==200&&(V.success("\u79FB\u51FA\u9ED1\u540D\u5355\u6210\u529F\uFF01"),v(p))}).catch(()=>{})},ie=e=>{A.confirm("\u786E\u5B9A\u79FB\u51FA\u9ED1\u540D\u5355\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{ce(e)}).catch(()=>{})},_e=e=>{p.page_index=e;for(const s in o)(o[s]==""||o[s]==-1)&&(o[s]=void 0);const a={...o,...p};v(a)},pe=()=>{for(const a in o)(o[a]==""||o[a]==-1)&&(o[a]=void 0);const e={...o,...p};v(e)},me=()=>{for(const e in o)o[e]="";v(p)};return I(E.mainProductId),Z(),oe(),(e,a)=>{const s=u("el-breadcrumb-item"),r=u("el-breadcrumb"),f=u("el-option"),C=u("el-select"),h=u("el-form-item"),M=u("el-row"),be=u("el-date-picker"),fe=u("el-input"),g=u("el-button"),ve=u("el-form"),d=u("el-table-column"),he=u("el-table"),ge=u("el-pagination"),we=Ce("loading");return c(),D("div",null,[T("div",Ne,[t(r,{separator:"/"},{default:n(()=>[t(s,null,{default:n(()=>[Se]),_:1})]),_:1})]),T("div",Pe,[t(ve,null,{default:n(()=>[t(M,null,{default:n(()=>[w("v-if",!0),Ee,t(h,{label:"\u5E94\u7528"},{default:n(()=>[t(C,{modelValue:o.product_id,"onUpdate:modelValue":a[1]||(a[1]=l=>o.product_id=l),placeholder:"\u9009\u62E9\u5E94\u7528",onChange:ee},{default:n(()=>[t(f,{label:"\u5168\u90E8",value:""}),(c(!0),D(U,null,Y(m(j),l=>(c(),b(f,{key:l.product_id,label:l.product_name,value:l.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),ze,t(h,{label:"\u6E20\u9053\u9009\u62E9"},{default:n(()=>[t(C,{modelValue:o.channel,"onUpdate:modelValue":a[2]||(a[2]=l=>o.channel=l),placeholder:"\u9009\u62E9\u6E20\u9053",onChange:ae},{default:n(()=>[t(f,{label:"\u5168\u90E8",value:""}),(c(!0),D(U,null,Y(m(B),l=>(c(),b(f,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),He,t(h,{label:"\u7248\u672C\u9009\u62E9"},{default:n(()=>[t(C,{modelValue:o.version,"onUpdate:modelValue":a[3]||(a[3]=l=>o.version=l),placeholder:"\u9009\u62E9\u7248\u672C"},{default:n(()=>[t(f,{label:"\u5168\u90E8",value:""}),(c(!0),D(U,null,Y(m($),l=>(c(),b(f,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(M,null,{default:n(()=>[t(h,{label:"\u63D0\u73B0\u7528\u6237"},{default:n(()=>[t(C,{style:{width:"200px",margin:"0 5px"},modelValue:o.withdraw_user,"onUpdate:modelValue":a[4]||(a[4]=l=>o.withdraw_user=l),placeholder:"\u63D0\u73B0\u7528\u6237",class:"m-2"},{default:n(()=>[(c(!0),D(U,null,Y(m(te),l=>(c(),b(f,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Je,t(h,{label:"\u6CE8\u518C\u65E5\u671F"},{default:n(()=>[t(be,{style:{margin:"0 6px"},modelValue:x.value,"onUpdate:modelValue":a[5]||(a[5]=l=>x.value=l),type:"daterange","range-separator":"\u2192","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD",onChange:ne},null,8,["modelValue"])]),_:1}),Oe,t(h,{label:"\u7528\u6237\u67E5\u627E"},{default:n(()=>[t(fe,{modelValue:o.keywords,"onUpdate:modelValue":a[6]||(a[6]=l=>o.keywords=l),style:{width:"200px",padding:"0 5px"},class:"w-50 m-2",placeholder:"\u8BF7\u8F93\u5165id/\u7528\u6237\u540D/\u624B\u673A\u53F7/ip"},null,8,["modelValue"])]),_:1})]),_:1}),t(M,{class:"threebuttons"},{default:n(()=>[t(g,{type:"primary",onClick:pe},{default:n(()=>[je]),_:1}),t(g,{type:"primary",onClick:me},{default:n(()=>[$e]),_:1}),m(Q)?(c(),b(g,{key:0,type:"primary",onClick:a[7]||(a[7]=l=>se())},{default:n(()=>[Ie]),_:1})):w("v-if",!0)]),_:1})]),_:1}),m(K)?N((c(),b(he,{key:0,data:J.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:n(()=>[t(d,{prop:"main_product_name",label:"\u9879\u76EE"}),t(d,{prop:"product_name",label:"\u5E94\u7528"}),t(d,{prop:"id",label:"\u7528\u6237id"}),t(d,{prop:"oaid",label:"\u6570\u76DFid"}),t(d,{prop:"is_buy",label:"\u662F\u5426\u4E70\u91CF\u7528\u6237"}),t(d,{prop:"nickname",label:"\u7528\u6237\u540D"}),t(d,{prop:"tel",label:"\u624B\u673A\u53F7"}),t(d,{sortable:"",prop:"reward",label:"\u7D2F\u79EF\u4F63\u91D1"}),t(d,{sortable:"",prop:"withdraw_reward",label:"\u5DF2\u63D0\u73B0\u4F63\u91D1"}),t(d,{sortable:"",prop:"withdraw_times",label:"\u5DF2\u63D0\u73B0\u6B21\u6570"}),t(d,{prop:"ip",label:"\u6CE8\u518Cip"}),t(d,{prop:"ip_address",label:"ip\u5730\u5740"}),t(d,{prop:"created_at",label:"\u6CE8\u518C\u65F6\u95F4"}),w(` <el-table-column
            prop="bind_account_count"
            label="\u5173\u8054\u8D26\u53F7\u6570"
          ></el-table-column>
          <el-table-column prop="illegal_time" label="\u62C9\u9ED1\u65F6\u95F4"></el-table-column> `),t(d,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:n(l=>[t(g,{type:"text",icon:"el-icon-link",onClick:q=>re(l.row.id)},{default:n(()=>[qe]),_:2},1032,["onClick"]),m(P)?N((c(),b(g,{key:0,type:"text",icon:"el-icon-delete",class:"red",onClick:q=>ue(l.row.id)},{default:n(()=>[Fe]),_:2},1032,["onClick"])),[[R,l.row.blacklisted!=1]]):w("v-if",!0),m(P)?N((c(),b(g,{key:1,type:"text",icon:"el-icon-edit",onClick:q=>ie(l.row.id)},{default:n(()=>[Re]),_:2},1032,["onClick"])),[[R,l.row.blacklisted==1]]):w("v-if",!0)]),_:1})]),_:1},8,["data"])),[[we,z.value]]):w("v-if",!0),T("div",Ae,[t(ge,{background:"",layout:"total, prev, pager, next","current-page":p.page_index,"page-size":p.page_size,total:y.value,onCurrentChange:_e},null,8,["current-page","page-size","total"])])])])}}},ta=ke(Ge,[["__scopeId","data-v-4af0b479"],["__file","/Users/apple/Desktop/project-b/relationship.b/src/views/UserTable.vue"]]);export{ta as default};
