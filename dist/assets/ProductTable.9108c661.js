import{_ as Y,f as q,g as u,r as c,o as C,c as L,a as P,b as t,w as o,G as I,E as m,H as Z,e as p,F as M,I as N,J as z,K as V,L as k}from"./index.87432d79.js";import{f as $,a as ee,b as ae,e as te,d as le,c as oe,g as de,h as ne}from"./product.7350ee23.js";import"./request.5c28a085.js";const r=q({page_index:1,page_size:10}),H=u(0),D=u(""),j=u(""),T=u(""),A=u(0),K=u([]),re=u(""),G=u("\u9879\u76EE");let Q=u([]),R=u([]),W=u([]);const _=d=>{$(d).then(a=>{a.status==200?(H.value=a.data.total_count,K.value=a.data.lists):m.error(a==null?void 0:a.message)}).catch(()=>{})},x=()=>{ee().then(d=>{Q.value=d.data,W.value=d.data}).catch(()=>{})},ce=d=>{ae({main_product_id:d}).then(v=>{R.value=v.data}).catch(()=>{})},_e=(d,a)=>{te(d,a).then(v=>{v.status==200?(m.success("\u4FEE\u6539\u6210\u529F"),_(r),x()):(m.error("\u4FEE\u6539\u5931\u8D25"),_(r))}).catch(()=>{m.error("\u4FEE\u6539\u5931\u8D25"),_(r)})},ue=d=>{le(d).then(a=>{a.status==200?(m.success("\u5220\u9664\u6210\u529F"),_(r),x()):a.status==-1&&m.error("\u8BF7\u5148\u5220\u9664\u5BF9\u5E94\u7684\u5E94\u7528\uFF01")})},ie=d=>{oe(d).then(a=>{a.status==200&&(m.success("\u5220\u9664\u6210\u529F"),_(r),x())})},se=d=>{de(d).then(a=>{a.status==200&&(m.success("\u65B0\u589E\u9879\u76EE\u6210\u529F"),_(r),x())})},me=(d,a)=>{ne(d,a).then(v=>{v.status==200&&(m.success("\u65B0\u589E\u5E94\u7528\u6210\u529F"),_(r),x())})},pe={name:"basetable",setup(){D.value="",T.value="",_(r),x();const d=()=>{r.pageIndex=1,_(r)},a=n=>{r.page_index=n,S()},v=(n,i)=>{Z.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{i>""?ie(i):ue(n)}).catch(()=>{})},e=u(!1),U=u(!1);let h=q({id:"",main_product_id:"",product_id:"",main_product_name:"",product_name:"",package_name:""}),b=q({main_product_name:"",product_name:"",package_name:""});const B=(n,i)=>{A.value=u(""),i.product_id==""?A.value=0:A.value=1,Object.keys(h).forEach(s=>{h[s]=i[s]}),e.value=!0},y=()=>{U.value=!0},w=()=>{e.value=!1,h.main_product_name;const n={package_name:h.package_name};A.value==1&&_e(h.product_id,n)},f=()=>{U.value=!1;let n={main_product_name:b.main_product_name};if(G.value=="\u9879\u76EE")if(b.main_product_name)se(n);else{m.error("\u6E38\u620F\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}else if(b.product_name&&b.package_name&&j.value)n={product_name:b.product_name,package_name:b.package_name},me(j.value,n);else{m.error("\u6E38\u620F\u540D\u548C\u5305\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}},g=()=>{if(T.value="",D.value==-1)_(r);else{const n={main_product_id:D.value,...r};_(n),ce(D.value)}},S=()=>{if(D.value==-1)_(r);else if(T.value==-1){const n={main_product_id:D.value,...r};_(n)}else{const n={product_id:T.value,...r};_(n)}};return{query:r,tableData:K,pageTotal:H,editVisible:e,addVisible:U,form:h,formAdd:b,handleSearch:d,handlePageChange:a,handleDelete:v,handleEdit:B,handleAdd:y,saveEdit:w,saveAdd:f,product_type:G,options:Q,suboptions:R,addoptions:W,main_product_name_selected:D,add_main_product_name_selected:j,product_name_selected:T,main_product_value_select:re,check_main_product_name:A,getProductAndDataList:g,getDataById:S}},methods:{riskManage(d){this.$router.push({name:"productrisk",params:{data:JSON.stringify(d)}})}}},be={class:"crumbs"},fe=p("\u98CE\u63A7\u7CFB\u7EDF"),ge=p("\u4EA7\u54C1\u7BA1\u7406"),ve={class:"container"},he={class:"handle-box"},Ve=p("\xA0\xA0 "),ke=p("\u65B0\u589E\u9879\u76EE"),ye=p("\u98CE\u63A7\u914D\u7F6E "),Ce=p("\u7F16\u8F91 "),De=p("\u5220\u9664 "),Pe={class:"pagination"},xe={class:"dialog-footer"},we=p("\u53D6 \u6D88"),Te=p("\u786E \u5B9A"),Ae={class:"dialog-footer"},Ue=p("\u53D6 \u6D88"),Se=p("\u786E \u5B9A");function Le(d,a,v,e,U,h){const b=c("el-breadcrumb-item"),B=c("el-breadcrumb"),y=c("el-option"),w=c("el-select"),f=c("el-button"),g=c("el-table-column"),S=c("el-table"),n=c("el-pagination"),i=c("el-input"),s=c("el-form-item"),E=c("el-form"),F=c("el-dialog"),J=c("el-radio"),X=c("el-radio-group");return C(),L("div",null,[P("div",be,[t(B,{separator:"/"},{default:o(()=>[t(b,null,{default:o(()=>[fe]),_:1}),t(b,null,{default:o(()=>[ge]),_:1})]),_:1})]),P("div",ve,[P("div",he,[t(w,{modelValue:e.main_product_name_selected,"onUpdate:modelValue":a[0]||(a[0]=l=>e.main_product_name_selected=l),placeholder:"\u9879\u76EE\u540D\u79F0",class:"m-2",onChange:e.getProductAndDataList},{default:o(()=>[t(y,{label:"\u5168\u90E8",value:"-1"}),(C(!0),L(M,null,N(e.options,l=>(C(),z(y,{key:l.id,label:l.main_product_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(w,{modelValue:e.product_name_selected,"onUpdate:modelValue":a[1]||(a[1]=l=>e.product_name_selected=l),placeholder:"\u5E94\u7528\u540D\u79F0",class:"m-2",onChange:e.getDataById},{default:o(()=>[t(y,{label:"\u5168\u90E8",value:"-1"}),(C(!0),L(M,null,N(e.suboptions,l=>(C(),z(y,{key:l.product_id,label:l.product_name,value:l.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),Ve,I(' <el-button type="primary" icon="el-icon-search" @click="handleSearch">\u641C\u7D22</el-button> '),t(f,{type:"primary",onClick:e.handleAdd},{default:o(()=>[ke]),_:1},8,["onClick"])]),t(S,{data:e.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:o(()=>[t(g,{prop:"main_product_id",sortable:"",label:"\u9879\u76EEID"}),t(g,{prop:"main_product_name",label:"\u9879\u76EE\u540D\u79F0"}),t(g,{prop:"product_id",label:"\u5E94\u7528ID"}),t(g,{prop:"product_name",label:"\u5E94\u7528\u540D\u79F0"}),t(g,{prop:"md5key",label:"md5key"}),t(g,{prop:"package_name",label:"\u5305\u540D"}),t(g,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:o(l=>[V(t(f,{type:"text",icon:"el-icon-link",onClick:O=>h.riskManage(l.row)},{default:o(()=>[ye]),_:2},1032,["onClick"]),[[k,l.row.product_id>""]]),V(t(f,{type:"text",icon:"el-icon-edit",onClick:O=>e.handleEdit(l.row.id,l.row)},{default:o(()=>[Ce]),_:2},1032,["onClick"]),[[k,l.row.product_id>""]]),t(f,{type:"text",icon:"el-icon-delete",class:"red",onClick:O=>e.handleDelete(l.row.main_product_id,l.row.product_id)},{default:o(()=>[De]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),P("div",Pe,[t(n,{background:"",layout:"total, prev, pager, next","current-page":e.query.page_index,"page-size":e.query.page_size,total:e.pageTotal,onCurrentChange:e.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),I(" \u7F16\u8F91\u5F39\u51FA\u6846 "),t(F,{title:"\u7F16\u8F91",modelValue:e.editVisible,"onUpdate:modelValue":a[6]||(a[6]=l=>e.editVisible=l),width:"60%"},{footer:o(()=>[P("span",xe,[t(f,{onClick:a[5]||(a[5]=l=>e.editVisible=!1)},{default:o(()=>[we]),_:1}),t(f,{type:"primary",onClick:e.saveEdit},{default:o(()=>[Te]),_:1},8,["onClick"])])]),default:o(()=>[V(t(E,{"label-width":"110px"},{default:o(()=>[t(s,{label:"\u9879\u76EE\u540D"},{default:o(()=>[t(i,{modelValue:e.form.main_product_name,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.main_product_name=l)},null,8,["modelValue"])]),_:1})]),_:1},512),[[k,e.check_main_product_name==0]]),V(t(E,{"label-width":"110px"},{default:o(()=>[t(s,{label:"\u5E94\u7528\u540D"},{default:o(()=>[t(i,{disabled:"",modelValue:e.form.product_name,"onUpdate:modelValue":a[3]||(a[3]=l=>e.form.product_name=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5305\u540D"},{default:o(()=>[t(i,{modelValue:e.form.package_name,"onUpdate:modelValue":a[4]||(a[4]=l=>e.form.package_name=l)},null,8,["modelValue"])]),_:1})]),_:1},512),[[k,e.check_main_product_name==1]])]),_:1},8,["modelValue"]),I(" \u65B0\u589E\u5F39\u51FA\u6846 "),t(F,{title:"\u65B0\u589E\u9879\u76EE",modelValue:e.addVisible,"onUpdate:modelValue":a[13]||(a[13]=l=>e.addVisible=l),width:"60%"},{footer:o(()=>[P("span",Ae,[t(f,{onClick:a[12]||(a[12]=l=>e.addVisible=!1)},{default:o(()=>[Ue]),_:1}),t(f,{type:"primary",onClick:e.saveAdd},{default:o(()=>[Se]),_:1},8,["onClick"])])]),default:o(()=>[t(E,{"label-width":"70px"},{default:o(()=>[t(s,{label:"\u6E38\u620F\u7C7B\u578B",prop:"resource"},{default:o(()=>[t(X,{modelValue:e.product_type,"onUpdate:modelValue":a[7]||(a[7]=l=>e.product_type=l)},{default:o(()=>[t(J,{label:"\u9879\u76EE"}),t(J,{label:"\u5E94\u7528"})]),_:1},8,["modelValue"])]),_:1}),V(t(s,{label:"\u9879\u76EE",prop:"resource"},{default:o(()=>[t(w,{modelValue:e.add_main_product_name_selected,"onUpdate:modelValue":a[8]||(a[8]=l=>e.add_main_product_name_selected=l),placeholder:"\u9879\u76EE",class:"m-2"},{default:o(()=>[(C(!0),L(M,null,N(e.addoptions,l=>(C(),z(y,{key:l.id,label:l.main_product_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[k,e.product_type=="\u5E94\u7528"]]),V(t(s,{label:"\u9879\u76EE"},{default:o(()=>[t(i,{modelValue:e.formAdd.main_product_name,"onUpdate:modelValue":a[9]||(a[9]=l=>e.formAdd.main_product_name=l)},null,8,["modelValue"])]),_:1},512),[[k,e.product_type=="\u9879\u76EE"]]),V(t(s,{label:"\u5E94\u7528"},{default:o(()=>[t(i,{modelValue:e.formAdd.product_name,"onUpdate:modelValue":a[10]||(a[10]=l=>e.formAdd.product_name=l)},null,8,["modelValue"])]),_:1},512),[[k,e.product_type=="\u5E94\u7528"]]),V(t(s,{label:"\u5305\u540D"},{default:o(()=>[t(i,{modelValue:e.formAdd.package_name,"onUpdate:modelValue":a[11]||(a[11]=l=>e.formAdd.package_name=l)},null,8,["modelValue"])]),_:1},512),[[k,e.product_type=="\u5E94\u7528"]])]),_:1})]),_:1},8,["modelValue"])])}const Me=Y(pe,[["render",Le],["__scopeId","data-v-628a05d9"],["__file","/Users/apple/Desktop/project-b github/project-b/src/views/ProductTable.vue"]]);export{Me as default};
