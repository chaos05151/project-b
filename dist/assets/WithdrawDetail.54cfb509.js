import{_ as $,g as s,f as F,M as ee,u as ae,r as m,o as w,c as V,a as k,b as a,w as c,G as te,H as q,F as S,I as T,J as U,e as f,t as Y,K as A,L as O,E as W}from"./index.87432d79.js";import{a as oe,b as ne}from"./product.7350ee23.js";import{h as R}from"./moment.9709ab41.js";import{l as G,m as de}from"./user.4304eb89.js";import"./request.5c28a085.js";const u=s(""),b=s(""),J=s([]),K=s(),le=s("\u9879\u76EE"),y=F({}),Q=s(0),d=F({product_id:"",page_index:1,page_size:10,status:1});let v=s(""),P=s([]),B=s([]),X=s([]);const L=s(),re=s(!1),h=t=>{G(t).then(l=>{var _;return J.value=(_=l.data)==null?void 0:_.lists.map(e=>({...e,updated_at:R(e.updated_at).format("YYYY-MM-DD HH:mm:ss")})),Q.value=l.data.total_count,y.apply_users_count=l.data.apply_users_count,y.unaudit_orders_count=l.data.unaudit_orders_count,y.unaudit_reward_sum=l.data.unaudit_reward_sum,t={...t,page_size:l.data.total_count},t}).catch(()=>{})},ce=t=>{G(t).then(l=>{var _;K.value=(_=l.data)==null?void 0:_.lists.map(e=>({...{wechat_user_id:e.wechat_user_id,main_product_name:e.main_product_name,product_name:e.product_name,nickname:e.nickname,bind_account_count:e.bind_account_count,amount:e.amount,oaid:e.oaid,ip:e.ip,ip_address:e.ip_address,updated_at:e.updated_at},updated_at:R(e.updated_at).format("YYYY-MM-DD HH:mm:ss")}))}).catch(()=>{})},ue=()=>{oe().then(t=>{P.value=t.data,X.value=t.data}).catch(()=>{})},M=t=>{ne({main_product_id:t}).then(_=>{B.value=_.data}).catch(()=>{})},j=(t,l)=>{de({id:t,status:l}).then(e=>{e.status==200?(W.success("\u5BA1\u6838\u6210\u529F\uFF01"),h(d)):W.error(e.message)}).catch(()=>{})},_e={name:"basetable",setup(){b.value="",typeof u.value=="number"&&(v.value=u.value),u.value="";const t=ee();t.params.product_name!==""?(u.value=t.params.main_product_name,b.value=t.params.product_name,d.product_id=t.params.product_id,v.value=t.params.main_product_id,M(t.params.main_product_id)):(delete d.product_id,t.params.main_product_name!==""&&(u.value=t.params.main_product_name,v.value=t.params.main_product_id,M(t.params.main_product_id))),d.status=1,h(d),ue();const l=o=>{if(o!==null){let n=[];o.forEach(i=>{i!=null&&n.push(R(i).format("YYYY-MM-DD HH:mm:ss"))});let g={...d,start_date:n[0],end_date:n[1]};d.start_date=n[0],d.end_date=n[1],h(g)}else h(d)},_=ae();return{tableData:J,widthdrawDetail:y,handleDelete:o=>{q.confirm("\u786E\u5B9A\u8981\u62D2\u7EDD\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{j(o,4)}).catch(()=>{})},handleOk:o=>{q.confirm("\u786E\u5B9A\u8981\u540C\u610F\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{j(o,2)}).catch(()=>{})},product_type:le,options:P,suboptions:B,addoptions:X,main_product_name_selected:u,product_name_selected:b,getProductAndDataList:()=>{b.value="",u.value==-1||({...d,main_product_id:u.value},d.product_id="",v.value=u.value,M(u.value))},getDataById:()=>{if(b.value==-1){const o={...d,product_id:u.value};o.product_id==-1&&delete o.product_id,h(o)}else{const o={...d,product_id:b.value};d.product_id=b.value,o.product_id==-1&&delete o.product_id,h(o)}},query:d,handlePageChange:o=>{if(d.page_index=o,u.value==-1)h(d);else if(u.value>0)if(b.value==-1){const n={product:u.value,...d};h(n)}else if(b.value>0){const n={...d,product_id:b.value};h(n)}else{const n={...d,product_id:u.value};h(n)}else{const n={...d};h(n)}},pageTotal:Q,handleDate:l,dateRange:L,isShow:re,withDrawRecord:(o,n,g)=>{typeof n=="number"?B.value.map(i=>{if(i.product_id==n){o=i.main_product_name,n=i.product_name;return}}):typeof o=="number"&&n==""&&P.value.map(i=>{i.id==o&&(o=i.main_product_name)}),L.value=null,_.push({name:"withdrawreview",params:{main_product_name:o,product_name:n,product_id:g,main_product_id:v.value}})},ExcelData:K,main_product_id:v,getExcelData:ce,goback:()=>{L.value=null,_.go(-1)}}},methods:{withdrawDetail(t){this.$router.push({name:"userdetail",params:{wechat_user_id:t}})}}},se={class:"crumbs"},ie=f("\u98CE\u63A7\u7CFB\u7EDF"),pe=f("\u7528\u6237\u7BA1\u7406"),me=f("\u4EBA\u5DE5\u5BA1\u6838"),he={class:"container"},be={class:"handle-box"},fe=f("\u8FD4\u56DE"),ge=f("\u8BE6\u60C5 "),ve=f("\u540C\u610F "),we=f("\u62D2\u7EDD "),De={class:"pagination"};function ke(t,l,_,e,H,I){const D=m("el-breadcrumb-item"),z=m("el-breadcrumb"),C=m("el-option"),x=m("el-select"),o=m("el-date-picker"),n=m("el-button"),g=m("el-form-item"),i=m("el-form"),p=m("el-table-column"),Z=m("el-table"),N=m("el-pagination");return w(),V("div",null,[k("div",se,[a(z,{separator:"/"},{default:c(()=>[a(D,null,{default:c(()=>[ie]),_:1}),a(D,null,{default:c(()=>[pe]),_:1}),a(D,null,{default:c(()=>[me]),_:1})]),_:1})]),k("div",he,[k("div",be,[a(x,{modelValue:e.main_product_name_selected,"onUpdate:modelValue":l[0]||(l[0]=r=>e.main_product_name_selected=r),placeholder:"\u9879\u76EE",class:"m-2",onChange:e.getProductAndDataList},{default:c(()=>[(w(!0),V(S,null,T(e.options,r=>(w(),U(C,{key:r.id,label:r.main_product_name,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),a(x,{modelValue:e.product_name_selected,"onUpdate:modelValue":l[1]||(l[1]=r=>e.product_name_selected=r),placeholder:"\u5E94\u7528",class:"m-2",onChange:e.getDataById},{default:c(()=>[(w(!0),V(S,null,T(e.suboptions,r=>(w(),U(C,{key:r.product_id,label:r.product_name,value:r.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),a(o,{modelValue:e.dateRange,"onUpdate:modelValue":l[2]||(l[2]=r=>e.dateRange=r),type:"daterange","range-separator":"\u2192",onChange:e.handleDate,"start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue","onChange"]),te(' <el-button type="primary" disabled  @click="withDrawRecord(main_product_name_selected,product_name_selected,query.product_id)">\u4EBA\u5DE5\u5BA1\u6838\u8BB0\u5F55</el-button> '),a(n,{type:"primary",onClick:e.goback},{default:c(()=>[fe]),_:1},8,["onClick"])]),a(i,{model:e.widthdrawDetail,inline:!0},{default:c(()=>[a(g,{label:"\u672A\u5BA1\u8BA2\u5355\u6570"},{default:c(()=>[f(Y(e.widthdrawDetail.unaudit_orders_count),1)]),_:1}),a(g,{label:"\u7533\u8BF7\u4EBA\u6570"},{default:c(()=>[f(Y(e.widthdrawDetail.apply_users_count),1)]),_:1}),a(g,{label:"\u672A\u5BA1\u603B\u91D1\u989D"},{default:c(()=>[f(Y(e.widthdrawDetail.unaudit_reward_sum),1)]),_:1})]),_:1},8,["model"]),a(Z,{data:e.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:c(()=>[a(p,{prop:"wechat_user_id",label:"\u7528\u6237ID"}),a(p,{prop:"main_product_name",label:"\u9879\u76EE"}),a(p,{prop:"product_name",label:"\u5E94\u7528"}),a(p,{prop:"nickname",label:"\u7528\u6237\u540D"}),a(p,{prop:"bind_account_count",label:"\u8BBE\u5907\u5173\u8054\u8D26\u53F7"}),a(p,{prop:"amount",label:"\u7533\u8BF7\u63D0\u73B0\u91D1\u989D"}),a(p,{prop:"oaid",label:"\u6570\u76DFid"}),a(p,{prop:"ip",label:"ip"}),a(p,{prop:"ip_address",label:"ip\u5730\u5740"}),a(p,{prop:"updated_at",sortable:"",label:"\u7533\u8BF7\u65F6\u95F4"}),a(p,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:c(r=>[a(n,{type:"text",icon:"el-icon-link",onClick:E=>I.withdrawDetail(r.row.wechat_user_id)},{default:c(()=>[ge]),_:2},1032,["onClick"]),A(a(n,{type:"text",class:"agree",icon:"el-icon-edit",onClick:E=>e.handleOk(r.row.id)},{default:c(()=>[ve]),_:2},1032,["onClick"]),[[O,r.row.status==1]]),A(a(n,{type:"text",class:"red",icon:"el-icon-delete",onClick:E=>e.handleDelete(r.row.id)},{default:c(()=>[we]),_:2},1032,["onClick"]),[[O,r.row.status==1]])]),_:1})]),_:1},8,["data"]),k("div",De,[a(N,{background:"",layout:"total, prev, pager, next","current-page":e.query.page_index,"page-size":e.query.page_size,total:e.pageTotal,onCurrentChange:e.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])])}const Le=$(_e,[["render",ke],["__scopeId","data-v-373f0996"],["__file","/Users/apple/Desktop/project-b github/project-b/src/views/WithdrawDetail.vue"]]);export{Le as default};
