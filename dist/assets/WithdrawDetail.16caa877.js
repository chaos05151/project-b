import{_ as ne,g as s,f as U,P as de,u as se,r as i,o as f,c as C,a as w,b as t,w as d,F as W,I as E,H as N,D as R,e as v,t as x,J as S,K as T,L as $,E as j}from"./index.03d21809.js";import{a as ue,b as re}from"./product.56b44d03.js";import{h as F}from"./moment.9709ab41.js";import{l as ce,m as _e}from"./user.83676d27.js";import"./request.b7a5dcc4.js";const ie={class:"crumbs"},pe=v("\u98CE\u63A7\u7CFB\u7EDF"),me=v("\u7528\u6237\u7BA1\u7406"),ve=v("\u4EBA\u5DE5\u5BA1\u6838"),he={class:"container"},fe={class:"handle-box"},be=v("\u8FD4\u56DE"),ge=v("\u8BE6\u60C5 "),we=v("\u540C\u610F "),ke=v("\u62D2\u7EDD "),De={class:"pagination"},ye={__name:"WithdrawDetail",setup(Ce){const n=s(""),u=s(""),V=s([]);s(),s("\u9879\u76EE");const h=U({}),L=s(0),l=U({product_id:"",page_index:1,page_size:10,status:1});let b=s(""),Y=s([]),M=s([]),q=s([]);const k=s();s(!1);const r=e=>{ce(e).then(a=>{var c;return V.value=(c=a.data)==null?void 0:c.lists.map(m=>({...m,updated_at:F(m.updated_at).format("YYYY-MM-DD HH:mm:ss")})),L.value=a.data.total_count,h.apply_users_count=a.data.apply_users_count,h.unaudit_orders_count=a.data.unaudit_orders_count,h.unaudit_reward_sum=a.data.unaudit_reward_sum,e={...e,page_size:a.data.total_count},e}).catch(()=>{})},A=()=>{ue().then(e=>{Y.value=e.data,q.value=e.data}).catch(()=>{})},D=e=>{re({main_product_id:e}).then(c=>{M.value=c.data}).catch(()=>{})},P=(e,a)=>{_e({id:e,status:a}).then(m=>{m.status==200?(j.success("\u5BA1\u6838\u6210\u529F\uFF01"),r(l)):j.error(m.message)}).catch(()=>{})};u.value="",typeof n.value=="number"&&(b.value=n.value),n.value="";const p=de();p.params.product_name!==""?(n.value=p.params.main_product_name,u.value=p.params.product_name,l.product_id=p.params.product_id,b.value=p.params.main_product_id,D(p.params.main_product_id)):(delete l.product_id,p.params.main_product_name!==""&&(n.value=p.params.main_product_name,b.value=p.params.main_product_id,D(p.params.main_product_id))),l.status=1,r(l),A();const J=e=>{if(e!==null){let a=[];e.forEach(m=>{m!=null&&a.push(F(m).format("YYYY-MM-DD HH:mm:ss"))});let c={...l,start_date:a[0],end_date:a[1]};l.start_date=a[0],l.end_date=a[1],r(c)}else r(l)},B=se(),K=()=>{k.value=null,B.go(-1)},O=e=>{$.confirm("\u786E\u5B9A\u8981\u540C\u610F\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{P(e,2)}).catch(()=>{})},G=e=>{$.confirm("\u786E\u5B9A\u8981\u62D2\u7EDD\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{P(e,4)}).catch(()=>{})},Q=()=>{u.value="",n.value==-1||({...l,main_product_id:n.value},l.product_id="",b.value=n.value,D(n.value))},X=e=>{if(l.page_index=e,n.value==-1)r(l);else if(n.value>0)if(u.value==-1){const a={product:n.value,...l};r(a)}else if(u.value>0){const a={...l,product_id:u.value};r(a)}else{const a={...l,product_id:n.value};r(a)}else{const a={...l};r(a)}},Z=()=>{if(u.value==-1){const e={...l,product_id:n.value};e.product_id==-1&&delete e.product_id,r(e)}else{const e={...l,product_id:u.value};l.product_id=u.value,e.product_id==-1&&delete e.product_id,r(e)}},ee=e=>{B.push({name:"userdetail",params:{wechat_user_id:e}})};return(e,a)=>{const c=i("el-breadcrumb-item"),m=i("el-breadcrumb"),z=i("el-option"),H=i("el-select"),ae=i("el-date-picker"),g=i("el-button"),y=i("el-form-item"),te=i("el-form"),_=i("el-table-column"),le=i("el-table"),oe=i("el-pagination");return f(),C("div",null,[w("div",ie,[t(m,{separator:"/"},{default:d(()=>[t(c,null,{default:d(()=>[pe]),_:1}),t(c,null,{default:d(()=>[me]),_:1}),t(c,null,{default:d(()=>[ve]),_:1})]),_:1})]),w("div",he,[w("div",fe,[t(H,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=o=>n.value=o),placeholder:"\u9879\u76EE",class:"m-2",onChange:Q},{default:d(()=>[(f(!0),C(W,null,E(R(Y),o=>(f(),N(z,{key:o.id,label:o.main_product_name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(H,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=o=>u.value=o),placeholder:"\u5E94\u7528",class:"m-2",onChange:Z},{default:d(()=>[(f(!0),C(W,null,E(R(M),o=>(f(),N(z,{key:o.product_id,label:o.product_name,value:o.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(ae,{modelValue:k.value,"onUpdate:modelValue":a[2]||(a[2]=o=>k.value=o),type:"daterange","range-separator":"\u2192",onChange:J,"start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue"]),t(g,{type:"primary",onClick:K},{default:d(()=>[be]),_:1})]),t(te,{model:h,inline:!0},{default:d(()=>[t(y,{label:"\u672A\u5BA1\u8BA2\u5355\u6570"},{default:d(()=>[v(x(h.unaudit_orders_count),1)]),_:1}),t(y,{label:"\u7533\u8BF7\u4EBA\u6570"},{default:d(()=>[v(x(h.apply_users_count),1)]),_:1}),t(y,{label:"\u672A\u5BA1\u603B\u91D1\u989D"},{default:d(()=>[v(x(h.unaudit_reward_sum),1)]),_:1})]),_:1},8,["model"]),t(le,{data:V.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:d(()=>[t(_,{prop:"wechat_user_id",label:"\u7528\u6237ID"}),t(_,{prop:"main_product_name",label:"\u9879\u76EE"}),t(_,{prop:"product_name",label:"\u5E94\u7528"}),t(_,{prop:"nickname",label:"\u7528\u6237\u540D"}),t(_,{prop:"bind_account_count",label:"\u8BBE\u5907\u5173\u8054\u8D26\u53F7"}),t(_,{prop:"amount",label:"\u7533\u8BF7\u63D0\u73B0\u91D1\u989D"}),t(_,{prop:"oaid",label:"\u6570\u76DFid"}),t(_,{prop:"ip",label:"ip"}),t(_,{prop:"ip_address",label:"ip\u5730\u5740"}),t(_,{prop:"updated_at",sortable:"",label:"\u7533\u8BF7\u65F6\u95F4"}),t(_,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:d(o=>[t(g,{type:"text",icon:"el-icon-link",onClick:I=>ee(o.row.wechat_user_id)},{default:d(()=>[ge]),_:2},1032,["onClick"]),S(t(g,{type:"text",class:"agree",icon:"el-icon-edit",onClick:I=>O(o.row.id)},{default:d(()=>[we]),_:2},1032,["onClick"]),[[T,o.row.status==1]]),S(t(g,{type:"text",class:"red",icon:"el-icon-delete",onClick:I=>G(o.row.id)},{default:d(()=>[ke]),_:2},1032,["onClick"]),[[T,o.row.status==1]])]),_:1})]),_:1},8,["data"]),w("div",De,[t(oe,{background:"",layout:"total, prev, pager, next","current-page":l.page_index,"page-size":l.page_size,total:L.value,onCurrentChange:X},null,8,["current-page","page-size","total"])])])])}}},Pe=ne(ye,[["__scopeId","data-v-373f0996"],["__file","/Users/apple/Desktop/project-b github/project-b/src/views/WithdrawDetail.vue"]]);export{Pe as default};
