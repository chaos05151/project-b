import{_ as Z,u as $,C as T,r,D as U,a7 as ee,w as ae,e as m,g as te,a as v,c as L,t as y,j as n,k as _,h as k,p as b,q as oe,T as le,b as ne,l as N,F as A,m as R,z as h,v as de}from"./index.3fee5d13.js";import{h as M}from"./moment.9709ab41.js";import{k as W}from"./user.18d2d274.js";import{e as se}from"./export2excel.a0c92898.js";import{u as ue}from"./user.9a164dae.js";import{s as E}from"./showButton.83421764.js";const re=E("service:withdrawdetailall:view"),ce=E("service:withdrawdetailall:export"),ie=E("service:withdrawdetailall:detail"),P=$(),_e=ue();T();const c=r(""),F=r(!0),i=r(""),J=r([]),B=r([]);let C=r("");const pe=r("\u9879\u76EE"),V=U({}),z=r({}),w=r(0),e=U({main_product_id:P.mainProductId,page_index:1,page_size:10,status:3,product_id:void 0,start_date:void 0,end_date:void 0});let O=r([]),G=r([]),K=r([]);const j=r(),me=r(!1),ve=r(3),he=r([{value:1,label:"\u5F85\u5BA1\u6838"},{value:2,label:"\u63D0\u73B0\u4E2D"},{value:3,label:"\u5DF2\u63D0\u73B0"},{value:4,label:"\u62D2\u7EDD\u63D0\u73B0"},{value:5,label:"\u63D0\u73B0\u5931\u8D25"}]),p=l=>{W(l).then(s=>{var f;s.status==200&&(F.value=!1,J.value=(f=s.data)==null?void 0:f.lists.map(a=>({...a,updated_at:M(a.updated_at).format("YYYY-MM-DD HH:mm:ss"),status:a.status==1?"\u5F85\u5BA1\u6838":a.status==2?"\u63D0\u73B0\u4E2D":a.status==3?"\u5DF2\u63D0\u73B0":a.status==4?"\u62D2\u7EDD\u63D0\u73B0":a.status==5?"\u63D0\u73B0\u5931\u8D25":""})),w.value=s.data.total_count,V.apply_users_count=s.data.apply_users_count,V.unaudit_orders_count=s.data.unaudit_orders_count,V.unaudit_reward_sum=s.data.unaudit_reward_sum,z.value=JSON.parse(JSON.stringify(l)))}).catch(s=>{}).then(()=>{})},fe=()=>{le().then(l=>{O.value=l.data,K.value=l.data}).catch(()=>{})},x=l=>{ne({main_product_id:l}).then(f=>{G.value=f.data}).catch(()=>{})},ge=l=>{e.status=l,console.log(e)},be={name:"basetable",setup(){c.value=P.mainProductId,i.value="";const l=ee(),s=T();ae(()=>P.mainProductId,(t,o)=>{console.log(t),c.value=t,i.value="",e.product_id=void 0,e.start_date=void 0,e.end_date=void 0,D()}),l.params.product_name!==""?(c.value=l.params.main_product_name,i.value=l.params.product_name,e.product_id=l.params.product_id,C.value=l.params.main_product_id,x(l.params.main_product_id)):l.params.main_product_name!==""?(c.value=l.params.main_product_name,e.main_product_id=l.params.main_product_id,C.value=l.params.main_product_id,x(l.params.main_product_id)):x(),c.value=P.mainProductId,console.log(c.value,i.value);const f=()=>{s.go(-1)};p(e),fe();const a=()=>{p(e)},S=()=>{i.value="",e.product_id=void 0,e.start_date=void 0,e.end_date=void 0,j.value=null,e.status=3,e.page_index=1,e.page_size=10,p(e)},q=t=>{if(t!==null){let o=[];t.forEach(d=>{d!=null&&o.push(M(d).format("YYYY-MM-DD HH:mm:ss"))}),e.start_date=o[0],e.end_date=o[1]}else e.start_date=void 0,e.end_date=void 0},g=()=>{z.value.page_size=w.value?w.value<=1e4?w.value:1e4:10,W(z.value).then(t=>{if(t.status==200){B.value=t.data.lists.map(d=>({wechat_user_id:d.wechat_user_id,main_product_name:d.main_product_name,product_name:d.product_name,nickname:d.nickname,bind_account_count:d.bind_account_count,amount:d.amount,oaid:d.oaid,ip:d.ip,ip_address:d.ip_address,updated_at:M(d.updated_at).format("YYYY-MM-DD HH:mm:ss"),status:d.status==1?"\u5F85\u5BA1\u6838":d.status==2?"\u63D0\u73B0\u4E2D":d.status==3?"\u5DF2\u63D0\u73B0":d.status==4?"\u62D2\u7EDD\u63D0\u73B0":d.status==5?"\u63D0\u73B0\u5931\u8D25":""}));const o=["\u7528\u6237ID","\u9879\u76EE\u540D\u79F0","\u5E94\u7528\u540D\u79F0","\u7528\u6237\u540D","\u8BBE\u5907\u5173\u8054\u8D26\u53F7","\u7533\u8BF7\u63D0\u73B0\u91D1\u989D","\u6570\u76DFid","ip","ip\u5730\u5740","\u63D0\u73B0\u65F6\u95F4","\u63D0\u73B0\u72B6\u6001"];console.log(B.value),se(B.value,"\u63D0\u73B0\u8BB0\u5F55",o,"\u63D0\u73B0\u8BB0\u5F55")}else t.message?N.error(t.message):N.error("\u540E\u7AEFapi\u63A5\u53E3\u5F02\u5E38\uFF01")})},D=()=>{if(i.value="",c.value==-1)p(e);else{const t={...e,main_product_id:c.value};e.product_id="",C.value=c.value,p(t),x(c.value)}};return{loading:F,button_view:re,button_export:ce,button_detail:ie,tableData:J,widthdrawDetail:V,product_type:pe,options:O,suboptions:G,addoptions:K,main_product_name_selected:c,product_name_selected:i,getProductAndDataList:D,getDataById:()=>{if(i.value==-1){const t={...e,product_id:i.value};e.product_id=i.value,t.product_id==-1&&(delete t.product_id,e.product_id=void 0)}else{const t={...e,product_id:i.value};e.product_id=i.value,t.product_id==-1&&(delete t.product_id,e.product_id=void 0)}},query:e,handlePageChange:t=>{if(e.page_index=t,c.value==-1)p(e);else if(c.value>0)if(i.value==-1){const o={main_product_id:c.value,...e};p(o)}else if(i.value>0){const o={...e,product_id:i.value};p(o)}else{const o={...e,main_product_id:c.value};p(o)}else{const o={...e};p(o)}},pageTotal:w,handleDate:q,dateRange:j,getExcel:g,isShow:me,goback:f,main_product_id:C,status_selectd:ve,statusList:he,handleStatus:ge,withdrawDetail:t=>{s.push({name:"userdetail"}),_e.setuserDetail(t)},query_data:a,reset:S}}},we={class:"crumbs"},De=h("\u98CE\u63A7\u7CFB\u7EDF"),ye=h("\u7528\u6237\u7BA1\u7406"),ke=h("\u63D0\u73B0\u8BB0\u5F55"),Ce={class:"container"},xe={class:"handle-box"},Pe=h("\u5BFC\u51FA"),Ve=h("\u67E5\u8BE2"),Ye=h("\u91CD\u7F6E"),Ie=h("\u8BE6\u60C5 "),Le={class:"pagination"};function Be(l,s,f,a,S,q){const g=m("el-breadcrumb-item"),D=m("el-breadcrumb"),Y=m("el-option"),I=m("el-select"),H=m("el-date-picker"),t=m("el-button"),o=m("el-table-column"),d=m("el-table"),Q=m("el-pagination"),X=te("loading");return v(),L("div",null,[y("div",we,[n(D,{separator:"/"},{default:_(()=>[n(g,null,{default:_(()=>[De]),_:1}),n(g,null,{default:_(()=>[ye]),_:1}),n(g,null,{default:_(()=>[ke]),_:1})]),_:1})]),y("div",Ce,[y("div",xe,[k("v-if",!0),n(I,{style:{width:"200px"},modelValue:a.product_name_selected,"onUpdate:modelValue":s[1]||(s[1]=u=>a.product_name_selected=u),placeholder:"\u5E94\u7528",class:"m-2",onChange:a.getDataById},{default:_(()=>[(v(!0),L(A,null,R(a.suboptions,u=>(v(),b(Y,{key:u.product_id,label:u.product_name,value:u.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),n(H,{modelValue:a.dateRange,"onUpdate:modelValue":s[2]||(s[2]=u=>a.dateRange=u),type:"daterange","range-separator":"\u2192",onChange:a.handleDate,"start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue","onChange"]),n(I,{modelValue:a.status_selectd,"onUpdate:modelValue":s[3]||(s[3]=u=>a.status_selectd=u),placeholder:"\u72B6\u6001",class:"m-2",style:{width:"105px"},onChange:a.handleStatus},{default:_(()=>[(v(!0),L(A,null,R(a.statusList,u=>(v(),b(Y,{key:u.value,value:u.value,label:u.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","onChange"]),a.button_export?(v(),b(t,{key:1,type:"primary",onClick:a.getExcel},{default:_(()=>[Pe]),_:1},8,["onClick"])):k("v-if",!0),n(t,{type:"primary",onClick:a.query_data},{default:_(()=>[Ve]),_:1},8,["onClick"]),n(t,{type:"info",onClick:a.reset},{default:_(()=>[Ye]),_:1},8,["onClick"])]),a.button_view?oe((v(),b(d,{key:0,data:a.tableData,border:""},{default:_(()=>[n(o,{prop:"wechat_user_id",label:"\u7528\u6237ID"}),n(o,{prop:"main_product_name",label:"\u9879\u76EE\u540D\u79F0"}),n(o,{prop:"product_name",label:"\u5E94\u7528\u540D\u79F0"}),n(o,{prop:"nickname",label:"\u7528\u6237\u540D"}),n(o,{prop:"bind_account_count",label:"\u8BBE\u5907\u5173\u8054\u8D26\u53F7"}),n(o,{prop:"amount",label:"\u7533\u8BF7\u63D0\u73B0\u91D1\u989D"}),n(o,{prop:"oaid",label:"\u6570\u76DFid"}),n(o,{prop:"ip",label:"ip"}),n(o,{prop:"ip_address",label:"ip\u5730\u5740"}),n(o,{sortable:"",label:"\u63D0\u73B0\u65F6\u95F4"},{default:_(u=>[h(de(u.row.status==2?"":u.row.updated_at),1)]),_:1}),n(o,{prop:"status",label:"\u72B6\u6001"}),n(o,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:_(u=>[a.button_detail?(v(),b(t,{key:0,type:"text",icon:"el-icon-link",onClick:Me=>a.withdrawDetail(u.row.wechat_user_id)},{default:_(()=>[Ie]),_:2},1032,["onClick"])):k("v-if",!0)]),_:1})]),_:1},8,["data"])),[[X,a.loading]]):k("v-if",!0),y("div",Le,[n(Q,{background:"",layout:"total, prev, pager, next","current-page":a.query.page_index,"page-size":a.query.page_size,total:a.pageTotal,onCurrentChange:a.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])])}const Ae=Z(be,[["render",Be],["__scopeId","data-v-5311a1dc"],["__file","/Users/apple/Desktop/project-b/relationship.b/src/views/WithdrawDetailAll.vue"]]);export{Ae as default};
