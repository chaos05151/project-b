import{_ as ta,d as oa,r as n,o as sa,i as ha,w as da,a as p,c as y,n as va,s as ua,u as ma,f as fa,b as aa,e as v,g as ba,h as m,j as o,k as s,l as Q,F as H,m as G,p as U,q as W,t as e,v as b,x as Y,y as w,z as R,A as wa,B as ga}from"./index.3fee5d13.js";import{h as ea}from"./moment.9709ab41.js";const Aa=oa({__name:"line-chart",props:{height:{type:String,default:"100"},chartOption:{type:Object,default:{xAxis:{show:!1,data:[]},yAxis:{show:!1},series:[{type:"line",smooth:!0,data:[23,24,18,25,7,28,5,1],areaStyle:{color:"#a87e3f",opacity:1},lineStyle:{width:0},showSymbol:!1}]}}},setup(_){const g=_,d=n(null);let t=null;return sa(()=>{t=ha(d.value),window.addEventListener("resize",function(){t.resize()})}),da(()=>g.chartOption,()=>{t.setOption(g.chartOption)},{deep:!0}),(I,J)=>(p(),y("div",{class:"chart",ref_key:"myChart",ref:d,style:va({height:_.height+"px"})},null,4))}}),B=ta(Aa,[["__file","/Users/apple/Desktop/project-b/relationship.b/src/components/line-chart.vue"]]),ya=_=>ua({url:"admin/v1/data_center/data_centers",method:"get",params:_}),xa=_=>ua({url:"admin/v1/data_center/data_centers/get_today_user_nums",method:"get",params:_}),N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAMCAYAAABbayygAAAAi0lEQVR4XmNgAIH1GgoMmzUngGmCYLNWA8MWrfuEFW9VNQAq/A9RrCCALo0A6w0EoAr/g03HC7Zov4cqfo8uBZIsAHokAOw2kLUwU0FO2azjwLBVJx+iEKwAbhImRnHGJo0EDAUQPB+hCAY2a09AVaSJx/dbNPdDFb7HH55g9wJN2qIRjy6FCXBYBwDI5FTRH+jRXwAAAABJRU5ErkJggg==",L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAMCAYAAABbayygAAAAl0lEQVR4XmNgQANf7e3nv3dwUEAXRwFf7ezqgQr/A/F5oGIBdHkw+OrgEABVBMbf7Oz60dUwgKwCSt5HVghWbGtbgKIQmyIofv/FwcEAogjirvVAq/JBEjBFQAUTvtjZLQDJYbgX2WQUCXSAZOV8dDk4ALkFpvA7vnAEKkwAK3RwaECXQwFAReeBilGDAx2AfPUf3WdoAAA3nHGkCXdLXwAAAABJRU5ErkJggg==";const h=_=>(wa("data-v-22ba47ca"),_=_(),ga(),_),Ea=h(()=>e("div",{class:"index-title"},"\u6570\u636E\u6982\u89C8",-1)),ka=R("\u67E5\u8BE2"),Ba=R("\u91CD\u7F6E"),Ca={class:"card-item"},Da=h(()=>e("div",{class:"card-top-header"},[e("div",{class:"card-top-title"},"\u65B0\u589E\u7528\u6237\u6570")],-1)),Sa={class:"card-content"},Fa={class:"card-footer"},Va={class:"card-top-num line1"},Oa=["title"],Ma=h(()=>e("span",{class:"card-footer-desc"},"\u8F83\u6628\u65E5",-1)),Ua={class:"chart-warp"},Ya={class:"card-item bg-green"},Na=h(()=>e("div",{class:"card-top-header"},[e("div",{class:"card-top-title"},"\u65B0\u589E\u7528\u6237\u5F02\u5E38\u5360\u6BD4")],-1)),La={class:"card-content"},Ra={class:"card-footer"},Ia={class:"card-top-num line1"},Ja=["title"],ja=h(()=>e("span",{class:"card-footer-desc"},"\u8F83\u6628\u65E5",-1)),za={class:"chart-warp"},Pa={class:"card-item bg-blue"},Xa=h(()=>e("div",{class:"card-top-header"},[e("div",{class:"card-top-title"},"\u65B0\u589E\u7528\u6237\u62C9\u9ED1\u5360\u6BD4")],-1)),Qa={class:"card-content"},Ha={class:"card-footer"},Ga={class:"card-top-num line1"},Wa=["title"],Ka=h(()=>e("span",{class:"card-footer-desc"},"\u8F83\u6628\u65E5",-1)),qa={class:"chart-warp"},Ta={class:"card-item bg-yellow"},Za=h(()=>e("div",{class:"card-top-header"},[e("div",{class:"card-top-title"},"\u65B0\u589E\u7528\u6237\u63D0\u73B0\u91D1\u989D")],-1)),$a={class:"card-content"},ae={class:"card-footer"},ee={class:"card-top-num line1"},te=["title"],oe=h(()=>e("span",{class:"card-footer-desc"},"\u8F83\u6628\u65E5",-1)),se={class:"chart-warp"},de=h(()=>e("div",{class:"index-title"},[R("\u65B0\u589E\u7528\u6237\u7EDF\u8BA1 "),m("                <span>(\u65B0\u589E\u7528\u623724\u5C0F\u65F6\u5185\u7684\u6570\u636E\u60C5\u51B5)</span>")],-1)),ue=h(()=>e("div",{class:"index-title"},[R("\u6240\u6709\u7528\u6237\u5360\u6BD4 "),m("                <span>(\u622A\u6B62\u4ECA\u65E5\u6570\u636E\u60C5\u51B5)</span>")],-1)),re=oa({__name:"Dashboard",setup(_){const g=ma();n([]),n("");const d=n({product_id:"",channel:"",version_b:"",statistical_date:ea().format("YYYY-MM-DD")}),t=n({user_num:0,add_user_num:0,add_user_num_diff:0,add_exception_user:0,add_exception_proportion:0,add_blackout_user:0,add_blackout_user_proportion:0,add_withdrawal_amount:0,add_withdrawal_amount_diff:0,blackout_user:0,exception_user:0,add_exception_proportion_diff:0,add_blackout_user_proportion_diff:0,add_withdrawal_number:0,add_withdrawal_number_diff:0}),I=n([]),J=n({}),K=n({}),q=n({}),T=n({});n({});const Z=n({}),$=n({});n([]);const x=n([]),V=n([]),C=n([]),D=n(!1),E=n(!1);n(!1);const f=n({user_num:0,exception_user:0,blackout_user:0}),j=()=>{pa(),_a()},ra=()=>{x.value.length>0&&(d.value.product_id=x.value[0].product_id),d.value.channel="",d.value.version_b="",d.value.statistical_date=ea().format("YYYY-MM-DD"),j()};sa(()=>{ia()});const la=a=>{aa({main_product_id:a}).then(r=>{if(r.status==200)return x.value=r.data,d.value.product_id=r.data[0].product_id,!0})},na=a=>{d.value.channel="",d.value.version_b="",C.value=[];let u=JSON.parse(JSON.stringify(I.value));u.forEach(r=>{String(a)==r.value&&(V.value=r.children)}),console.log(u)},ia=()=>{fa().then(a=>{if(a.status==200){I.value=a.data;let u={main_product_id:g.mainProductId};aa(u).then(r=>{r.status==200&&(x.value=r.data,d.value.product_id=r.data[0].product_id,j())})}}).catch(a=>{console.log(a)})},_a=()=>{E.value||(E.value=!0,xa({main_product_id:g.mainProductId,product_id:d.value.product_id}).then(a=>{E.value=!1,a.status==200&&(f.value=a.data,$.value={tooltip:{trigger:"item"},legend:{},color:["#1c73f6","#f0f2f5","#f1136a"],graphic:[{type:"text",left:"center",top:"40%",style:{text:"\u603B\u7528\u6237",textAlign:"center",fill:"#666",fontSize:15,fontWeight:700}},{type:"text",left:"center",top:"50%",style:{text:f.value.user_num,textAlign:"center",fill:"#333",fontSize:18,fontWeight:700}}],series:[{name:"\u7528\u6237",type:"pie",radius:["55%","70%"],data:[{value:f.value.blackout_user,name:"\u5168\u90E8\u62C9\u9ED1\u7528\u6237"},{value:f.value.user_num-f.value.blackout_user,name:"\u603B\u6570"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,formatter:"{d}%"},labelLine:{show:!0}}}},{name:"\u7528\u6237",type:"pie",radius:["35%","50%"],data:[{value:f.value.exception_user,name:"\u5168\u90E8\u5F02\u5E38\u7528\u6237\u603B\u6570"},{value:f.value.user_num-f.value.exception_user,name:"\u603B\u6570"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,formatter:"{d}%"},labelLine:{show:!0}}}}]})}).catch(a=>{E.value=!1,Q.error(a.message)}))};da(()=>g.getMainProductId,async(a,u)=>{d.value.product_id="",d.value.channel="",d.value.version_b="",x.value=[],V.value=[],C.value=[],la(a)});const ca=a=>{C.value=[],d.value.version_b="",JSON.parse(JSON.stringify(V.value)).forEach(r=>{(r.value=a)&&(C.value=r.children)})},pa=async()=>{try{if(D.value)return;D.value=!0;const a=await ya({main_product_id:g.mainProductId,product_id:d.value.product_id,channel:d.value.channel,version_b:d.value.version_b,statistical_date:d.value.statistical_date});if(a.status==200){if(a.data.length==0)return;t.value.add_user_num=a.data[0].add_user_num,t.value.add_user_num_diff=a.data[0].add_user_num,t.value.add_exception_user=a.data[0].add_exception_user,t.value.add_exception_proportion=a.data[0].add_exception_proportion,t.value.add_exception_proportion_diff=a.data[0].add_exception_proportion,t.value.add_blackout_user=a.data[0].add_blackout_user,t.value.add_blackout_user_proportion=a.data[0].add_blackout_user_proportion,t.value.add_blackout_user_proportion_diff=a.data[0].add_blackout_user_proportion,t.value.add_withdrawal_amount=a.data[0].add_withdrawal_amount,t.value.add_withdrawal_amount_diff=a.data[0].add_withdrawal_amount,t.value.add_withdrawal_number=a.data[0].add_withdrawal_number,t.value.add_withdrawal_number_diff=a.data[0].add_withdrawal_number,a.data.length>1&&(t.value.add_user_num_diff=a.data[0].add_user_num-a.data[1].add_user_num,t.value.add_withdrawal_number_diff=a.data[0].add_withdrawal_number-a.data[1].add_withdrawal_number,t.value.add_withdrawal_amount_diff=a.data[0].add_withdrawal_amount-a.data[1].add_withdrawal_amount,t.value.add_exception_proportion_diff=a.data[0].add_exception_proportion-a.data[1].add_exception_proportion,t.value.add_blackout_user_proportion_diff=a.data[0].add_blackout_user_proportion-a.data[1].add_blackout_user_proportion);const u=a.data.map(l=>l.statistical_date).reverse(),r=a.data.map(l=>l.add_user_num).reverse(),O=a.data.map(l=>l.user_num).reverse(),A=a.data.map(l=>l.exception_user).reverse(),M=a.data.map(l=>l.add_exception_user).reverse(),c=a.data.map(l=>l.blackout_user).reverse(),S=a.data.map(l=>l.add_blackout_user).reverse(),k=a.data.map(l=>l.add_withdrawal_amount).reverse(),z=a.data.map(l=>l.add_withdrawal_number).reverse();J.value={xAxis:{show:!1,data:u},yAxis:{show:!1},series:[{type:"line",smooth:!0,data:r,lineStyle:{width:2},showSymbol:!1}]},K.value={xAxis:{show:!1,data:u},yAxis:{show:!1},color:["#4eab41","#86df6c"],series:[{type:"bar",data:r,itemStyle:{normal:{barBorderRadius:[10,10,0,0]}}},{type:"bar",data:M,itemStyle:{normal:{barBorderRadius:[10,10,0,0]}}}]},q.value={xAxis:{show:!1,data:u},yAxis:{show:!1},series:[{type:"line",smooth:!0,data:S,lineStyle:{width:2},showSymbol:!1}]},T.value={xAxis:{show:!1,data:u},yAxis:{show:!1},series:[{type:"line",smooth:!0,data:k,lineStyle:{width:2},showSymbol:!1}]},Z.value={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:u},yAxis:{type:"value"},color:["#256cf6","#43b2f8","#81e1fa"],series:[{name:"\u62C9\u9ED1\u7528\u6237",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:S},{name:"\u98CE\u9669\u7528\u6237",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:M},{name:"\u63D0\u73B0\u4EBA\u6570",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:z}]}}else Q.error(a.message);D.value=!1}catch(a){D.value=!1,Q.error(a.message)}};return(a,u)=>{const r=v("el-option"),O=v("el-select"),A=v("el-form-item"),M=v("el-date-picker"),c=v("el-col"),S=v("el-button"),k=v("el-row"),z=v("el-form"),l=v("el-image"),P=v("el-card"),X=ba("loading");return p(),y("div",null,[m('    <div class="crumbs">'),m('      <el-breadcrumb separator="/">'),m("        <el-breadcrumb-item>\u6570\u636E\u5206\u6790</el-breadcrumb-item>"),m("        <el-breadcrumb-item>\u6570\u636E\u9879</el-breadcrumb-item>"),m("      </el-breadcrumb>"),m("    </div>"),o(k,{gutter:20},{default:s(()=>[o(c,{span:24},{default:s(()=>[o(P,{shadow:"hover",style:{"margin-bottom":"20px"}},{default:s(()=>[Ea,m("    \u641C\u7D22"),o(z,{"label-width":"100px",size:"small",style:{"margin-bottom":"20px"}},{default:s(()=>[o(k,{justify:"space-between",align:"middle",class:"top-search"},{default:s(()=>[o(c,{span:11},{default:s(()=>[o(A,{label:"\u5E94\u7528\u4EA7\u54C1"},{default:s(()=>[o(O,{modelValue:d.value.product_id,"onUpdate:modelValue":u[0]||(u[0]=i=>d.value.product_id=i),placeholder:"\u8BF7\u9009\u62E9",onChange:na},{default:s(()=>[(p(!0),y(H,null,G(x.value,(i,F)=>(p(),U(r,{key:F,label:i.product_name,value:i.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(A,{label:"\u7EDF\u8BA1\u65E5\u671F"},{default:s(()=>[o(M,{style:{width:"100%"},modelValue:d.value.statistical_date,"onUpdate:modelValue":u[1]||(u[1]=i=>d.value.statistical_date=i),placeholder:"\u8BF7\u8F93\u5165",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),o(c,{span:11},{default:s(()=>[o(A,{label:"\u5E94\u7528\u6E20\u9053"},{default:s(()=>[o(O,{modelValue:d.value.channel,"onUpdate:modelValue":u[2]||(u[2]=i=>d.value.channel=i),placeholder:"\u8BF7\u9009\u62E9",onChange:ca},{default:s(()=>[o(r,{value:"",label:"\u5168\u90E8"}),(p(!0),y(H,null,G(V.value,(i,F)=>(p(),U(r,{key:F,label:i.label_name,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(A,{label:"\u5E94\u7528\u7248\u672C"},{default:s(()=>[o(O,{modelValue:d.value.version_b,"onUpdate:modelValue":u[3]||(u[3]=i=>d.value.version_b=i),placeholder:"\u8BF7\u9009\u62E9"},{default:s(()=>[o(r,{value:"",label:"\u5168\u90E8"}),(p(!0),y(H,null,G(C.value,(i,F)=>(p(),U(r,{key:F,label:i.label_name,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(c,{span:2},{default:s(()=>[o(A,{"label-width":"10px"},{default:s(()=>[o(S,{type:"primary",icon:"el-icon-search",onClick:j},{default:s(()=>[ka]),_:1})]),_:1}),o(A,{"label-width":"10px"},{default:s(()=>[o(S,{icon:"el-icon-refresh-right",onClick:ra},{default:s(()=>[Ba]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),W((p(),U(k,{gutter:20,class:"mgb20"},{default:s(()=>[o(c,{span:6},{default:s(()=>[e("div",Ca,[Da,e("div",Sa,[e("div",Fa,[e("div",Va,b(Number(t.value.add_user_num).toLocaleString()),1),e("div",{class:"card-footer-mini",title:Math.abs(t.value.add_user_num_diff)},[Ma,e("span",{class:Y(["card-footer-num line1",t.value.add_user_num_diff<0?"green":"red"])},b(Math.abs(t.value.add_user_num_diff)),3),o(l,{src:t.value.add_user_num_diff<0?w(N):w(L)},null,8,["src"])],8,Oa)]),e("div",Ua,[o(B,{"chart-option":J.value},null,8,["chart-option"])])])])]),_:1}),o(c,{span:6},{default:s(()=>[e("div",Ya,[Na,e("div",La,[e("div",Ra,[e("div",Ia,b(t.value.add_exception_proportion)+"%",1),e("div",{class:"card-footer-mini",title:`${Math.abs(t.value.add_exception_proportion_diff)}%`},[ja,e("span",{class:Y(["card-footer-num line1",t.value.add_exception_proportion_diff<0?"green":"red"])},b(Math.abs(t.value.add_exception_proportion_diff))+"% ",3),o(l,{src:t.value.add_exception_proportion_diff<0?w(N):w(L)},null,8,["src"])],8,Ja)]),e("div",za,[o(B,{"chart-option":K.value},null,8,["chart-option"])])])])]),_:1}),o(c,{span:6},{default:s(()=>[e("div",Pa,[Xa,e("div",Qa,[e("div",Ha,[e("div",Ga,b(t.value.add_blackout_user_proportion)+"%",1),e("div",{class:"card-footer-mini",title:`${Math.abs(t.value.add_blackout_user_proportion_diff)}%`},[Ka,e("span",{class:Y(["card-footer-num line1",t.value.add_blackout_user_proportion_diff<0?"green":"red"])},b(Math.abs(t.value.add_blackout_user_proportion_diff))+"% ",3),o(l,{src:t.value.add_blackout_user_proportion_diff<0?w(N):w(L)},null,8,["src"])],8,Wa)]),e("div",qa,[o(B,{"chart-option":q.value},null,8,["chart-option"])])])])]),_:1}),o(c,{span:6},{default:s(()=>[e("div",Ta,[Za,e("div",$a,[e("div",ae,[e("div",ee,b(Number(t.value.add_withdrawal_amount).toLocaleString()),1),e("div",{class:"card-footer-mini",title:`${Math.abs(t.value.add_withdrawal_amount_diff)}%`},[oe,e("span",{class:Y(["card-footer-num line1",t.value.add_withdrawal_amount_diff<0?"green":"red"])},b(Math.abs(t.value.add_withdrawal_amount_diff)),3),o(l,{src:t.value.add_withdrawal_amount_diff<0?w(N):w(L)},null,8,["src"])],8,te)]),e("div",se,[o(B,{"chart-option":T.value},null,8,["chart-option"])])])])]),_:1})]),_:1})),[[X,D.value]])]),_:1}),o(k,{gutter:20},{default:s(()=>[o(c,{span:16},{default:s(()=>[o(P,{shadow:"hover"},{default:s(()=>[de,W((p(),y("div",null,[o(B,{height:"300","chart-option":Z.value},null,8,["chart-option"])])),[[X,E.value]])]),_:1})]),_:1}),o(c,{span:8},{default:s(()=>[o(P,{shadow:"hover"},{default:s(()=>[ue,W((p(),y("div",null,[o(B,{height:"300","chart-option":$.value},null,8,["chart-option"])])),[[X,E.value]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),ie=ta(re,[["__scopeId","data-v-22ba47ca"],["__file","/Users/apple/Desktop/project-b/relationship.b/src/views/Dashboard.vue"]]);export{ie as default};
