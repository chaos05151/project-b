import{_ as be,u as fe,f as I,g as u,r as s,o as y,c as B,a as w,b as a,w as o,G as $,e as m,E as p,F as z,H as A,I as M,D as d,J as g,K as V,L as ve}from"./index.306d4242.js";import{f as ge,a as Ve,b as ke,e as he,d as ye,c as De,g as Pe,h as xe}from"./product.3d573cd4.js";import{u as Ce}from"./project.d856d49d.js";import"./request.70c27150.js";const we={class:"crumbs"},Te=m("\u98CE\u63A7\u7CFB\u7EDF"),Ue=m("\u4EA7\u54C1\u7BA1\u7406"),Se={class:"container"},Le={class:"handle-box"},Be=m("\xA0\xA0 "),je=m("\u65B0\u589E\u9879\u76EE"),Ee=m("\u98CE\u63A7\u914D\u7F6E "),Ie=m("\u7F16\u8F91 "),$e=m("\u5220\u9664 "),ze={class:"pagination"},Ae={class:"dialog-footer"},Me=m("\u53D6 \u6D88"),Ne=m("\u786E \u5B9A"),Fe={class:"dialog-footer"},qe=m("\u53D6 \u6D88"),Ge=m("\u786E \u5B9A"),He={__name:"ProductTable",setup(Je){const Q=fe(),W=Ce(),n=I({page_index:1,page_size:10}),N=u(0),b=u(""),L=u(""),D=u(""),P=u(0),F=u([]);u("");const k=u("\u9879\u76EE");let q=u([]),G=u([]),H=u([]);const r=l=>{ge(l).then(e=>{e.status==200?(N.value=e.data.total_count,F.value=e.data.lists):p.error(e==null?void 0:e.message)}).catch(()=>{})},x=()=>{Ve().then(l=>{q.value=l.data,H.value=l.data}).catch(()=>{})},X=l=>{ke({main_product_id:l}).then(i=>{G.value=i.data}).catch(()=>{})},Y=(l,e)=>{he(l,e).then(i=>{i.status==200?(p.success("\u4FEE\u6539\u6210\u529F"),r(n),x()):(p.error("\u4FEE\u6539\u5931\u8D25"),r(n))}).catch(()=>{p.error("\u4FEE\u6539\u5931\u8D25"),r(n)})},Z=l=>{ye(l).then(e=>{e.status==200?(p.success("\u5220\u9664\u6210\u529F"),r(n),x()):e.status==-1&&p.error("\u8BF7\u5148\u5220\u9664\u5BF9\u5E94\u7684\u5E94\u7528\uFF01")})},ee=l=>{De(l).then(e=>{e.status==200&&(p.success("\u5220\u9664\u6210\u529F"),r(n),x())})},ae=l=>{Pe(l).then(e=>{e.status==200&&(p.success("\u65B0\u589E\u9879\u76EE\u6210\u529F"),r(n),x())})},te=(l,e)=>{xe(l,e).then(i=>{i.status==200&&(p.success("\u65B0\u589E\u5E94\u7528\u6210\u529F"),r(n),x())})};b.value="",D.value="",r(n),x();const le=l=>{n.page_index=l,J()},oe=(l,e)=>{ve.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{e>""?ee(e):Z(l)}).catch(()=>{})},T=u(!1),U=u(!1);let _=I({id:"",main_product_id:"",product_id:"",main_product_name:"",product_name:"",package_name:""}),c=I({main_product_name:"",product_name:"",package_name:""});const ne=(l,e)=>{P.value=u(""),e.product_id==""?P.value=0:P.value=1,Object.keys(_).forEach(i=>{_[i]=e[i]}),T.value=!0},de=()=>{U.value=!0},ue=()=>{T.value=!1,_.main_product_name;const l={package_name:_.package_name};P.value==1&&Y(_.product_id,l)},se=()=>{U.value=!1;let l={main_product_name:c.main_product_name};if(k.value=="\u9879\u76EE")if(c.main_product_name)ae(l);else{p.error("\u6E38\u620F\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}else if(c.product_name&&c.package_name&&L.value)l={product_name:c.product_name,package_name:c.package_name},te(L.value,l);else{p.error("\u6E38\u620F\u540D\u548C\u5305\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}},re=()=>{if(D.value="",b.value==-1)r(n);else{const l={main_product_id:b.value,...n};r(l),X(b.value)}},J=()=>{if(b.value==-1)r(n);else if(D.value==-1){const l={main_product_id:b.value,...n};r(l)}else{const l={product_id:D.value,...n};r(l)}},ce=l=>{Q.push({name:"productrisk"}),W.setproduct(l)};return(l,e)=>{const i=s("el-breadcrumb-item"),_e=s("el-breadcrumb"),S=s("el-option"),j=s("el-select"),f=s("el-button"),h=s("el-table-column"),ie=s("el-table"),pe=s("el-pagination"),C=s("el-input"),v=s("el-form-item"),E=s("el-form"),K=s("el-dialog"),O=s("el-radio"),me=s("el-radio-group");return y(),B("div",null,[w("div",we,[a(_e,{separator:"/"},{default:o(()=>[a(i,null,{default:o(()=>[Te]),_:1}),a(i,null,{default:o(()=>[Ue]),_:1})]),_:1})]),w("div",Se,[w("div",Le,[a(j,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=t=>b.value=t),placeholder:"\u9879\u76EE",class:"m-2",onChange:re},{default:o(()=>[a(S,{label:"\u5168\u90E8",value:"-1"}),(y(!0),B(z,null,A(d(q),t=>(y(),M(S,{key:t.id,label:t.main_product_name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(j,{modelValue:D.value,"onUpdate:modelValue":e[1]||(e[1]=t=>D.value=t),placeholder:"\u5E94\u7528",class:"m-2",onChange:J},{default:o(()=>[a(S,{label:"\u5168\u90E8",value:"-1"}),(y(!0),B(z,null,A(d(G),t=>(y(),M(S,{key:t.product_id,label:t.product_name,value:t.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Be,$(' <el-button type="primary" icon="el-icon-search" @click="handleSearch">\u641C\u7D22</el-button> '),a(f,{type:"primary",onClick:de},{default:o(()=>[je]),_:1})]),a(ie,{data:F.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:o(()=>[a(h,{prop:"main_product_id",sortable:"",label:"\u7236\u6E38\u620FID"}),a(h,{prop:"main_product_name",label:"\u7236\u6E38\u620F"}),a(h,{prop:"product_id",label:"\u5B50\u6E38\u620FID"}),a(h,{prop:"product_name",label:"\u5B50\u6E38\u620F"}),a(h,{prop:"md5key",label:"md5key"}),a(h,{prop:"package_name",label:"\u5305\u540D"}),a(h,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:o(t=>[g(a(f,{type:"text",icon:"el-icon-link",onClick:R=>ce(t.row)},{default:o(()=>[Ee]),_:2},1032,["onClick"]),[[V,t.row.product_id>""]]),g(a(f,{type:"text",icon:"el-icon-edit",onClick:R=>ne(t.row.id,t.row)},{default:o(()=>[Ie]),_:2},1032,["onClick"]),[[V,t.row.product_id>""]]),a(f,{type:"text",icon:"el-icon-delete",class:"red",onClick:R=>oe(t.row.main_product_id,t.row.product_id)},{default:o(()=>[$e]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),w("div",ze,[a(pe,{background:"",layout:"total, prev, pager, next","current-page":n.page_index,"page-size":n.page_size,total:N.value,onCurrentChange:le},null,8,["current-page","page-size","total"])])]),$(" \u7F16\u8F91\u5F39\u51FA\u6846 "),a(K,{title:"\u7F16\u8F91",modelValue:T.value,"onUpdate:modelValue":e[6]||(e[6]=t=>T.value=t),width:"60%"},{footer:o(()=>[w("span",Ae,[a(f,{onClick:e[5]||(e[5]=t=>T.value=!1)},{default:o(()=>[Me]),_:1}),a(f,{type:"primary",onClick:ue},{default:o(()=>[Ne]),_:1})])]),default:o(()=>[g(a(E,{"label-width":"110px"},{default:o(()=>[a(v,{label:"\u9879\u76EE\u540D"},{default:o(()=>[a(C,{modelValue:d(_).main_product_name,"onUpdate:modelValue":e[2]||(e[2]=t=>d(_).main_product_name=t)},null,8,["modelValue"])]),_:1})]),_:1},512),[[V,P.value==0]]),g(a(E,{"label-width":"110px"},{default:o(()=>[a(v,{label:"\u5E94\u7528\u540D"},{default:o(()=>[a(C,{disabled:"",modelValue:d(_).product_name,"onUpdate:modelValue":e[3]||(e[3]=t=>d(_).product_name=t)},null,8,["modelValue"])]),_:1}),a(v,{label:"\u5305\u540D"},{default:o(()=>[a(C,{modelValue:d(_).package_name,"onUpdate:modelValue":e[4]||(e[4]=t=>d(_).package_name=t)},null,8,["modelValue"])]),_:1})]),_:1},512),[[V,P.value==1]])]),_:1},8,["modelValue"]),$(" \u65B0\u589E\u5F39\u51FA\u6846 "),a(K,{title:"\u65B0\u589E\u9879\u76EE",modelValue:U.value,"onUpdate:modelValue":e[13]||(e[13]=t=>U.value=t),width:"60%"},{footer:o(()=>[w("span",Fe,[a(f,{onClick:e[12]||(e[12]=t=>U.value=!1)},{default:o(()=>[qe]),_:1}),a(f,{type:"primary",onClick:se},{default:o(()=>[Ge]),_:1})])]),default:o(()=>[a(E,{"label-width":"70px"},{default:o(()=>[a(v,{label:"\u6E38\u620F\u7C7B\u578B",prop:"resource"},{default:o(()=>[a(me,{modelValue:k.value,"onUpdate:modelValue":e[7]||(e[7]=t=>k.value=t)},{default:o(()=>[a(O,{label:"\u9879\u76EE"}),a(O,{label:"\u5E94\u7528"})]),_:1},8,["modelValue"])]),_:1}),g(a(v,{label:"\u9879\u76EE",prop:"resource"},{default:o(()=>[a(j,{modelValue:L.value,"onUpdate:modelValue":e[8]||(e[8]=t=>L.value=t),placeholder:"\u9879\u76EE",class:"m-2"},{default:o(()=>[(y(!0),B(z,null,A(d(H),t=>(y(),M(S,{key:t.id,label:t.main_product_name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[V,k.value=="\u5E94\u7528"]]),g(a(v,{label:"\u9879\u76EE"},{default:o(()=>[a(C,{modelValue:d(c).main_product_name,"onUpdate:modelValue":e[9]||(e[9]=t=>d(c).main_product_name=t)},null,8,["modelValue"])]),_:1},512),[[V,k.value=="\u9879\u76EE"]]),g(a(v,{label:"\u5E94\u7528"},{default:o(()=>[a(C,{modelValue:d(c).product_name,"onUpdate:modelValue":e[10]||(e[10]=t=>d(c).product_name=t)},null,8,["modelValue"])]),_:1},512),[[V,k.value=="\u5E94\u7528"]]),g(a(v,{label:"\u5305\u540D"},{default:o(()=>[a(C,{modelValue:d(c).package_name,"onUpdate:modelValue":e[11]||(e[11]=t=>d(c).package_name=t)},null,8,["modelValue"])]),_:1},512),[[V,k.value=="\u5E94\u7528"]])]),_:1})]),_:1},8,["modelValue"])])}}},We=be(He,[["__scopeId","data-v-628a05d9"],["__file","/Users/apple/Desktop/project-b github/project-b/src/views/ProductTable.vue"]]);export{We as default};
