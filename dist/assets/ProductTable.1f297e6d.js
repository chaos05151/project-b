import{_ as fe,u as ve,f as A,g as u,r as s,o as p,c as I,a as U,b as t,w as o,G as D,D as n,H as P,e as b,E as m,F as M,I as N,J as k,K as V,L as ge}from"./index.03d21809.js";import{s as ke}from"./showButton.004c7379.js";import{f as Ve,a as he,b as ye,e as De,d as Pe,c as we,g as xe,h as Ce}from"./product.56b44d03.js";import{u as Te}from"./project.899661f6.js";import"./request.b7a5dcc4.js";const Ue={class:"crumbs"},Se=b("\u98CE\u63A7\u7CFB\u7EDF"),Be=b("\u4EA7\u54C1\u7BA1\u7406"),Le={class:"container"},je={class:"handle-box"},Ee=b("\xA0\xA0 "),Ie=b("\u65B0\u589E\u9879\u76EE"),$e=b("\u98CE\u63A7\u914D\u7F6E "),ze=b("\u7F16\u8F91 "),Ae=b("\u5220\u9664 "),Me={class:"pagination"},Ne={class:"dialog-footer"},Fe=b("\u53D6 \u6D88"),qe=b("\u786E \u5B9A"),Ge={class:"dialog-footer"},He=b("\u53D6 \u6D88"),Je=b("\u786E \u5B9A"),Ke={__name:"ProductTable",setup(Oe){const j=ke("product:product:edit"),W=ve(),X=Te(),d=A({page_index:1,page_size:10}),F=u(0),f=u(""),E=u(""),w=u(""),x=u(0),q=u([]);u("");const h=u("\u9879\u76EE");let G=u([]),H=u([]),J=u([]);const r=l=>{Ve(l).then(e=>{e.status==200?(F.value=e.data.total_count,q.value=e.data.lists):m.error(e==null?void 0:e.message)}).catch(()=>{})},C=()=>{he().then(l=>{G.value=l.data,J.value=l.data}).catch(()=>{})},Y=l=>{ye({main_product_id:l}).then(i=>{H.value=i.data}).catch(()=>{})},Z=(l,e)=>{De(l,e).then(i=>{i.status==200?(m.success("\u4FEE\u6539\u6210\u529F"),r(d),C()):(m.error("\u4FEE\u6539\u5931\u8D25"),r(d))}).catch(()=>{m.error("\u4FEE\u6539\u5931\u8D25"),r(d)})},ee=l=>{Pe(l).then(e=>{e.status==200?(m.success("\u5220\u9664\u6210\u529F"),r(d),C()):e.status==-1&&m.error("\u8BF7\u5148\u5220\u9664\u5BF9\u5E94\u7684\u5E94\u7528\uFF01")})},ae=l=>{we(l).then(e=>{e.status==200&&(m.success("\u5220\u9664\u6210\u529F"),r(d),C())})},te=l=>{xe(l).then(e=>{e.status==200&&(m.success("\u65B0\u589E\u9879\u76EE\u6210\u529F"),r(d),C())})},le=(l,e)=>{Ce(l,e).then(i=>{i.status==200&&(m.success("\u65B0\u589E\u5E94\u7528\u6210\u529F"),r(d),C())})};f.value="",w.value="",r(d),C();const oe=l=>{d.page_index=l,K()},ne=(l,e)=>{ge.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{e>""?ae(e):ee(l)}).catch(()=>{})},S=u(!1),B=u(!1);let _=A({id:"",main_product_id:"",product_id:"",main_product_name:"",product_name:"",package_name:""}),c=A({main_product_name:"",product_name:"",package_name:""});const de=(l,e)=>{x.value=u(""),e.product_id==""?x.value=0:x.value=1,Object.keys(_).forEach(i=>{_[i]=e[i]}),S.value=!0},ue=()=>{B.value=!0},se=()=>{S.value=!1,_.main_product_name;const l={package_name:_.package_name};x.value==1&&Z(_.product_id,l)},re=()=>{B.value=!1;let l={main_product_name:c.main_product_name};if(h.value=="\u9879\u76EE")if(c.main_product_name)te(l);else{m.error("\u6E38\u620F\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}else if(c.product_name&&c.package_name&&E.value)l={product_name:c.product_name,package_name:c.package_name},le(E.value,l);else{m.error("\u6E38\u620F\u540D\u548C\u5305\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}},ce=()=>{if(w.value="",f.value==-1)r(d);else{const l={main_product_id:f.value,...d};r(l),Y(f.value)}},K=()=>{if(f.value==-1)r(d);else if(w.value==-1){const l={main_product_id:f.value,...d};r(l)}else{const l={product_id:w.value,...d};r(l)}},_e=l=>{W.push({name:"productrisk"}),X.setproduct(l)};return(l,e)=>{const i=s("el-breadcrumb-item"),ie=s("el-breadcrumb"),L=s("el-option"),$=s("el-select"),v=s("el-button"),y=s("el-table-column"),pe=s("el-table"),me=s("el-pagination"),T=s("el-input"),g=s("el-form-item"),z=s("el-form"),O=s("el-dialog"),R=s("el-radio"),be=s("el-radio-group");return p(),I("div",null,[U("div",Ue,[t(ie,{separator:"/"},{default:o(()=>[t(i,null,{default:o(()=>[Se]),_:1}),t(i,null,{default:o(()=>[Be]),_:1})]),_:1})]),U("div",Le,[U("div",je,[t($,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),placeholder:"\u9879\u76EE",class:"m-2",onChange:ce},{default:o(()=>[t(L,{label:"\u5168\u90E8",value:"-1"}),(p(!0),I(M,null,N(n(G),a=>(p(),P(L,{key:a.id,label:a.main_product_name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t($,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=a=>w.value=a),placeholder:"\u5E94\u7528",class:"m-2",onChange:K},{default:o(()=>[t(L,{label:"\u5168\u90E8",value:"-1"}),(p(!0),I(M,null,N(n(H),a=>(p(),P(L,{key:a.product_id,label:a.product_name,value:a.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Ee,D(' <el-button type="primary" icon="el-icon-search" @click="handleSearch">\u641C\u7D22</el-button> '),n(j)?(p(),P(v,{key:0,type:"primary",onClick:ue},{default:o(()=>[Ie]),_:1})):D("v-if",!0)]),t(pe,{data:q.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:o(()=>[t(y,{prop:"main_product_id",sortable:"",label:"\u7236\u6E38\u620FID"}),t(y,{prop:"main_product_name",label:"\u7236\u6E38\u620F"}),t(y,{prop:"product_id",label:"\u5B50\u6E38\u620FID"}),t(y,{prop:"product_name",label:"\u5B50\u6E38\u620F"}),t(y,{prop:"md5key",label:"md5key"}),t(y,{prop:"package_name",label:"\u5305\u540D"}),t(y,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:o(a=>[n(j)?k((p(),P(v,{key:0,type:"text",icon:"el-icon-link",onClick:Q=>_e(a.row)},{default:o(()=>[$e]),_:2},1032,["onClick"])),[[V,a.row.product_id>""]]):D("v-if",!0),n(j)?k((p(),P(v,{key:1,type:"text",icon:"el-icon-edit",onClick:Q=>de(a.row.id,a.row)},{default:o(()=>[ze]),_:2},1032,["onClick"])),[[V,a.row.product_id>""]]):D("v-if",!0),n(j)?(p(),P(v,{key:2,type:"text",icon:"el-icon-delete",class:"red",onClick:Q=>ne(a.row.main_product_id,a.row.product_id)},{default:o(()=>[Ae]),_:2},1032,["onClick"])):D("v-if",!0)]),_:1})]),_:1},8,["data"]),U("div",Me,[t(me,{background:"",layout:"total, prev, pager, next","current-page":d.page_index,"page-size":d.page_size,total:F.value,onCurrentChange:oe},null,8,["current-page","page-size","total"])])]),D(" \u7F16\u8F91\u5F39\u51FA\u6846 "),t(O,{title:"\u7F16\u8F91",modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=a=>S.value=a),width:"60%"},{footer:o(()=>[U("span",Ne,[t(v,{onClick:e[5]||(e[5]=a=>S.value=!1)},{default:o(()=>[Fe]),_:1}),t(v,{type:"primary",onClick:se},{default:o(()=>[qe]),_:1})])]),default:o(()=>[k(t(z,{"label-width":"110px"},{default:o(()=>[t(g,{label:"\u9879\u76EE\u540D"},{default:o(()=>[t(T,{modelValue:n(_).main_product_name,"onUpdate:modelValue":e[2]||(e[2]=a=>n(_).main_product_name=a)},null,8,["modelValue"])]),_:1})]),_:1},512),[[V,x.value==0]]),k(t(z,{"label-width":"110px"},{default:o(()=>[t(g,{label:"\u5E94\u7528\u540D"},{default:o(()=>[t(T,{disabled:"",modelValue:n(_).product_name,"onUpdate:modelValue":e[3]||(e[3]=a=>n(_).product_name=a)},null,8,["modelValue"])]),_:1}),t(g,{label:"\u5305\u540D"},{default:o(()=>[t(T,{modelValue:n(_).package_name,"onUpdate:modelValue":e[4]||(e[4]=a=>n(_).package_name=a)},null,8,["modelValue"])]),_:1})]),_:1},512),[[V,x.value==1]])]),_:1},8,["modelValue"]),D(" \u65B0\u589E\u5F39\u51FA\u6846 "),t(O,{title:"\u65B0\u589E\u9879\u76EE",modelValue:B.value,"onUpdate:modelValue":e[13]||(e[13]=a=>B.value=a),width:"60%"},{footer:o(()=>[U("span",Ge,[t(v,{onClick:e[12]||(e[12]=a=>B.value=!1)},{default:o(()=>[He]),_:1}),t(v,{type:"primary",onClick:re},{default:o(()=>[Je]),_:1})])]),default:o(()=>[t(z,{"label-width":"70px"},{default:o(()=>[t(g,{label:"\u6E38\u620F\u7C7B\u578B",prop:"resource"},{default:o(()=>[t(be,{modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=a=>h.value=a)},{default:o(()=>[t(R,{label:"\u9879\u76EE"}),t(R,{label:"\u5E94\u7528"})]),_:1},8,["modelValue"])]),_:1}),k(t(g,{label:"\u9879\u76EE",prop:"resource"},{default:o(()=>[t($,{modelValue:E.value,"onUpdate:modelValue":e[8]||(e[8]=a=>E.value=a),placeholder:"\u9879\u76EE",class:"m-2"},{default:o(()=>[(p(!0),I(M,null,N(n(J),a=>(p(),P(L,{key:a.id,label:a.main_product_name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[V,h.value=="\u5E94\u7528"]]),k(t(g,{label:"\u9879\u76EE"},{default:o(()=>[t(T,{modelValue:n(c).main_product_name,"onUpdate:modelValue":e[9]||(e[9]=a=>n(c).main_product_name=a)},null,8,["modelValue"])]),_:1},512),[[V,h.value=="\u9879\u76EE"]]),k(t(g,{label:"\u5E94\u7528"},{default:o(()=>[t(T,{modelValue:n(c).product_name,"onUpdate:modelValue":e[10]||(e[10]=a=>n(c).product_name=a)},null,8,["modelValue"])]),_:1},512),[[V,h.value=="\u5E94\u7528"]]),k(t(g,{label:"\u5305\u540D"},{default:o(()=>[t(T,{modelValue:n(c).package_name,"onUpdate:modelValue":e[11]||(e[11]=a=>n(c).package_name=a)},null,8,["modelValue"])]),_:1},512),[[V,h.value=="\u5E94\u7528"]])]),_:1})]),_:1},8,["modelValue"])])}}},Ze=fe(Ke,[["__scopeId","data-v-628a05d9"],["__file","/Users/apple/Desktop/project-b github/project-b/src/views/ProductTable.vue"]]);export{Ze as default};
