import{_ as R,r as u,C as M,D as S,u as q,e as s,g as B,a as T,c as U,t as k,j as t,k as l,N as J,q as O,z as c,l as _}from"./index.3fee5d13.js";import{g as z,e as A}from"./privilelge.a8609542.js";import{d as F}from"./getMenus.0fda59c1.js";const G={class:"crumbs"},H=c("\u6743\u9650\u7BA1\u7406"),I=c("\u6DFB\u52A0\u89D2\u8272"),K={class:"container"},L=c("\u53D6\u6D88"),Q=c("\u4FDD\u5B58"),W={__name:"PrivilegeEidtor",setup(X){const p=u(!0),g=M(),f=u(""),o=S({name:"",remark:"",menus:[]}),m=u(),n=q(),v=u([]),x=()=>{z().then(e=>{e.status==200&&(console.log(e),p.value=!1,v.value=F(e),w())})},V=(e,a)=>{A(e,a).then(r=>{r.status==200&&(_.success("\u4FEE\u6539\u6210\u529F"),g.push({name:"privilegemanage"}))})},C=()=>{let e=JSON.parse(JSON.stringify(m.value.getCheckedNodes(!1,!0)));e=e.map(r=>r.id);const a=e.join(",");if(o.menus=a,console.log(e),o.menus==0){_.error("\u8BF7\u9009\u62E9\u89D2\u8272\u6743\u9650");return}else if(o.name==""){_.error("\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0");return}else V(f.value,o)},N=()=>{g.go(-1)},w=()=>{console.log(n.privilegemanage),o.name=n.privilegemanage.name,o.remark=n.privilegemanage.remark,o.menus=n.privilegemanage.menus,f.value=n.privilegemanage.id;let e=n.privilegemanage.menus;y(e)},y=e=>{console.log(e);const a=e.split(",");console.log(a),J(()=>{a.forEach(r=>{m.value.setChecked(r,!0,!1)})})};return x(),(e,a)=>{const r=s("el-breadcrumb-item"),D=s("el-breadcrumb"),b=s("el-input"),i=s("el-form-item"),j=s("el-tree"),h=s("el-button"),E=s("el-form"),P=B("loading");return T(),U("div",null,[k("div",G,[t(D,{separator:"/"},{default:l(()=>[t(r,null,{default:l(()=>[H]),_:1}),t(r,null,{default:l(()=>[I]),_:1})]),_:1})]),k("div",K,[t(E,{model:o,"label-width":"100px",style:{width:"400px"}},{default:l(()=>[t(i,{prop:"name",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",trigger:"blur"}]},{default:l(()=>[t(b,{modelValue:o.name,"onUpdate:modelValue":a[0]||(a[0]=d=>o.name=d),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{prop:"remark",label:"\u5907\u6CE8/\u63CF\u8FF0"},{default:l(()=>[t(b,{modelValue:o.remark,"onUpdate:modelValue":a[1]||(a[1]=d=>o.remark=d),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u6635\u79F0"},null,8,["modelValue"])]),_:1}),t(i,{prop:"menus",label:"\u89D2\u8272\u6743\u9650",rules:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}]},{default:l(()=>[O(t(j,{ref_key:"treeRef",ref:m,data:v.value,"show-checkbox":"","node-key":"id"},null,8,["data"]),[[P,p.value]])]),_:1}),t(i,null,{default:l(()=>[t(h,{onClick:N},{default:l(()=>[L]),_:1}),t(h,{type:"primary",onClick:C},{default:l(()=>[Q]),_:1})]),_:1})]),_:1},8,["model"])])])}}},ee=R(W,[["__file","/Users/apple/Desktop/project-b/relationship.b/src/views/privilegeManagement/PrivilegeEidtor.vue"]]);export{ee as default};
