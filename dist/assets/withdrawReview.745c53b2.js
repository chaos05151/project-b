import{_ as j,g as p,f as z,by as G,u as K,o as v,c as V,a as w,b as o,w as m,bw as M,r as g,U as B,aJ as R,a4 as H,e as f}from"./index.d75263b6.js";import{a as Q,b as W}from"./product.98c79de9.js";import{h as P}from"./moment.9709ab41.js";import{l as N}from"./user.ce444866.js";import{e as X}from"./export2excel.a0c92898.js";import"./request.4064096f.js";const u=p(""),i=p(""),A=p([]),I=p([]);let y=p("");const Z=p("\u9879\u76EE"),k=z({}),L=p({}),b=p(0),n=z({page_index:1,page_size:10});let S=p([]),T=p([]),U=p([]);const $=p(),Y=p(!1),_=e=>{N(e).then(s=>{var h;A.value=(h=s.data)==null?void 0:h.lists.map(a=>({...a,updated_at:P(a.updated_at).format("YYYY-MM-DD HH:mm:ss"),status:a.status==1?"\u5F85\u5BA1\u6838":a.status==2?"\u63D0\u73B0\u4E2D":a.status==3?"\u5DF2\u63D0\u73B0":a.status==4?"\u62D2\u7EDD\u63D0\u73B0":a.status==5?"\u63D0\u73B0\u5931\u8D25":""})),b.value=s.data.total_count,k.apply_users_count=s.data.apply_users_count,k.unaudit_orders_count=s.data.unaudit_orders_count,k.unaudit_reward_sum=s.data.unaudit_reward_sum,L.value=JSON.parse(JSON.stringify(e))}).catch(s=>{}).then(()=>{})},aa=()=>{Q().then(e=>{S.value=e.data,U.value=e.data}).catch(()=>{})},C=e=>{W({main_product_id:e}).then(h=>{T.value=h.data}).catch(()=>{})},ea={name:"basetable",setup(){u.value="",i.value="";const e=G(),s=K();e.params.product_name!==""?(u.value=e.params.main_product_name,i.value=e.params.product_name,n.product_id=e.params.product_id,y.value=e.params.main_product_id,C(e.params.main_product_id)):e.params.main_product_name!==""?(u.value=e.params.main_product_name,n.main_product_id=e.params.main_product_id,y.value=e.params.main_product_id,C(e.params.main_product_id)):C(),console.log(u.value,i.value);const h=()=>{s.go(-1)};return _(n),aa(),{tableData:A,widthdrawDetail:k,product_type:Z,options:S,suboptions:T,addoptions:U,main_product_name_selected:u,product_name_selected:i,getProductAndDataList:()=>{if(i.value="",u.value==-1)_(n);else{const t={...n,main_product_id:u.value};n.product_id="",y.value=u.value,_(t),C(u.value)}},getDataById:()=>{if(i.value==-1){const t={...n,product_id:u.value};t.product_id==-1&&delete t.product_id,_(t)}else{const t={...n,product_id:i.value};n.product_id=i.value,t.product_id==-1&&delete t.product_id,_(t)}},query:n,handlePageChange:t=>{if(n.page_index=t,u.value==-1)_(n);else if(u.value>0)if(i.value==-1){const d={main_product_id:u.value,...n};_(d)}else if(i.value>0){const d={...n,product_id:i.value};_(d)}else{const d={...n,main_product_id:u.value};_(d)}else{const d={...n};_(d)}},pageTotal:b,handleDate:t=>{if(t!==null){let d=[];t.forEach(r=>{r!=null&&d.push(P(r).format("YYYY-MM-DD HH:mm:ss"))});let l={...n,start_date:d[0],end_date:d[1]};n.start_date=d[0],n.end_date=d[1],_(l)}else _(n)},dateRange:$,getExcel:()=>{L.value.page_size=b.value?b.value<=1e4?b.value:1e4:10,N(L.value).then(t=>{if(t.status==200){I.value=t.data.lists.map(l=>({wechat_user_id:l.wechat_user_id,main_product_name:l.main_product_name,product_name:l.product_name,nickname:l.nickname,bind_account_count:l.bind_account_count,amount:l.amount,oaid:l.oaid,ip:l.ip,ip_address:l.ip_address,updated_at:P(l.updated_at).format("YYYY-MM-DD HH:mm:ss"),status:l.status==1?"\u5F85\u5BA1\u6838":l.status==2?"\u63D0\u73B0\u4E2D":l.status==3?"\u5DF2\u63D0\u73B0":l.status==4?"\u62D2\u7EDD\u63D0\u73B0":l.status==5?"\u63D0\u73B0\u5931\u8D25":""}));const d=["\u7528\u6237ID","\u9879\u76EE","\u5E94\u7528","\u7528\u6237\u540D","\u8BBE\u5907\u5173\u8054\u8D26\u53F7","\u7533\u8BF7\u63D0\u73B0\u91D1\u989D","\u6570\u76DFid","ip","ip\u5730\u5740","\u63D0\u73B0\u65F6\u95F4","\u63D0\u73B0\u72B6\u6001"];X(I.value,"\u4EBA\u5DE5\u5BA1\u6838\u8BB0\u5F55",d,"\u63D0\u73B0\u8BB0\u5F55")}else t.message?M.error(t.message):M.error("\u540E\u7AEFapi\u63A5\u53E3\u5F02\u5E38\uFF01")})},isShow:Y,get:()=>{Y.value=!Y.value,n.status=3,_(n)},goback:h,main_product_id:y}},methods:{withdrawDetail(e){this.$router.push({name:"userdetail",params:{wechat_user_id:e}})}}},ta={class:"crumbs"},oa=f("\u98CE\u63A7\u7CFB\u7EDF"),na=f("\u7528\u6237\u7BA1\u7406"),la=f("\u4EBA\u5DE5\u5BA1\u6838\u8BB0\u5F55"),da={class:"container"},sa={class:"handle-box"},ra=f("\u5BFC\u51FA"),ua=f("\u8FD4\u56DE"),ca={class:"pagination"};function _a(e,s,h,a,q,J){const D=g("el-breadcrumb-item"),E=g("el-breadcrumb"),x=g("el-option"),t=g("el-select"),d=g("el-date-picker"),l=g("el-button"),r=g("el-table-column"),O=g("el-table"),F=g("el-pagination");return v(),V("div",null,[w("div",ta,[o(E,{separator:"/"},{default:m(()=>[o(D,null,{default:m(()=>[oa]),_:1}),o(D,null,{default:m(()=>[na]),_:1}),o(D,null,{default:m(()=>[la]),_:1})]),_:1})]),w("div",da,[w("div",sa,[o(t,{modelValue:a.main_product_name_selected,"onUpdate:modelValue":s[0]||(s[0]=c=>a.main_product_name_selected=c),placeholder:"\u9879\u76EE",class:"m-2",onChange:a.getProductAndDataList},{default:m(()=>[(v(!0),V(B,null,R(a.options,c=>(v(),H(x,{key:c.id,label:c.main_product_name,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),o(t,{modelValue:a.product_name_selected,"onUpdate:modelValue":s[1]||(s[1]=c=>a.product_name_selected=c),placeholder:"\u5E94\u7528",class:"m-2",onChange:a.getDataById},{default:m(()=>[(v(!0),V(B,null,R(a.suboptions,c=>(v(),H(x,{key:c.product_id,label:c.product_name,value:c.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),o(d,{modelValue:a.dateRange,"onUpdate:modelValue":s[2]||(s[2]=c=>a.dateRange=c),type:"daterange","range-separator":"\u2192",onChange:a.handleDate,"start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue","onChange"]),o(l,{type:"primary",onClick:a.getExcel},{default:m(()=>[ra]),_:1},8,["onClick"]),o(l,{type:"primary",onClick:a.goback},{default:m(()=>[ua]),_:1},8,["onClick"])]),o(O,{data:a.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:m(()=>[o(r,{prop:"wechat_user_id",label:"\u7528\u6237ID"}),o(r,{prop:"main_product_name",label:"\u9879\u76EE"}),o(r,{prop:"product_name",label:"\u5E94\u7528"}),o(r,{prop:"nickname",label:"\u7528\u6237\u540D"}),o(r,{prop:"bind_account_count",label:"\u8BBE\u5907\u5173\u8054\u8D26\u53F7"}),o(r,{prop:"amount",label:"\u7533\u8BF7\u63D0\u73B0\u91D1\u989D"}),o(r,{prop:"oaid",label:"\u6570\u76DFid"}),o(r,{prop:"ip",label:"ip"}),o(r,{prop:"ip_address",label:"ip\u5730\u5740"}),o(r,{prop:"updated_at",sortable:"",label:"\u63D0\u73B0\u65F6\u95F4"}),o(r,{prop:"status",label:"\u72B6\u6001"})]),_:1},8,["data"]),w("div",ca,[o(F,{background:"",layout:"total, prev, pager, next","current-page":a.query.page_index,"page-size":a.query.page_size,total:a.pageTotal,onCurrentChange:a.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])])}const ba=j(ea,[["render",_a],["__scopeId","data-v-799e6f1b"]]);export{ba as default};
