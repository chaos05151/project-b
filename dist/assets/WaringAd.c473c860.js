import{_ as Ve,r as g,u as we,D as v,w as W,b as Q,e as r,g as ye,a as p,c as D,t as M,j as l,k as a,y,q as xe,p as b,h as A,z as c,v as ke,F as q,m as F,V as Ce,l as _}from"./index.3fee5d13.js";import{b as X,c as Y,g as De,h as Ue}from"./waringrules.05f211b9.js";import{s as N}from"./showButton.83421764.js";const Le={class:"crumbs"},Be=c("\u98CE\u63A7\u7CFB\u7EDF"),$e=c("\u5E7F\u544A\u5F02\u5E38\u9884\u8B66"),Pe={class:"container"},Ae=c("\u65B0\u589E\u9884\u8B66\u89C4\u5219"),qe=c("\u914D\u7F6E\u9ED8\u8BA4\u89C4\u5219"),Fe=c("\u7F16\u8F91"),Ne=c("\u5220\u9664"),ze=c("\u53D6\u6D88"),je=c("\u4FDD\u5B58"),Te=c("\u53D6\u6D88"),Ee=c("\u4FDD\u5B58"),Ie=c("\u53D6\u6D88"),Re=c("\u4FDD\u5B58"),We={class:"pagination"},Me={__name:"WaringAd",setup(Se){const Z=N("remind:waringad:view"),ee=N("remind:waringad:add"),te=N("remind:waringad:edit"),le=N("remind:waringad:del"),h=g(),U=we(),V=v({main_product_id:U.mainProductId,page_index:1,page_size:10,is_default:"0"}),S=g(1),x=g(!1),k=g(!1),C=g(!1),z=g(!0),G=g([{id:"1",main_product_id:22,product_id:10008,main_product_name:"\u7535\u6D88",product_name:"\u5929\u5929\u6D88\u6D88\u6D88",ad_gap_ratio:22,phone:"15265528481",is_default:0}]),i=v({main_product_id:"",product_id:"",ad_gap_ratio:"",phone:"",is_default:"0"}),f=v({ad_gap_ratio:"",phone:"",is_default:"1"}),H=g(""),d=v({main_product_id:"",product_id:"",ad_gap_ratio:"",phone:"",is_default:"0"}),J=v({productList:[]}),K=v({productList:[]}),j=v({main_product_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u9879\u76EE",trigger:"change"}],product_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u5E94\u7528",trigger:"change"}],ad_gap_ratio:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E7F\u544A\u5F02\u5E38\u5C55\u793Agap\u503C\u5F02\u5E38\u767E\u5206\u6BD4",trigger:"blur"}],phone:[{required:!0,validator:(o,e,n)=>{let s=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/;if(e==="")n(new Error("\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801"));else if(!s.test(e))n(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"));else if(s.test(e))return!0},trigger:"blur"}]}),ae=o=>{console.log(o),V.page_index=o,w()},w=()=>{X(V).then(o=>{o.status==200&&(console.log(o),z.value=!1,S.value=o.data.total_count,G.value=o.data.lists)})},oe=()=>{X({is_default:"1"}).then(e=>{e.status==200&&(console.log(e),f.ad_gap_ratio=e.data.lists[0].ad_gap_ratio,f.phone=e.data.lists[0].phone)}).catch(e=>{console.log(e)}),C.value=!0},de=o=>{Y(o).then(e=>{e.status==200?(_.success("\u6DFB\u52A0\u6210\u529F"),w()):_.error("\u6DFB\u52A0\u5931\u8D25,"+e.message)}).catch(e=>{_.error("\u6DFB\u52A0\u5931\u8D25"+e)})},ne=o=>{Y(o).then(e=>{e.status==200?_.success("\u6DFB\u52A0\u9ED8\u8BA4\u89C4\u5219\u6210\u529F"):_.error("\u6DFB\u52A0\u9ED8\u8BA4\u89C4\u5219\u5931\u8D25,"+e.message)}).catch(e=>{_.error("\u6DFB\u52A0\u9ED8\u8BA4\u89C4\u5219\u5931\u8D25"+e)})},ie=(o,e)=>{De(o,e).then(n=>{n.status==200?(_.success("\u7F16\u8F91\u6210\u529F"),w(),k.value=!1):_.error("\u7F16\u8F91\u5931\u8D25,"+n.message)}).catch(n=>{_.error("\u7F16\u8F91\u5931\u8D25"+n)})},ue=o=>{Ue(o).then(e=>{e.status==200?(_.success("\u5220\u9664\u6210\u529F"),w()):_.error("\u5220\u9664\u5931\u8D25,"+e.message)}).catch(e=>{_.error("\u5220\u9664\u5931\u8D25"+e)})},re=o=>{console.log(o),k.value=!0,H.value=o.id,d.main_product_id=o.main_product_id,d.product_id=o.product_id,d.ad_gap_ratio=o.ad_gap_ratio,d.phone=o.phone},se=o=>{Ce.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F","\u26A0\uFE0F\u8B66\u544A",{confirmButtonText:"\u662F",cancelButtonText:"\u5426",type:"warning"}).then(()=>{console.log(o),ue(o)}).catch(()=>{_({type:"info",message:"\u53D6\u6D88\u64CD\u4F5C"})})};W(()=>U.mainProductId,(o,e)=>{z.value=!0,V.main_product_id=o,V.product_id="",w()}),W(()=>i.main_product_id,(o,e)=>{i.product_id="",Q({main_product_id:o}).then(s=>{(s.status=200)&&(J.productList=s.data)}).catch(s=>console.log(s))});const pe=()=>{d.product_id=""};W(()=>d.main_product_id,(o,e)=>{Q({main_product_id:o}).then(s=>{(s.status=200)&&(K.productList=s.data)}).catch(s=>console.log(s))});const _e=o=>{o.validate((e,n)=>{e?(de(i),console.log(i),x.value=!1,o.value.resetFields()):console.log("error submit!",n)})},T=()=>{i.main_product_id="",i.product_id="",i.ad_gap_ratio="",i.phone="",d.main_product_id="",d.product_id="",d.ad_gap_ratio="",d.phone=""},ce=o=>{o.validate((e,n)=>{e?(console.log(d),ie(H.value,d)):console.log("error submit!",n)})},me=o=>{o.validate((e,n)=>{e?(console.log(f),ne(f),C.value=!1):console.log("error submit!",n)})};return w(),(o,e)=>{const n=r("el-breadcrumb-item"),s=r("el-breadcrumb"),m=r("el-button"),u=r("el-form-item"),O=r("el-col"),fe=r("el-row"),L=r("el-form"),B=r("el-table-column"),ge=r("el-table"),$=r("el-option"),P=r("el-select"),E=r("el-input-number"),I=r("el-input"),R=r("el-dialog"),be=r("el-pagination"),ve=ye("loading");return p(),D("div",null,[M("div",Le,[l(s,{separator:"/"},{default:a(()=>[l(n,null,{default:a(()=>[Be]),_:1}),l(n,null,{default:a(()=>[$e]),_:1})]),_:1})]),M("div",Pe,[l(L,null,{default:a(()=>[l(fe,{gutter:20},{default:a(()=>[l(O,{span:3},{default:a(()=>[l(u,null,{default:a(()=>[y(ee)?(p(),b(m,{key:0,type:"primary",onClick:e[0]||(e[0]=t=>x.value=!0)},{default:a(()=>[Ae]),_:1})):A("v-if",!0)]),_:1})]),_:1}),l(O,{span:3},{default:a(()=>[l(u,null,{default:a(()=>[l(m,{type:"info",onClick:oe},{default:a(()=>[qe]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),y(Z)?xe((p(),b(ge,{key:0,data:G.value,border:""},{default:a(()=>[l(B,{label:"\u5E94\u7528\u540D\u79F0",prop:"product_name"}),l(B,{label:"\u5E7F\u544A\u5C55\u793A\u4E0E\u56DE\u8C03gap\u503C"},{default:a(t=>[c(ke(t.row.ad_gap_ratio+"%"),1)]),_:1}),l(B,{label:"\u9884\u8B66\u624B\u673A\u53F7",prop:"phone"}),l(B,{label:"\u64CD\u4F5C"},{default:a(t=>[y(te)?(p(),b(m,{key:0,type:"text",icon:"el-icon-edit",onClick:he=>re(t.row)},{default:a(()=>[Fe]),_:2},1032,["onClick"])):A("v-if",!0),y(le)?(p(),b(m,{key:1,style:{color:"red"},type:"text",icon:"el-icon-delete",onClick:he=>se(t.row.id)},{default:a(()=>[Ne]),_:2},1032,["onClick"])):A("v-if",!0)]),_:1})]),_:1},8,["data"])),[[ve,z.value]]):A("v-if",!0),l(R,{modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),title:"\u65B0\u589E\u5E7F\u544A\u5C55\u793Agap\u503C\u9884\u8B66",width:"45%",onClose:T},{default:a(()=>[l(L,{ref_key:"ruleFormRef",ref:h,model:i,rules:j,"status-icon":""},{default:a(()=>[l(u,{"label-width":"220px",prop:"main_product_id",label:"\u9009\u62E9\u9879\u76EE"},{default:a(()=>[l(P,{style:{width:"200px"},modelValue:i.main_product_id,"onUpdate:modelValue":e[1]||(e[1]=t=>i.main_product_id=t)},{default:a(()=>[(p(!0),D(q,null,F(y(U).mainProductList,t=>(p(),b($,{value:t.id,key:t.id,label:t.main_product_name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{"label-width":"220px",prop:"product_id",label:"\u9009\u62E9\u5E94\u7528"},{default:a(()=>[l(P,{style:{width:"200px"},modelValue:i.product_id,"onUpdate:modelValue":e[2]||(e[2]=t=>i.product_id=t)},{default:a(()=>[(p(!0),D(q,null,F(J.productList,t=>(p(),b($,{value:t.product_id,key:t.product_id,label:t.product_name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{"label-width":"220px",prop:"ad_gap_ratio",label:"\u5E7F\u544A\u5F02\u5E38\u5C55\u793Agap\u503C\u5F02\u5E38\u767E\u5206\u6BD4"},{default:a(()=>[l(E,{controls:!1,modelValue:i.ad_gap_ratio,"onUpdate:modelValue":e[3]||(e[3]=t=>i.ad_gap_ratio=t),precision:2,max:100,style:{width:"200px"}},null,8,["modelValue"])]),_:1}),l(u,{"label-width":"220px",prop:"phone",label:"\u9884\u8B66\u624B\u673A\u53F7"},{default:a(()=>[l(I,{style:{width:"200px"},modelValue:i.phone,"onUpdate:modelValue":e[4]||(e[4]=t=>i.phone=t)},null,8,["modelValue"])]),_:1}),l(u,{"label-width":"220px"},{default:a(()=>[l(m,{type:"info",onClick:e[5]||(e[5]=t=>x.value=!1)},{default:a(()=>[ze]),_:1}),l(m,{type:"primary",onClick:e[6]||(e[6]=t=>_e(h.value))},{default:a(()=>[je]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(R,{modelValue:k.value,"onUpdate:modelValue":e[14]||(e[14]=t=>k.value=t),title:"\u7F16\u8F91\u5E7F\u544A\u5C55\u793Agap\u503C\u9884\u8B66",width:"45%",onClose:T},{default:a(()=>[l(L,{ref_key:"ruleFormRef",ref:h,model:d,rules:j,"status-icon":""},{default:a(()=>[l(u,{"label-width":"220px",prop:"main_product_id",label:"\u9009\u62E9\u9879\u76EE"},{default:a(()=>[l(P,{style:{width:"200px"},modelValue:d.main_product_id,"onUpdate:modelValue":e[8]||(e[8]=t=>d.main_product_id=t),onChange:pe},{default:a(()=>[(p(!0),D(q,null,F(y(U).mainProductList,t=>(p(),b($,{value:t.id,key:t.id,label:t.main_product_name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{"label-width":"220px",prop:"product_id",label:"\u9009\u62E9\u5E94\u7528"},{default:a(()=>[l(P,{style:{width:"200px"},modelValue:d.product_id,"onUpdate:modelValue":e[9]||(e[9]=t=>d.product_id=t)},{default:a(()=>[(p(!0),D(q,null,F(K.productList,t=>(p(),b($,{value:t.product_id,key:t.product_id,label:t.product_name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{"label-width":"220px",prop:"ad_gap_ratio",label:"\u5E7F\u544A\u5F02\u5E38\u5C55\u793Agap\u503C\u5F02\u5E38\u767E\u5206\u6BD4"},{default:a(()=>[l(E,{controls:!1,modelValue:d.ad_gap_ratio,"onUpdate:modelValue":e[10]||(e[10]=t=>d.ad_gap_ratio=t),precision:2,max:100,style:{width:"200px"}},null,8,["modelValue"])]),_:1}),l(u,{"label-width":"220px",prop:"phone",label:"\u9884\u8B66\u624B\u673A\u53F7"},{default:a(()=>[l(I,{style:{width:"200px"},modelValue:d.phone,"onUpdate:modelValue":e[11]||(e[11]=t=>d.phone=t)},null,8,["modelValue"])]),_:1}),l(u,{"label-width":"220px"},{default:a(()=>[l(m,{type:"info",onClick:e[12]||(e[12]=t=>k.value=!1)},{default:a(()=>[Te]),_:1}),l(m,{type:"primary",onClick:e[13]||(e[13]=t=>ce(h.value))},{default:a(()=>[Ee]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(R,{modelValue:C.value,"onUpdate:modelValue":e[19]||(e[19]=t=>C.value=t),title:"\u9ED8\u8BA4\u914D\u7F6E",width:"45%",onClose:T},{default:a(()=>[l(L,{ref_key:"ruleFormRef",ref:h,model:f,rules:j,"status-icon":""},{default:a(()=>[l(u,{"label-width":"220px",prop:"ad_gap_ratio",label:"\u5E7F\u544A\u5F02\u5E38\u5C55\u793Agap\u503C\u5F02\u5E38\u767E\u5206\u6BD4"},{default:a(()=>[l(E,{controls:!1,modelValue:f.ad_gap_ratio,"onUpdate:modelValue":e[15]||(e[15]=t=>f.ad_gap_ratio=t),precision:2,max:100,style:{width:"200px"}},null,8,["modelValue"])]),_:1}),l(u,{"label-width":"220px",prop:"phone",label:"\u9884\u8B66\u624B\u673A\u53F7"},{default:a(()=>[l(I,{style:{width:"200px"},modelValue:f.phone,"onUpdate:modelValue":e[16]||(e[16]=t=>f.phone=t)},null,8,["modelValue"])]),_:1}),l(u,{"label-width":"220px"},{default:a(()=>[l(m,{type:"info",onClick:e[17]||(e[17]=t=>C.value=!1)},{default:a(()=>[Ie]),_:1}),l(m,{type:"primary",onClick:e[18]||(e[18]=t=>me(h.value))},{default:a(()=>[Re]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),M("div",We,[l(be,{background:"",layout:"total, prev, pager, next","current-page":V.page_index,"page-size":V.page_size,total:S.value,onCurrentChange:ae},null,8,["current-page","page-size","total"])])])])}}},Oe=Ve(Me,[["__file","/Users/apple/Desktop/project-b/relationship.b/src/views/waringrulesconfig/WaringAd.vue"]]);export{Oe as default};
