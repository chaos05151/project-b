import{_ as xe,C as Pe,u as De,D as M,r as s,O as Ce,w as Te,e as c,a as b,c as N,t as D,j as a,k as o,h as k,y as n,p as P,z as _,S as Se,l as m,T as Ue,b as Ie,F as H,m as J,q as V,U as y,A as Be,B as je,V as $e,W as ze,X as Le,Y as Ae,Z as Ee,$ as Me}from"./index.3fee5d13.js";import{s as j}from"./showButton.83421764.js";const Ne=$=>(Be("data-v-628a05d9"),$=$(),je(),$),Fe={class:"crumbs"},qe=_("\u98CE\u63A7\u7CFB\u7EDF"),Oe=_("\u4EA7\u54C1\u7BA1\u7406"),Re={class:"container"},We={class:"handle-box"},Xe=Ne(()=>D("span",null,"\u5E94\u7528\u9009\u62E9",-1)),Ye=_("\xA0\xA0 "),Ze=_("\u65B0\u589E\u9879\u76EE"),Ge=_("\u641C\u7D22"),He=_("\u91CD\u7F6E"),Je=_("\u98CE\u63A7\u914D\u7F6E "),Ke=_("\u7F16\u8F91 "),Qe=_("\u5220\u9664 "),et={class:"pagination"},tt={class:"dialog-footer"},at=_("\u53D6 \u6D88"),lt=_("\u786E \u5B9A"),ot={class:"dialog-footer"},dt=_("\u53D6 \u6D88"),nt=_("\u786E \u5B9A"),ut={__name:"ProductTable",setup($){const K=j("product:product:view"),Q=j("product:product:add"),ee=j("product:product:del"),te=j("product:product:edit"),ae=j("product:product:config"),le=Pe(),U=De(),d=M({page_index:1,page_size:10}),F=s(0),g=s(""),z=s(""),v=s(""),C=s(0),q=s([]);s("");const w=s("\u9879\u76EE");let oe=s([]),O=s([]),R=s([]);const L=Ce("reload",Function,!0),u=t=>{Se(t).then(e=>{e.status==200?(F.value=e.data.total_count,q.value=e.data.lists):m.error(e==null?void 0:e.message)}).catch(()=>{})},T=()=>{Ue().then(t=>{oe.value=t.data,R.value=t.data,g.value=t.data[0].id;let e={...d,main_product_id:U.mainProductId};u(e)}).catch(()=>{})},W=t=>{Ie({main_product_id:t}).then(p=>{O.value=p.data}).catch(()=>{})},de=(t,e)=>{ze(t,e).then(p=>{p.status==200?(m.success("\u4FEE\u6539\u6210\u529F"),u(d),T()):(m.error("\u4FEE\u6539\u5931\u8D25"),u(d))}).catch(()=>{m.error("\u4FEE\u6539\u5931\u8D25"),u(d)})},ne=t=>{Le(t).then(e=>{e.status==200?(m.success("\u5220\u9664\u6210\u529F"),u(d),T(),L()):e.status==""&&m.error("\u8BF7\u5148\u5220\u9664\u5BF9\u5E94\u7684\u5E94\u7528\uFF01")})},ue=t=>{Ae(t).then(e=>{e.status==200&&(m.success("\u5220\u9664\u6210\u529F"),u(d),T(),L())})},se=t=>{Ee(t).then(e=>{e.status==200&&(m.success("\u65B0\u589E\u9879\u76EE\u6210\u529F"),u(d),T(),L())}),r.main_product_name=""},ce=(t,e)=>{Me(t,e).then(p=>{p.status==200&&(m.success("\u65B0\u589E\u5E94\u7528\u6210\u529F"),u(d),T(),L())})};g.value="",v.value="",u(d),T();const re=()=>{if(g.value=="")u(d);else if(v.value==""){const t={main_product_id:g.value,...d};u(t)}else{const t={product_id:v.value,...d};u(t)}};Te(()=>U.mainProductId,(t,e)=>{g.value=t,console.log(U.selectTreeData),W(t)});const _e=()=>{if(v.value="",g.value=="")u(d);else if(v.value==""){const t={main_product_id:g.value,...d};u(t)}else{const t={product_id:v.value,...d};u(t)}},ie=t=>{d.page_index=t,ge()},pe=(t,e)=>{$e.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{e>""?ue(e):ne(t)}).catch(()=>{})},I=s(!1),B=s(!1);let i=M({id:"",main_product_id:"",product_id:"",main_product_name:"",product_name:"",package_name:""}),r=M({main_product_name:"",product_name:"",package_name:""});const me=(t,e)=>{C.value=s(""),e.product_id==""?C.value=0:C.value=1,Object.keys(i).forEach(p=>{i[p]=e[p]}),I.value=!0},ve=()=>{B.value=!0},fe=()=>{I.value=!1,i.main_product_name;const t={package_name:i.package_name};C.value==1&&de(i.product_id,t)},be=()=>{B.value=!1;let t={main_product_name:r.main_product_name};if(w.value=="\u9879\u76EE")if(r.main_product_name)se(t);else{m.error("\u6E38\u620F\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}else if(r.product_name&&r.package_name&&z.value)t={product_name:r.product_name,package_name:r.package_name},ce(z.value,t);else{m.error("\u6E38\u620F\u540D\u548C\u5305\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}};W(U.mainProductId);const ge=()=>{if(g.value=="")u(d);else if(v.value==""){const t={main_product_id:g.value,...d};u(t)}else{const t={product_id:v.value,...d};u(t)}},he=t=>{le.push({name:"productrisk"}),U.setproduct(t)};return(t,e)=>{const p=c("el-breadcrumb-item"),ke=c("el-breadcrumb"),A=c("el-option"),X=c("el-select"),f=c("el-button"),x=c("el-table-column"),Ve=c("el-table"),ye=c("el-pagination"),S=c("el-input"),h=c("el-form-item"),E=c("el-form"),Y=c("el-dialog"),Z=c("el-radio"),we=c("el-radio-group");return b(),N("div",null,[D("div",Fe,[a(ke,{separator:"/"},{default:o(()=>[a(p,null,{default:o(()=>[qe]),_:1}),a(p,null,{default:o(()=>[Oe]),_:1})]),_:1})]),D("div",Re,[D("div",We,[k("v-if",!0),Xe,a(X,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=l=>v.value=l),placeholder:"\u5E94\u7528",class:"m-2",style:{width:"200px"}},{default:o(()=>[a(A,{label:"\u5168\u90E8",value:""}),(b(!0),N(H,null,J(n(O),l=>(b(),P(A,{key:l.product_id,label:l.product_name,value:l.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Ye,n(Q)?(b(),P(f,{key:1,type:"primary",onClick:ve},{default:o(()=>[Ze]),_:1})):k("v-if",!0),a(f,{type:"primary",icon:"el-icon-search",onClick:re},{default:o(()=>[Ge]),_:1}),a(f,{type:"primary",onClick:_e},{default:o(()=>[He]),_:1})]),n(K)?(b(),P(Ve,{key:0,data:q.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:o(()=>[a(x,{prop:"main_product_id",sortable:"",label:"\u9879\u76EEID"}),a(x,{prop:"main_product_name",label:"\u9879\u76EE"}),a(x,{prop:"product_id",label:"\u5E94\u7528ID"}),a(x,{prop:"product_name",label:"\u5E94\u7528"}),a(x,{prop:"md5key",label:"md5key"}),a(x,{prop:"package_name",label:"\u5305\u540D"}),a(x,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:o(l=>[n(ae)?V((b(),P(f,{key:0,type:"text",icon:"el-icon-link",onClick:G=>he(l.row)},{default:o(()=>[Je]),_:2},1032,["onClick"])),[[y,l.row.product_id>""]]):k("v-if",!0),n(te)?V((b(),P(f,{key:1,type:"text",icon:"el-icon-edit",onClick:G=>me(l.row.id,l.row)},{default:o(()=>[Ke]),_:2},1032,["onClick"])),[[y,l.row.product_id>""]]):k("v-if",!0),n(ee)?(b(),P(f,{key:2,type:"text",icon:"el-icon-delete",class:"red",onClick:G=>pe(l.row.main_product_id,l.row.product_id)},{default:o(()=>[Qe]),_:2},1032,["onClick"])):k("v-if",!0)]),_:1})]),_:1},8,["data"])):k("v-if",!0),D("div",et,[a(ye,{background:"",layout:"total, prev, pager, next","current-page":d.page_index,"page-size":d.page_size,total:F.value,onCurrentChange:ie},null,8,["current-page","page-size","total"])])]),k(" \u7F16\u8F91\u5F39\u51FA\u6846 "),a(Y,{title:"\u7F16\u8F91",modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=l=>I.value=l),width:"60%"},{footer:o(()=>[D("span",tt,[a(f,{onClick:e[5]||(e[5]=l=>I.value=!1)},{default:o(()=>[at]),_:1}),a(f,{type:"primary",onClick:fe},{default:o(()=>[lt]),_:1})])]),default:o(()=>[V(a(E,{"label-width":"110px"},{default:o(()=>[a(h,{label:"\u9879\u76EE\u540D"},{default:o(()=>[a(S,{modelValue:n(i).main_product_name,"onUpdate:modelValue":e[2]||(e[2]=l=>n(i).main_product_name=l)},null,8,["modelValue"])]),_:1})]),_:1},512),[[y,C.value==0]]),V(a(E,{"label-width":"110px"},{default:o(()=>[a(h,{label:"\u5E94\u7528\u540D"},{default:o(()=>[a(S,{disabled:"",modelValue:n(i).product_name,"onUpdate:modelValue":e[3]||(e[3]=l=>n(i).product_name=l)},null,8,["modelValue"])]),_:1}),a(h,{label:"\u5305\u540D"},{default:o(()=>[a(S,{modelValue:n(i).package_name,"onUpdate:modelValue":e[4]||(e[4]=l=>n(i).package_name=l)},null,8,["modelValue"])]),_:1})]),_:1},512),[[y,C.value==1]])]),_:1},8,["modelValue"]),k(" \u65B0\u589E\u5F39\u51FA\u6846 "),a(Y,{title:"\u65B0\u589E\u9879\u76EE",modelValue:B.value,"onUpdate:modelValue":e[13]||(e[13]=l=>B.value=l),width:"60%"},{footer:o(()=>[D("span",ot,[a(f,{onClick:e[12]||(e[12]=l=>B.value=!1)},{default:o(()=>[dt]),_:1}),a(f,{type:"primary",onClick:be},{default:o(()=>[nt]),_:1})])]),default:o(()=>[a(E,{"label-width":"70px"},{default:o(()=>[a(h,{label:"\u6E38\u620F\u7C7B\u578B",prop:"resource"},{default:o(()=>[a(we,{modelValue:w.value,"onUpdate:modelValue":e[7]||(e[7]=l=>w.value=l)},{default:o(()=>[a(Z,{label:"\u9879\u76EE"}),a(Z,{label:"\u5E94\u7528"})]),_:1},8,["modelValue"])]),_:1}),V(a(h,{label:"\u9879\u76EE",prop:"resource"},{default:o(()=>[a(X,{modelValue:z.value,"onUpdate:modelValue":e[8]||(e[8]=l=>z.value=l),placeholder:"\u9879\u76EE",class:"m-2",style:{width:"200px"}},{default:o(()=>[(b(!0),N(H,null,J(n(R),l=>(b(),P(A,{key:l.id,label:l.main_product_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[y,w.value=="\u5E94\u7528"]]),V(a(h,{label:"\u9879\u76EE"},{default:o(()=>[a(S,{modelValue:n(r).main_product_name,"onUpdate:modelValue":e[9]||(e[9]=l=>n(r).main_product_name=l),style:{width:"200px"}},null,8,["modelValue"])]),_:1},512),[[y,w.value=="\u9879\u76EE"]]),V(a(h,{label:"\u5E94\u7528"},{default:o(()=>[a(S,{modelValue:n(r).product_name,"onUpdate:modelValue":e[10]||(e[10]=l=>n(r).product_name=l),style:{width:"200px"}},null,8,["modelValue"])]),_:1},512),[[y,w.value=="\u5E94\u7528"]]),V(a(h,{label:"\u5305\u540D"},{default:o(()=>[a(S,{modelValue:n(r).package_name,"onUpdate:modelValue":e[11]||(e[11]=l=>n(r).package_name=l),style:{width:"200px"}},null,8,["modelValue"])]),_:1},512),[[y,w.value=="\u5E94\u7528"]])]),_:1})]),_:1},8,["modelValue"])])}}},rt=xe(ut,[["__scopeId","data-v-628a05d9"],["__file","/Users/apple/Desktop/project-b/relationship.b/src/views/ProductTable.vue"]]);export{rt as default};
