import{_ as pe,u as me,C as fe,r as c,D as I,w as ve,e as i,a as u,c as p,t as L,j as a,k as l,T as he,f as ge,b as be,h as $,F as m,m as f,p as v,y as k,z as r,v as P,q as ye,U as Ve,l as b,V as ke}from"./index.3fee5d13.js";import{h as we}from"./moment.9709ab41.js";import{b as F,c as Ce,g as xe}from"./shop.899b24a0.js";import{r as Se}from"./risk.4dfb295f.js";import{s as w}from"./shop.eb8d0c28.js";const De={class:"crumbs"},Ne=r("\u98CE\u63A7\u7CFB\u7EDF"),Ue=r("\u5B9E\u540D\u8BA4\u8BC1/\u9632\u6C89\u8FF7"),ze={class:"container"},Le=r("\u67E5\u8BE2"),Pe=r("\u91CD\u7F6E"),Te=r("\u65B0\u589E\u9879\u76EE"),Je=r("\u7F16\u8F91 "),Oe=r("\u5220\u9664 "),Ye=r("\u53D6\u6D88"),Be=r("\u4FDD\u5B58"),Me={class:"pagination"},Re={__name:"auditsettings",setup(je){const T=me(),J=fe(),A=Se(),G=w.RiskHeaderThirdTab.filter(o=>o.show),O=c([]),Y=c([]),B=c([]),C=c([]),S=c([]),D=c([]),N=c(!1),s=c({real_name_authentication_status:"",certification_node_status:"",anti_addiction_status:"",anti_addiction_open_condition:"",privacy_agreement_status:"",appoint_time:"",config_type:0});I({main_product_id:null,product_id:"",channel:"",versions_b:""});const n=I({main_product_id:T.mainProductId,product_id:"",channel:"",versions_b:"",page_index:1,page_size:10,config_type:1}),M=c(1),R=()=>{F({config_type:0}).then(t=>{t.status==200&&(s.value=t.data.lists[0],s.value.appoint_time=t.data.lists[0].appoint_time.split("~"),console.log(t))}).catch(t=>{console.log(t)})},K=()=>{let o=JSON.parse(JSON.stringify(s.value));o.appoint_time=o.appoint_time.join("~"),Ce(o).then(t=>{t.status==200&&(b.success("\u9ED8\u8BA4\u89C4\u5219\u4FDD\u5B58\u6210\u529F"),R())}).catch(t=>{b.error(t)})},Q=async()=>{try{const o=await he(),t=await ge();Y.value=o.data,S.value=t.data,y(n)}catch{}},W=o=>{be({main_product_id:o}).then(d=>{d.status==200&&(console.log(d.data),B.value=d.data)}).catch(()=>{})},X=o=>{n.channel="",console.log(o.toString(),S.value),JSON.parse(JSON.stringify(S.value)).forEach(d=>{d.value==o.toString()&&(C.value=d.children)})},Z=o=>{n.versions_b="",JSON.parse(JSON.stringify(C.value)).map(d=>{d.value==o&&(D.value=d.children)})},ee=o=>{console.log(o)};ve(()=>T.mainProductId,(o,t)=>{n.main_product_id=o,n.product_id="",n.channel="",n.versions_b="",C.value=[],D.value=[],W(o)});const y=()=>{F(n).then(o=>{o.status==200&&(O.value=o.data.lists.map(t=>(M.value=o.data.total_count,{...t,updated_at:we(t.updated_at).format("YYYY-MM-DD HH:mm:ss"),real_name_authentication_status:t.real_name_authentication_status==1?"\u4E0D\u5F00\u542F":t.real_name_authentication_status==2?"\u5F00\u542F(\u975E\u5F3A\u5236)":"\u5F00\u542F(\u5F3A\u5236)",real_name_authentication_node:t.real_name_authentication_node==1?"\u767B\u5F55\u524D":"",anti_addiction_status:t.anti_addiction_status==1?"\u5173\u95ED":t.anti_addiction_status==2?"\u90E8\u5206\u5F00\u542F":"\u5168\u90E8\u5F00\u542F",anti_addiction_open_condition:t.anti_addiction_open_condition==1?"\u65B0\u7528\u6237":"\u8001\u7528\u6237",privacy_agreement_status:t.privacy_agreement_status==1?"\u5173\u95ED":"\u5F00\u542F"})))}).catch(o=>{console.log(o)})},te=()=>{console.log(n),y()},ae=(o,t)=>{console.log(o),A.setshopdata(t),J.push({name:"auditsettingseidtor"})},le=o=>{ke.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F","\u26A0\uFE0F\u8B66\u544A",{confirmButtonText:"\u662F",cancelButtonText:"\u5426",type:"warning"}).then(()=>{console.log(o),xe(o).then(t=>{(t.status=200)?(b.success("\u5220\u9664\u6210\u529F"),y()):b.error("\u5220\u9664\u5931\u8D25")}).catch(t=>{b.error(t)})}).catch(()=>{b({type:"info",message:"\u53D6\u6D88\u64CD\u4F5C"})})},oe=o=>{n.page_index=o,y()},ne=()=>{let o=JSON.parse(JSON.stringify(Y.value));n.main_product_id=o[0].id,n.product_id="",n.channel="",n.versions_b="",n.page_index=1,n.page_size=10,n.config_type=1,y()},se=()=>{J.push({name:"auditsettingsadd"})};return R(),Q(),(o,t)=>{const d=i("el-breadcrumb-item"),ie=i("el-breadcrumb"),g=i("el-option"),x=i("el-select"),_=i("el-form-item"),V=i("el-col"),h=i("el-button"),j=i("el-row"),H=i("el-form"),E=i("el-table-column"),ue=i("el-table"),U=i("el-radio"),z=i("el-radio-group"),de=i("el-switch"),re=i("el-date-picker"),_e=i("el-drawer"),ce=i("el-pagination");return u(),p("div",null,[L("div",De,[a(ie,{separator:"/"},{default:l(()=>[a(d,null,{default:l(()=>[Ne]),_:1}),a(d,null,{default:l(()=>[Ue]),_:1})]),_:1})]),L("div",ze,[a(H,null,{default:l(()=>[a(j,{gutter:20},{default:l(()=>[a(V,{span:"4"},{default:l(()=>[$("v-if",!0)]),_:1}),a(V,{span:"4"},{default:l(()=>[a(_,{label:"\u5E94\u7528"},{default:l(()=>[a(x,{modelValue:n.product_id,"onUpdate:modelValue":t[1]||(t[1]=e=>n.product_id=e),placeholder:"\u9009\u62E9\u5E94\u7528",style:{width:"150px"},onChange:X},{default:l(()=>[a(g,{label:"\u5168\u90E8",value:""}),(u(!0),p(m,null,f(B.value,e=>(u(),v(g,{key:e.product_id,label:e.product_name,value:e.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(V,{span:"4"},{default:l(()=>[a(_,{label:"\u6E20\u9053"},{default:l(()=>[a(x,{modelValue:n.channel,"onUpdate:modelValue":t[2]||(t[2]=e=>n.channel=e),placeholder:"\u9009\u62E9\u6E20\u9053",style:{width:"150px"},onChange:Z},{default:l(()=>[a(g,{label:"\u5168\u90E8",value:""}),(u(!0),p(m,null,f(C.value,e=>(u(),v(g,{key:e.value,label:e.label_name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(V,{span:"4"},{default:l(()=>[a(_,{label:"\u7248\u672C"},{default:l(()=>[a(x,{style:{width:"150px"},modelValue:n.versions_b,"onUpdate:modelValue":t[3]||(t[3]=e=>n.versions_b=e),placeholder:"\u8BF7\u9009\u62E9\u7248\u672C",onChange:ee},{default:l(()=>[(u(!0),p(m,null,f(D.value,e=>(u(),v(g,{value:e.value,label:e.label,key:e.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(V,{span:"2"},{default:l(()=>[a(h,{type:"primary",class:"heigth",size:"small",onClick:te},{default:l(()=>[Le]),_:1}),a(h,{type:"primary",class:"heigth",size:"small",onClick:ne},{default:l(()=>[Pe]),_:1})]),_:1})]),_:1})]),_:1}),a(j,{class:"configuration"},{default:l(()=>[$(' <el-button  type="primary" size="small" @click="realNameShow=true">\u9ED8\u8BA4\u914D\u7F6E</el-button> '),a(h,{type:"primary",onClick:se},{default:l(()=>[Te]),_:1})]),_:1}),a(ue,{data:O.value,style:{width:"100%","margin-top":"10px"}},{default:l(()=>[(u(!0),p(m,null,f(k(G),(e,q)=>(u(),v(E,{prop:e.prop,label:e.label,key:e.prop},null,8,["prop","label"]))),128)),a(E,{label:"\u64CD\u4F5C"},{default:l(e=>[a(h,{type:"text",icon:"el-icon-edit",onClick:q=>ae(e.row.id,e.row)},{default:l(()=>[Je]),_:2},1032,["onClick"]),a(h,{type:"text",icon:"el-icon-delete",onClick:q=>le(e.row.id)},{default:l(()=>[Oe]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(_e,{modelValue:N.value,"onUpdate:modelValue":t[11]||(t[11]=e=>N.value=e),title:"\u5B9E\u540D\u8BA4\u8BC1&\u9632\u6C89\u8FF7\u9ED8\u8BA4\u89C4\u5219\u4FE1\u606F\uFF1A",direction:"rtl",size:"50%"},{default:l(()=>[a(H,{ref:"formRef",model:s.value,"label-width":"280px"},{default:l(()=>[a(_,{label:"\u662F\u5426\u5F00\u542F\u5B9E\u540D\u8BA4\u8BC1",prop:"real_name_authentication_status"},{default:l(()=>[a(z,{modelValue:s.value.real_name_authentication_status,"onUpdate:modelValue":t[4]||(t[4]=e=>s.value.real_name_authentication_status=e)},{default:l(()=>[(u(!0),p(m,null,f(k(w).real_name_authentication_list,e=>(u(),v(U,{label:e.value,key:e.value},{default:l(()=>[r(P(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(_,{label:"\u5B9E\u540D\u8BA4\u8BC1\u8282\u70B9",prop:"certification_node_status"},{default:l(()=>[a(x,{modelValue:s.value.certification_node_status,"onUpdate:modelValue":t[5]||(t[5]=e=>s.value.certification_node_status=e),placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[(u(!0),p(m,null,f(k(w).certification_node_list,e=>(u(),v(g,{value:e.value,label:e.label,key:e.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(_,{label:"\u9632\u6C89\u8FF7\u5F00\u542F",prop:"anti_addiction_status"},{default:l(()=>[a(z,{modelValue:s.value.anti_addiction_status,"onUpdate:modelValue":t[6]||(t[6]=e=>s.value.anti_addiction_status=e)},{default:l(()=>[(u(!0),p(m,null,f(k(w).anti_addiction_status_list,e=>(u(),v(U,{label:e.value,key:e.value},{default:l(()=>[r(P(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),ye(a(_,{label:"\u5F00\u542F\u6761\u4EF6",prop:"anti_addiction_open_condition"},{default:l(()=>[a(z,{modelValue:s.value.anti_addiction_open_condition,"onUpdate:modelValue":t[7]||(t[7]=e=>s.value.anti_addiction_open_condition=e)},{default:l(()=>[(u(!0),p(m,null,f(k(w).anti_addiction_open_condition_list,e=>(u(),v(U,{label:e.value,key:e.value},{default:l(()=>[r(P(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[Ve,s.value.anti_addiction_status==2]]),a(_,{label:"\u9690\u79C1\u534F\u8BAE",prop:"privacy_agreement_status"},{default:l(()=>[a(de,{modelValue:s.value.privacy_agreement_status,"onUpdate:modelValue":t[8]||(t[8]=e=>s.value.privacy_agreement_status=e),"active-value":2,"inactive-value":1},null,8,["modelValue"])]),_:1}),a(_,{label:"\u751F\u6548\u65F6\u95F4",prop:"appoint_time"},{default:l(()=>[a(re,{modelValue:s.value.appoint_time,"onUpdate:modelValue":t[9]||(t[9]=e=>s.value.appoint_time=e),type:"datetimerange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(_,null,{default:l(()=>[a(h,{type:"primary",onClick:t[10]||(t[10]=e=>N.value=!1)},{default:l(()=>[Ye]),_:1}),a(h,{type:"primary",onClick:K},{default:l(()=>[Be]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),L("div",Me,[a(ce,{background:"",layout:"total, prev, pager, next","current-page":n.page_index,"page-size":n.page_size,total:M.value,onCurrentChange:oe},null,8,["current-page","page-size","total"])])])])}}},Fe=pe(Re,[["__scopeId","data-v-34bfb9fa"],["__file","/Users/apple/Desktop/project-b/relationship.b/src/views/AuditSettings/auditsettings.vue"]]);export{Fe as default};
