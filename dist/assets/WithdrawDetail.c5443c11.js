import{_ as $,g as s,f as F,M as ee,u as ae,r as m,o as w,c as V,a as k,b as a,w as c,H as q,F as S,I as T,J as U,e as f,t as Y,K as A,L as O,E as W}from"./index.8b725170.js";import{a as te,b as oe}from"./product.8200d93e.js";import{h as R}from"./moment.9709ab41.js";import{l as J,m as ne}from"./user.61aed8c8.js";import"./request.75bcd234.js";const _=s(""),g=s(""),K=s([]),G=s(),de=s("\u9879\u76EE"),y=F({}),Q=s(0),l=F({product_id:"",page_index:1,page_size:10,status:1});let v=s(""),P=s([]),B=s([]),X=s([]);const L=s(),le=s(!1),h=t=>{J(t).then(d=>{var u;return K.value=(u=d.data)==null?void 0:u.lists.map(e=>({...e,updated_at:R(e.updated_at).format("YYYY-MM-DD HH:mm:ss")})),Q.value=d.data.total_count,y.apply_users_count=d.data.apply_users_count,y.unaudit_orders_count=d.data.unaudit_orders_count,y.unaudit_reward_sum=d.data.unaudit_reward_sum,t={...t,page_size:d.data.total_count},t}).catch(()=>{})},re=t=>{J(t).then(d=>{var u;G.value=(u=d.data)==null?void 0:u.lists.map(e=>({...{wechat_user_id:e.wechat_user_id,main_product_name:e.main_product_name,product_name:e.product_name,nickname:e.nickname,bind_account_count:e.bind_account_count,amount:e.amount,oaid:e.oaid,ip:e.ip,ip_address:e.ip_address,updated_at:e.updated_at},updated_at:R(e.updated_at).format("YYYY-MM-DD HH:mm:ss")}))}).catch(()=>{})},ce=()=>{te().then(t=>{P.value=t.data,X.value=t.data}).catch(()=>{})},M=t=>{oe({main_product_id:t}).then(u=>{B.value=u.data}).catch(()=>{})},j=(t,d)=>{ne({id:t,status:d}).then(e=>{e.status==200?(W.success("\u5BA1\u6838\u6210\u529F\uFF01"),h(l)):W.error(e.message)}).catch(()=>{})},_e={name:"basetable",setup(){g.value="",typeof _.value=="number"&&(v.value=_.value),_.value="";const t=ee();t.params.product_name!==""?(_.value=t.params.main_product_name,g.value=t.params.product_name,l.product_id=t.params.product_id,v.value=t.params.main_product_id,M(t.params.main_product_id)):(delete l.product_id,t.params.main_product_name!==""&&(_.value=t.params.main_product_name,v.value=t.params.main_product_id,M(t.params.main_product_id))),l.status=1,h(l),ce();const d=n=>{if(n!==null){let o=[];n.forEach(i=>{i!=null&&o.push(R(i).format("YYYY-MM-DD HH:mm:ss"))});let b={...l,start_date:o[0],end_date:o[1]};l.start_date=o[0],l.end_date=o[1],h(b)}else h(l)},u=ae();return{tableData:K,widthdrawDetail:y,handleDelete:n=>{q.confirm("\u786E\u5B9A\u8981\u62D2\u7EDD\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{j(n,4)}).catch(()=>{})},handleOk:n=>{q.confirm("\u786E\u5B9A\u8981\u540C\u610F\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{j(n,2)}).catch(()=>{})},product_type:de,options:P,suboptions:B,addoptions:X,main_product_name_selected:_,product_name_selected:g,getProductAndDataList:()=>{g.value="",_.value==-1||({...l,main_product_id:_.value},l.product_id="",v.value=_.value,M(_.value))},getDataById:()=>{if(g.value==-1){const n={...l,product_id:_.value};n.product_id==-1&&delete n.product_id,h(n)}else{const n={...l,product_id:g.value};l.product_id=g.value,n.product_id==-1&&delete n.product_id,h(n)}},query:l,handlePageChange:n=>{if(l.page_index=n,_.value==-1)h(l);else if(_.value>0)if(g.value==-1){const o={product:_.value,...l};h(o)}else if(g.value>0){const o={...l,product_id:g.value};h(o)}else{const o={...l,product_id:_.value};h(o)}else{const o={...l};h(o)}},pageTotal:Q,handleDate:d,dateRange:L,isShow:le,withDrawRecord:(n,o,b)=>{typeof o=="number"?B.value.map(i=>{if(i.product_id==o){n=i.main_product_name,o=i.product_name;return}}):typeof n=="number"&&o==""&&P.value.map(i=>{i.id==n&&(n=i.main_product_name)}),L.value=null,u.push({name:"withdrawreview",params:{main_product_name:n,product_name:o,product_id:b,main_product_id:v.value}})},ExcelData:G,main_product_id:v,getExcelData:re,goback:()=>{L.value=null,u.go(-1)}}},methods:{withdrawDetail(t){this.$router.push({name:"userdetail",params:{wechat_user_id:t}})}}},ue={class:"crumbs"},se=f("\u98CE\u63A7\u7CFB\u7EDF"),ie=f("\u7528\u6237\u7BA1\u7406"),pe=f("\u7533\u8BF7\u63D0\u73B0\u5217\u8868"),me={class:"container"},he={class:"handle-box"},fe=f("\u4EBA\u5DE5\u5BA1\u6838\u8BB0\u5F55"),ge=f("\u8FD4\u56DE"),be=f("\u8BE6\u60C5 "),ve=f("\u540C\u610F "),we=f("\u62D2\u7EDD "),De={class:"pagination"};function ke(t,d,u,e,H,I){const D=m("el-breadcrumb-item"),z=m("el-breadcrumb"),C=m("el-option"),x=m("el-select"),n=m("el-date-picker"),o=m("el-button"),b=m("el-form-item"),i=m("el-form"),p=m("el-table-column"),Z=m("el-table"),N=m("el-pagination");return w(),V("div",null,[k("div",ue,[a(z,{separator:"/"},{default:c(()=>[a(D,null,{default:c(()=>[se]),_:1}),a(D,null,{default:c(()=>[ie]),_:1}),a(D,null,{default:c(()=>[pe]),_:1})]),_:1})]),k("div",me,[k("div",he,[a(x,{modelValue:e.main_product_name_selected,"onUpdate:modelValue":d[0]||(d[0]=r=>e.main_product_name_selected=r),placeholder:"\u9879\u76EE",class:"m-2",onChange:e.getProductAndDataList},{default:c(()=>[(w(!0),V(S,null,T(e.options,r=>(w(),U(C,{key:r.id,label:r.main_product_name,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),a(x,{modelValue:e.product_name_selected,"onUpdate:modelValue":d[1]||(d[1]=r=>e.product_name_selected=r),placeholder:"\u5E94\u7528",class:"m-2",onChange:e.getDataById},{default:c(()=>[(w(!0),V(S,null,T(e.suboptions,r=>(w(),U(C,{key:r.product_id,label:r.product_name,value:r.product_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),a(n,{modelValue:e.dateRange,"onUpdate:modelValue":d[2]||(d[2]=r=>e.dateRange=r),type:"daterange","range-separator":"\u2192",onChange:e.handleDate,"start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue","onChange"]),a(o,{type:"primary",onClick:d[3]||(d[3]=r=>e.withDrawRecord(e.main_product_name_selected,e.product_name_selected,e.query.product_id))},{default:c(()=>[fe]),_:1}),a(o,{type:"primary",onClick:e.goback},{default:c(()=>[ge]),_:1},8,["onClick"])]),a(i,{model:e.widthdrawDetail,inline:!0},{default:c(()=>[a(b,{label:"\u672A\u5BA1\u8BA2\u5355\u6570"},{default:c(()=>[f(Y(e.widthdrawDetail.unaudit_orders_count),1)]),_:1}),a(b,{label:"\u7533\u8BF7\u4EBA\u6570"},{default:c(()=>[f(Y(e.widthdrawDetail.apply_users_count),1)]),_:1}),a(b,{label:"\u672A\u5BA1\u603B\u91D1\u989D"},{default:c(()=>[f(Y(e.widthdrawDetail.unaudit_reward_sum),1)]),_:1})]),_:1},8,["model"]),a(Z,{data:e.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:c(()=>[a(p,{prop:"wechat_user_id",label:"\u7528\u6237ID"}),a(p,{prop:"main_product_name",label:"\u9879\u76EE"}),a(p,{prop:"product_name",label:"\u5E94\u7528"}),a(p,{prop:"nickname",label:"\u7528\u6237\u540D"}),a(p,{prop:"bind_account_count",label:"\u8BBE\u5907\u5173\u8054\u8D26\u53F7"}),a(p,{prop:"amount",label:"\u7533\u8BF7\u63D0\u73B0\u91D1\u989D"}),a(p,{prop:"oaid",label:"\u6570\u76DFid"}),a(p,{prop:"ip",label:"ip"}),a(p,{prop:"ip_address",label:"ip\u5730\u5740"}),a(p,{prop:"updated_at",sortable:"",label:"\u7533\u8BF7\u65F6\u95F4"}),a(p,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:c(r=>[a(o,{type:"text",icon:"el-icon-link",onClick:E=>I.withdrawDetail(r.row.wechat_user_id)},{default:c(()=>[be]),_:2},1032,["onClick"]),A(a(o,{type:"text",class:"agree",icon:"el-icon-edit",onClick:E=>e.handleOk(r.row.id)},{default:c(()=>[ve]),_:2},1032,["onClick"]),[[O,r.row.status==1]]),A(a(o,{type:"text",class:"red",icon:"el-icon-delete",onClick:E=>e.handleDelete(r.row.id)},{default:c(()=>[we]),_:2},1032,["onClick"]),[[O,r.row.status==1]])]),_:1})]),_:1},8,["data"]),k("div",De,[a(N,{background:"",layout:"total, prev, pager, next","current-page":e.query.page_index,"page-size":e.query.page_size,total:e.pageTotal,onCurrentChange:e.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])])}const Le=$(_e,[["render",ke],["__scopeId","data-v-373f0996"],["__file","/Users/apple/Desktop/project-b github/project-b/src/views/WithdrawDetail.vue"]]);export{Le as default};
